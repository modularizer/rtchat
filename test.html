<script type="module">
    import { MQTTRTCClient } from "./mqtt-rtc.js";
    import { RTCSigner } from "./sign.js";

    window.rtc = new MQTTRTCClient();
    try{
    window.signer = new RTCSigner(rtc);
    }catch(e){
        console.error('init', e);
    }
    try{
    signer.reset();
    }catch(e){
        console.error('reset', e);
    }

    /*
    rtc.on("connectionrequest", (user, userInfo) => {
        console.log("connectionrequest", user, userInfo);
        if (confirm("accept connection from " + user + "?")){
            return Promise.resolve(true);
        }else{
            return Promise.resolve(false);
        }
    });
    rtc.on("what is the answer to life, the universe, and everything?", (question, sender) => {
        console.log("received question", question);
        return 42;
    });
    rtc.on("answer", (answer, sender) => {
        console.log("received answer", answer);
    });

    */
    // peer.ask("what is the answer to life, the universe, and everything?").then(console.log);
</script>