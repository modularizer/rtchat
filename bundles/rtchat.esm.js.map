{"version":3,"file":"rtchat.esm.js","sources":["../src/config/defaults.js","../src/utils/object-utils.js","../src/config/rtc-config.js","../src/storage/storage-adapter.js","../src/storage/local-storage-adapter.js","../src/storage/memory-adapter.js","../src/utils/event-emitter.js","../src/utils/deferred-promise.js","../src/core/tab-manager.js","../src/core/mqtt-loader.js","../src/core/mqtt-rtc-client.js","../src/crypto/keys.js","../src/core/signed-client.js","../src/core/interfaces/video-interface.js","../src/ui/video-element.js","../src/core/interfaces/video-stream-display-base.js","../src/ui/video-stream-display.js","../src/ui/audio-stream-display.js","../src/core/interfaces/ringer-interface.js","../src/ui/call-ringer.js","../src/core/interfaces/notification-interface.js","../src/ui/notification-sound.js","../src/ui/call-management.js","../src/core/call-state.js","../src/core/call-manager.js","../src/core/chat-manager.js","../src/core/interfaces/ui-config-interface.js","../src/core/state-manager.js","../src/core/interfaces/ui-component-base.js","../src/ui/components/chat-header.js","../src/ui/base-html/active-users-list-html-base.js","../src/ui/components/active-users-list.js","../src/ui/components/messages-component.js","../src/ui/components/message-input.js","../src/ui/chat-box.js","../src/core/rtc-video-chat.js","../src/ui/base-html/video-chat-html-base.js","../src/ui/video-chat.js","../src/adapters/vanilla/rtchat.js"],"sourcesContent":["/**\n * Default Configuration Values for RTChat\n * \n * This file contains all default configuration values with detailed documentation.\n * These defaults are used when creating an RTCConfig instance.\n */\n\n/**\n * Get the default configuration object\n * @returns {Object} Default configuration object\n */\nexport function getDefaults() {\n  return {\n    // ============================================================================\n    // IDENTITY CONFIGURATION\n    // ============================================================================\n    \n    /**\n     * User's display name\n     * - If null, will be auto-generated or loaded from storage\n     * - Auto-generated format: \"User #123\"\n     * - Saved to storage for persistence (unless starts with \"anon\" or \"User #\")\n     * - Cannot contain: (, ), |, or leading/trailing spaces\n     */\n    name: null,\n    \n    /**\n     * Additional user information to share with peers\n     * - Sent during connection handshake\n     * - Can include publicKeyString, custom metadata, etc.\n     * - Used by peers to make connection decisions\n     */\n    userInfo: {},\n    \n    // ============================================================================\n    // MQTT CONFIGURATION\n    // ============================================================================\n    \n    mqtt: {\n      /**\n       * MQTT broker WebSocket URL\n       * - Used for signaling (connection establishment)\n       * - Format: wss://[username]:[password]@[host]:[port]\n       * - Default: Public cloud.shiftr.io broker (no auth required)\n       * - Only used briefly for signaling, then direct WebRTC takes over\n       */\n      broker: 'wss://broker.emqx.io:8084/mqtt',\n      // broker: 'wss://public:public@public.cloud.shiftr.io',\n\n      /**\n       * MQTT client ID\n       * - Unique identifier for this MQTT connection\n       * - If null, auto-generated as: baseTopic + name\n       * - Should be unique to avoid connection conflicts\n       */\n      clientId: null,\n      \n      /**\n       * MQTT username (if broker requires authentication)\n       * - Used for authenticated MQTT brokers\n       * - Can also be included in broker URL\n       */\n      username: null,\n      \n      /**\n       * MQTT password (if broker requires authentication)\n       * - Used for authenticated MQTT brokers\n       * - Can also be included in broker URL\n       */\n      password: null,\n      \n      /**\n       * Reconnection delay in milliseconds\n       * - How long to wait before attempting to reconnect to MQTT broker\n       * - Used when connection is lost\n       */\n      reconnectPeriod: 1000,\n      \n      /**\n       * Connection timeout in milliseconds\n       * - Maximum time to wait for MQTT connection to establish\n       * - Throws error if connection not established within this time\n       */\n      connectTimeout: 30000\n    },\n    \n    // ============================================================================\n    // WEBRTC CONFIGURATION\n    // ============================================================================\n    \n    webrtc: {\n      /**\n       * ICE (Interactive Connectivity Establishment) servers\n       * - Array of STUN/TURN servers for NAT traversal\n       * - STUN: Discovers public IP/port (free, public servers available)\n       * - TURN: Relays traffic if direct connection fails (usually requires credentials)\n       * - Format: [{ urls: 'stun:server:port' }, { urls: 'turn:server:port', username: 'user', credential: 'pass' }]\n       * - Multiple servers provide redundancy and better connection success\n       * - Default: Multiple Google STUN servers for reliability\n       */\n      iceServers: [\n        { urls: 'stun:stun.l.google.com:19302' },\n        { urls: 'stun:stun1.l.google.com:19302' },\n        { urls: 'stun:stun2.l.google.com:19302' },\n        { urls: 'stun:stun3.l.google.com:19302' },\n        { urls: 'stun:stun4.l.google.com:19302' }\n      ],\n      \n      /**\n       * ICE transport policy\n       * - 'all': Try both STUN and TURN servers (recommended)\n       * - 'relay': Only use TURN servers (more expensive, but works behind strict firewalls)\n       * - Use 'relay' if you have TURN servers and want to ensure connectivity\n       */\n      iceTransportPolicy: 'all',\n      \n      /**\n       * Bundle policy for RTP streams\n       * - 'balanced': Balance between compatibility and performance (recommended)\n       * - 'max-compat': Maximum compatibility (may use more bandwidth)\n       * - 'max-bundle': Maximum bundling (better performance, less compatibility)\n       */\n      bundlePolicy: 'balanced',\n      \n      /**\n       * RTCP muxing policy\n       * - 'require': Require RTCP muxing (recommended, more efficient)\n       * - 'negotiate': Allow non-muxed RTCP (for compatibility with older implementations)\n       */\n      rtcpMuxPolicy: 'require',\n      \n      /**\n       * Wait for answer timeout (milliseconds)\n       * - Maximum time to wait for peer to initiate connection\n       * - If peer doesn't initiate within this time, we initiate instead\n       * - Lower values = faster fallback but may cause connection conflicts\n       * - Higher values = more patient waiting but slower connection establishment\n       * - Default: 12000ms (12 seconds)\n       * - Recommended range: 3000-15000ms\n       */\n      waitForAnswerTimeout: 1000\n    },\n    \n    // ============================================================================\n    // TOPIC/ROOM CONFIGURATION\n    // ============================================================================\n    \n    topic: {\n      /**\n       * Base topic prefix for MQTT\n       * - All messages are published to: baseTopic + separator + room\n       * - Used to namespace different applications/instances\n       * - Default: 'mrtchat'\n       */\n      base: 'mrtchat',\n      \n      /**\n       * Room/channel identifier\n       * - If null, auto-detected from URL (hostname + pathname)\n       * - Users in the same room can discover and connect to each other\n       * - Can be any string (sanitized to alphanumeric)\n       * - Examples: 'lobby', 'game-room-1', 'private-chat'\n       */\n      room: null,\n      \n      /**\n       * Separator between base topic and room\n       * - Used when constructing full topic: base + separator + room\n       * - Default: '/'\n       * - Example: 'mrtchat/lobby'\n       */\n      separator: '/'\n    },\n    \n    // ============================================================================\n    // DEPENDENCY INJECTION\n    // ============================================================================\n    \n    /**\n     * Storage adapter instance\n     * - If null, uses LocalStorageAdapter (browser) or falls back to memory\n     * - Allows swapping storage implementations for testing or custom storage\n     * - Must implement: getItem(key), setItem(key, value), removeItem(key)\n     * - See: src/storage/storage-adapter.js\n     */\n    storage: null,\n    \n    /**\n     * Crypto API instance\n     * - If null, uses window.crypto (browser Web Crypto API)\n     * - Allows injecting mock crypto for testing\n     * - Must implement: subtle.generateKey(), subtle.sign(), subtle.verify()\n     */\n    crypto: null,\n    \n    /**\n     * MQTT library instance\n     * - If null, auto-loads from CDN (mqtt.js)\n     * - Allows injecting custom MQTT library or pre-loaded instance\n     * - Must implement: connect(url, options), on('connect'), on('message'), publish()\n     */\n    mqttLibrary: null,\n    \n    // ============================================================================\n    // COMPRESSION CONFIGURATION\n    // ============================================================================\n    \n    compression: {\n      /**\n       * Enable message compression\n       * - Reduces bandwidth usage for large messages\n       * - Uses LZ-String by default\n       * - Only compresses messages above threshold\n       */\n      enabled: true,\n      \n      /**\n       * Compression library to use\n       * - 'lz-string': LZ-String (default, good balance)\n       * - 'pako': Pako (zlib, better compression, larger library)\n       * - 'none': No compression\n       */\n      library: 'lz-string',\n      \n      /**\n       * Minimum message size to compress (in bytes)\n       * - Messages smaller than this are sent uncompressed\n       * - Compression has overhead, so small messages aren't worth compressing\n       * - Default: 100 bytes\n       */\n      threshold: 100\n    },\n    \n    // ============================================================================\n    // CONNECTION BEHAVIOR\n    // ============================================================================\n    \n    connection: {\n      /**\n       * Automatically connect to MQTT on client creation\n       * - If false, must call client.load() manually\n       * - Useful for delayed connection or testing\n       */\n      autoConnect: true,\n      \n      /**\n       * Automatically reconnect if connection is lost\n       * - Attempts to reconnect with exponential backoff\n       * - Set to false to handle reconnection manually\n       */\n      autoReconnect: true,\n      \n      /**\n       * Maximum number of reconnection attempts\n       * - Infinity: Keep trying forever (default)\n       * - Number: Stop after N attempts\n       * - Useful for limiting reconnection attempts\n       */\n      maxReconnectAttempts: Infinity,\n      \n      /**\n       * Delay between reconnection attempts (milliseconds)\n       * - Initial delay before first reconnection attempt\n       * - May increase with exponential backoff\n       */\n      reconnectDelay: 1000,\n      \n      /**\n       * Connection timeout (milliseconds)\n       * - Maximum time to wait for initial connection\n       * - Throws error if not connected within this time\n       */\n      connectionTimeout: 30000,\n      \n      /**\n       * Automatically accept all peer connection requests\n       * - If true, bypasses connection prompts and accepts all requests\n       * - Only applies to SignedMQTTRTCClient (MQTTRTCClient always auto-accepts)\n       * - When false, prompts user based on trust levels\n       * - Useful for testing, public demos, or trusted environments\n       */\n      autoAcceptConnections: false\n    },\n    \n    // ============================================================================\n    // HISTORY/LOGGING\n    // ============================================================================\n    \n    history: {\n      /**\n       * Enable message history tracking\n       * - Tracks all MQTT messages sent/received\n       * - Useful for debugging and message replay\n       * - Disable to save memory in production\n       */\n      enabled: true,\n      \n      /**\n       * Maximum number of messages to keep in history\n       * - Older messages are removed when limit is reached\n       * - Set to 0 to disable history (saves memory)\n       * - Default: 1000 messages\n       */\n      maxLength: 1000\n    },\n    \n    // ============================================================================\n    // TAB MANAGEMENT\n    // ============================================================================\n    \n    tabs: {\n      /**\n       * Enable multi-tab management\n       * - Tracks multiple browser tabs/windows for the same session\n       * - Adds tab ID to username to distinguish tabs\n       * - Disable if you don't need multi-tab support\n       */\n      enabled: true,\n      \n      /**\n       * Polling interval for tab keep-alive (milliseconds)\n       * - How often to update the \"last seen\" timestamp\n       * - Lower values = more responsive, but more storage writes\n       * - Default: 250ms\n       */\n      pollInterval: 250,\n      \n      /**\n       * Tab timeout (seconds)\n       * - Tabs not seen for this long are considered closed\n       * - Used to clean up stale tab entries\n       * - Default: 300 seconds (5 minutes)\n       */\n      timeout: 300\n    },\n    \n    // ============================================================================\n    // DEBUG/LOGGING\n    // ============================================================================\n    \n    /**\n     * Enable debug logging\n     * - Logs detailed information about connections, messages, etc.\n     * - Useful for development and troubleshooting\n     * - Disable in production for better performance\n     */\n    debug: false,\n    \n    /**\n     * Custom logger function\n     * - If provided, used instead of console.log/error\n     * - Signature: (level: string, message: string, ...args: any[]) => void\n     * - Allows integration with custom logging systems\n     * - If null, uses console methods\n     */\n    logger: null,\n    \n    // ============================================================================\n    // CONNECTION LOADING\n    // ============================================================================\n    \n    /**\n     * Auto-load flag\n     * - If false, client won't automatically connect\n     * - Must call client.load() manually\n     * - Default: true (auto-connect)\n     */\n    load: true\n  };\n}\n\n","/**\n * Object Utilities - Helper functions for object manipulation\n * \n * Provides utilities for deep merging objects and type checking.\n */\n\n/**\n * Check if a value is a plain object (not array, null, or other types)\n * @param {*} item - Value to check\n * @returns {boolean} True if item is a plain object\n */\nexport function isObject(item) {\n  return item && typeof item === 'object' && !Array.isArray(item);\n}\n\n/**\n * Deep merge two objects recursively\n * \n * Merges source into target, creating a new object. Nested objects are merged\n * recursively rather than being replaced entirely.\n * \n * @param {Object} target - Target object to merge into\n * @param {Object} source - Source object to merge from\n * @returns {Object} New merged object (target is not modified)\n * \n * @example\n * const merged = deepMerge({ a: 1, b: { c: 2 } }, { b: { d: 3 }, e: 4 });\n * // Result: { a: 1, b: { c: 2, d: 3 }, e: 4 }\n */\nexport function deepMerge(target, source) {\n  const output = { ...target };\n  \n  if (isObject(target) && isObject(source)) {\n    Object.keys(source).forEach(key => {\n      if (isObject(source[key])) {\n        if (!(key in target)) {\n          Object.assign(output, { [key]: source[key] });\n        } else {\n          output[key] = deepMerge(target[key], source[key]);\n        }\n      } else {\n        Object.assign(output, { [key]: source[key] });\n      }\n    });\n  }\n  \n  return output;\n}\n\n","/**\n * RTCConfig - Configuration management for RTChat\n * \n * Centralized configuration system with validation, normalization, and presets.\n * Uses nested configuration format with validation and presets.\n */\n\nimport { getDefaults } from './defaults.js';\nimport { deepMerge } from '../utils/object-utils.js';\n\nexport class RTCConfig {\n  // Static defaults object - single source of truth\n  static getDefaults() {\n    return getDefaults();\n  }\n  \n  constructor(userConfig = {}) {\n    // Normalize user config (handle common string formats)\n    const normalized = this.normalizeUserConfig(userConfig);\n    \n    // Get defaults from separate file and merge with user config\n    const defaults = getDefaults();\n    this.config = deepMerge(defaults, normalized);\n    \n    // Apply computed defaults (functions that need instance context)\n    this.applyComputedDefaults();\n    \n    // Validate configuration\n    this.validate();\n    \n    // Normalize values (e.g., convert single STUN to array)\n    this.normalize();\n  }\n  \n  normalizeUserConfig(userConfig) {\n    const normalized = { ...userConfig };\n    \n    // Handle topic as string -> topic.room\n    if (typeof userConfig.topic === 'string') {\n      normalized.topic = { room: userConfig.topic };\n    }\n    \n    return normalized;\n  }\n  \n  applyComputedDefaults() {\n    // Apply defaults that require instance methods (only for dynamic values that can't be in static defaults)\n    // These are values that depend on runtime context (localStorage, window.location, etc.)\n    if (!this.config.name) {\n      this.config.name = this.getDefaultName();\n    }\n    \n    if (!this.config.topic.room) {\n      this.config.topic.room = this.getDefaultRoom();\n    }\n    \n    // iceServers is now in the defaults dictionary, so deepMerge will handle it automatically\n    // Only need to handle explicit null/empty array cases\n    if (this.config.webrtc.iceServers === null || \n        (Array.isArray(this.config.webrtc.iceServers) && this.config.webrtc.iceServers.length === 0)) {\n      // User explicitly wants to use defaults, copy from defaults\n      this.config.webrtc.iceServers = [...getDefaults().webrtc.iceServers];\n    }\n  }\n  \n  getDefaultName() {\n    // Try localStorage, then generate\n    if (typeof window !== 'undefined' && window.localStorage) {\n      try {\n        const stored = localStorage.getItem('rtchat_name') || localStorage.getItem('name');\n        if (stored && !stored.startsWith('anon')) {\n          return stored;\n        }\n      } catch (e) {\n        // localStorage might not be available\n      }\n    }\n    return `User #${Math.floor(Math.random() * 1000)}`;\n  }\n  \n  getDefaultRoom() {\n    // Auto-detect from URL if in browser\n    if (typeof window !== 'undefined' && window.location) {\n      const hostname = window.location.hostname;\n      const pathname = window.location.pathname\n        .replace(/rtchat\\/?/, '')\n        .replace(/index\\.html$/, '')\n        .replace(/\\.html$/, '')\n        .replace(/[^a-zA-Z0-9]/g, '');\n      \n      // Skip localhost/127.0.0.1 for room name\n      if (!['localhost', '127.0.0.1'].includes(hostname)) {\n        return hostname + pathname;\n      }\n      return pathname || 'default';\n    }\n    return 'default';\n  }\n  \n  validate() {\n    // Validate name\n    if (this.config.name) {\n      if (this.config.name.includes('(') || this.config.name.includes(')') || this.config.name.includes('|')) {\n        throw new Error('Name cannot contain (, ), or |');\n      }\n      if (this.config.name !== this.config.name.trim()) {\n        throw new Error('Name cannot have leading or trailing spaces');\n      }\n    }\n    \n    // Validate MQTT broker URL\n    if (this.config.mqtt.broker) {\n      try {\n        new URL(this.config.mqtt.broker);\n      } catch (e) {\n        throw new Error(`Invalid MQTT broker URL: ${this.config.mqtt.broker}`);\n      }\n    }\n    \n    // Validate ICE servers\n    if (this.config.webrtc.iceServers) {\n      if (!Array.isArray(this.config.webrtc.iceServers)) {\n        // Will be normalized to array, but check if it's a valid string\n        if (typeof this.config.webrtc.iceServers !== 'string') {\n          throw new Error('iceServers must be an array or string');\n        }\n      }\n    }\n  }\n  \n  normalize() {\n    // Ensure ICE servers is always an array\n    if (!Array.isArray(this.config.webrtc.iceServers)) {\n      const server = this.config.webrtc.iceServers;\n      if (typeof server === 'string') {\n        this.config.webrtc.iceServers = [{ urls: server }];\n      } else if (server && server.urls) {\n        this.config.webrtc.iceServers = [server];\n      } else {\n        // Use defaults from defaults file\n        this.config.webrtc.iceServers = [...getDefaults().webrtc.iceServers];\n      }\n    }\n    \n    // Convert string URLs to object format\n    this.config.webrtc.iceServers = this.config.webrtc.iceServers.map(server => {\n      if (typeof server === 'string') {\n        return { urls: server };\n      }\n      return server;\n    });\n    \n    // Ensure topic separator is applied correctly\n    if (this.config.topic.separator && !this.config.topic.room.includes(this.config.topic.separator)) {\n      // Separator will be used when constructing full topic\n    }\n  }\n  \n  // Getters for easy access\n  get name() { return this.config.name; }\n  get broker() { return this.config.mqtt.broker; }\n  get iceServers() { return this.config.webrtc.iceServers; }\n  get topic() { \n    const sep = this.config.topic.separator || '/';\n    return `${this.config.topic.base}${sep}${this.config.topic.room}`;\n  }\n  get baseTopic() { return this.config.topic.base; }\n  get room() { return this.config.topic.room; }\n  \n  // Get full config object\n  getConfig() {\n    return this.config;\n  }\n  \n  // Update specific config values\n  update(updates) {\n    const normalized = this.normalizeUserConfig(updates);\n    this.config = deepMerge(this.config, normalized);\n    this.applyComputedDefaults();\n    this.validate();\n    this.normalize();\n  }\n}\n\n// Preset configurations\nexport const ConfigPresets = {\n  // Default - balanced for most use cases\n  default: () => new RTCConfig({}),\n  \n  // High performance - multiple STUN servers, optimized settings\n  performance: () => new RTCConfig({\n    webrtc: {\n      iceServers: [\n        { urls: 'stun:stun.l.google.com:19302' },\n        { urls: 'stun:stun1.l.google.com:19302' },\n        { urls: 'stun:stun2.l.google.com:19302' },\n        { urls: 'stun:stun3.l.google.com:19302' },\n        { urls: 'stun:stun4.l.google.com:19302' }\n      ],\n      iceTransportPolicy: 'all'\n    },\n    connection: {\n      autoReconnect: true,\n      reconnectDelay: 500\n    }\n  }),\n  \n  // Privacy-focused - custom STUN/TURN servers\n  privacy: (customServers) => new RTCConfig({\n    webrtc: {\n      iceServers: customServers || [\n        // User should provide their own servers\n        { urls: 'stun:stun.l.google.com:19302' }\n      ]\n    }\n  }),\n  \n  // Development - local MQTT broker\n  development: (localBroker = 'ws://localhost:1883') => new RTCConfig({\n    mqtt: {\n      broker: localBroker\n    },\n    debug: true\n  }),\n  \n  // Production - optimized for production use\n  production: () => new RTCConfig({\n    compression: { enabled: true },\n    history: { maxLength: 500 },\n    connection: {\n      autoReconnect: true,\n      maxReconnectAttempts: 10\n    },\n    debug: false\n  })\n};\n\n","/**\n * Storage Adapter - Abstract base class for storage operations\n * \n * This is an abstract class that must be extended. It defines the interface\n * for storage operations, allowing swapping between localStorage, memory storage,\n * or custom implementations for better testability and flexibility.\n * \n * @abstract\n * @class StorageAdapter\n * \n * @example\n * // Extend this class to create a custom storage adapter\n * class MyStorageAdapter extends StorageAdapter {\n *   constructor() {\n *     super(); // Required\n *     // Initialize your storage\n *   }\n *   \n *   getItem(key) {\n *     // Implement getItem\n *   }\n *   \n *   // ... implement other methods\n * }\n */\nexport class StorageAdapter {\n  constructor() {\n    // Prevent direct instantiation of abstract class\n    if (this.constructor === StorageAdapter) {\n      throw new Error('StorageAdapter is an abstract class and cannot be instantiated directly. Extend it instead.');\n    }\n  }\n  \n  /**\n   * Get an item from storage by key\n   * @abstract\n   * @param {string} key - The key to retrieve\n   * @returns {string|null} The value associated with the key, or null if not found\n   */\n  getItem(key) {\n    throw new Error('getItem must be implemented by subclass');\n  }\n  \n  /**\n   * Set an item in storage\n   * @abstract\n   * @param {string} key - The key to store\n   * @param {string} value - The value to store\n   */\n  setItem(key, value) {\n    throw new Error('setItem must be implemented by subclass');\n  }\n  \n  /**\n   * Remove an item from storage\n   * @abstract\n   * @param {string} key - The key to remove\n   */\n  removeItem(key) {\n    throw new Error('removeItem must be implemented by subclass');\n  }\n  \n  /**\n   * Clear all items from storage\n   * @abstract\n   */\n  clear() {\n    throw new Error('clear must be implemented by subclass');\n  }\n  \n  /**\n   * Get the key at the specified index\n   * @abstract\n   * @param {number} index - The index of the key to retrieve\n   * @returns {string|null} The key at the index, or null if not found\n   */\n  key(index) {\n    throw new Error('key must be implemented by subclass');\n  }\n  \n  /**\n   * Get the number of items in storage\n   * @abstract\n   * @returns {number} The number of items\n   */\n  get length() {\n    throw new Error('length must be implemented by subclass');\n  }\n}\n\n","/**\n * LocalStorage Adapter - Browser localStorage implementation\n */\n\nimport { StorageAdapter } from './storage-adapter.js';\n\nexport class LocalStorageAdapter extends StorageAdapter {\n  constructor() {\n    super();\n    if (typeof window === 'undefined' || !window.localStorage) {\n      throw new Error('localStorage is not available in this environment');\n    }\n    this.storage = window.localStorage;\n  }\n  \n  getItem(key) {\n    try {\n      return this.storage.getItem(key);\n    } catch (e) {\n      console.warn('localStorage.getItem failed:', e);\n      return null;\n    }\n  }\n  \n  setItem(key, value) {\n    try {\n      this.storage.setItem(key, value);\n    } catch (e) {\n      console.warn('localStorage.setItem failed:', e);\n      // Handle quota exceeded or other errors\n      if (e.name === 'QuotaExceededError') {\n        throw new Error('Storage quota exceeded');\n      }\n    }\n  }\n  \n  removeItem(key) {\n    try {\n      this.storage.removeItem(key);\n    } catch (e) {\n      console.warn('localStorage.removeItem failed:', e);\n    }\n  }\n  \n  clear() {\n    try {\n      this.storage.clear();\n    } catch (e) {\n      console.warn('localStorage.clear failed:', e);\n    }\n  }\n  \n  key(index) {\n    try {\n      return this.storage.key(index);\n    } catch (e) {\n      console.warn('localStorage.key failed:', e);\n      return null;\n    }\n  }\n  \n  get length() {\n    try {\n      return this.storage.length;\n    } catch (e) {\n      return 0;\n    }\n  }\n}\n\n","/**\n * Memory Storage Adapter - In-memory storage for testing or server-side use\n */\n\nimport { StorageAdapter } from './storage-adapter.js';\n\nexport class MemoryAdapter extends StorageAdapter {\n  constructor() {\n    super();\n    this.data = {};\n  }\n  \n  getItem(key) {\n    return this.data[key] || null;\n  }\n  \n  setItem(key, value) {\n    this.data[key] = String(value);\n  }\n  \n  removeItem(key) {\n    delete this.data[key];\n  }\n  \n  clear() {\n    this.data = {};\n  }\n  \n  key(index) {\n    const keys = Object.keys(this.data);\n    return keys[index] || null;\n  }\n  \n  get length() {\n    return Object.keys(this.data).length;\n  }\n}\n\n","/**\n * EventEmitter - Simple event system for RTChat\n * \n * Provides on, off, emit methods for event-driven architecture\n */\n\nexport class EventEmitter {\n  constructor() {\n    this.events = {};\n  }\n  \n  on(event, handler) {\n    if (typeof handler !== 'function') {\n      throw new Error('Handler must be a function');\n    }\n    if (!this.events[event]) {\n      this.events[event] = [];\n    }\n    this.events[event].push(handler);\n    \n    // Return unsubscribe function\n    return () => this.off(event, handler);\n  }\n  \n  off(event, handler) {\n    if (!this.events[event]) {\n      return;\n    }\n    this.events[event] = this.events[event].filter(h => h !== handler);\n  }\n  \n  emit(event, ...args) {\n    if (!this.events[event]) {\n      return;\n    }\n    // Create a copy to avoid issues if handlers modify the array\n    const handlers = [...this.events[event]];\n    handlers.forEach(handler => {\n      try {\n        handler(...args);\n      } catch (e) {\n        console.error(`Error in event handler for ${event}:`, e);\n      }\n    });\n  }\n  \n  once(event, handler) {\n    const wrappedHandler = (...args) => {\n      handler(...args);\n      this.off(event, wrappedHandler);\n    };\n    return this.on(event, wrappedHandler);\n  }\n  \n  removeAllListeners(event) {\n    if (event) {\n      delete this.events[event];\n    } else {\n      this.events = {};\n    }\n  }\n  \n  listenerCount(event) {\n    return this.events[event] ? this.events[event].length : 0;\n  }\n}\n\n","/**\n * DeferredPromise - Promise that can be resolved/rejected externally\n */\n\nexport class DeferredPromise {\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n    });\n  }\n}\n\n","/**\n * Tab Manager - Manages multiple tabs/windows for the same session\n * \n * Uses storage adapter to track active tabs and assign unique IDs\n */\n\nexport class TabManager {\n  constructor(storage, config) {\n    this.storage = storage;\n    this.config = config;\n    this.tabID = null;\n    this.interval = null;\n    this.reinitializing = false;\n    this.instanceToken = this._generateRandomToken();\n    this.writeCounter = 0;\n    this.initialize();\n  }\n  \n  /**\n   * Generate a random token for identifying writers/instances.\n   */\n  _generateRandomToken() {\n    if (typeof crypto !== 'undefined' && typeof crypto.randomUUID === 'function') {\n      return crypto.randomUUID();\n    }\n    return (\n      Math.random().toString(36).slice(2) +\n      Date.now().toString(36) +\n      Math.random().toString(36).slice(2)\n    );\n  }\n  \n  /**\n   * Generate a unique token for each write attempt so we can detect\n   * whether our mutation \"won\" the race when the state is re-read.\n   */\n  _nextWriteToken() {\n    this.writeCounter += 1;\n    return `${this.instanceToken}-${this.writeCounter}-${Date.now()}`;\n  }\n  \n  /**\n   * Normalize, sort, and deduplicate a list of tab IDs.\n   */\n  _normalizeTabs(tabs) {\n    const numericTabs = [];\n    for (let value of Array.isArray(tabs) ? tabs : []) {\n      const parsed = Number(value);\n      if (Number.isFinite(parsed) && parsed >= 0) {\n        numericTabs.push(Math.floor(parsed));\n      }\n    }\n    numericTabs.sort((a, b) => a - b);\n    const deduped = [];\n    for (let id of numericTabs) {\n      if (deduped.length === 0 || deduped[deduped.length - 1] !== id) {\n        deduped.push(id);\n      }\n    }\n    return deduped;\n  }\n  \n  _tabsChanged(prev, next) {\n    if (prev.length !== next.length) {\n      return true;\n    }\n    for (let i = 0; i < prev.length; i++) {\n      if (prev[i] !== next[i]) {\n        return true;\n      }\n    }\n    return false;\n  }\n  \n  /**\n   * Read the current tab state object from storage.\n   * Supports legacy array format for backward compatibility.\n   */\n  _readTabState() {\n    const raw = this.storage.getItem('tabs');\n    let writer = null;\n    let tabsPayload = [];\n    \n    if (raw) {\n      try {\n        const parsed = JSON.parse(raw);\n        if (Array.isArray(parsed)) {\n          tabsPayload = parsed;\n        } else if (parsed && Array.isArray(parsed.tabs)) {\n          tabsPayload = parsed.tabs;\n          writer = parsed.writer || null;\n        }\n      } catch (e) {\n        if (this.config.debug) {\n          console.warn('TabManager: failed to parse tab state payload, resetting.', e);\n        }\n        this.storage.removeItem('tabs');\n      }\n    }\n    \n    const normalized = this._normalizeTabs(tabsPayload);\n    if (normalized.length !== tabsPayload.length) {\n      // Rewrite state immediately to remove duplicates/invalid entries.\n      this.storage.setItem('tabs', JSON.stringify({ writer, tabs: normalized }));\n      if (this.config.debug && tabsPayload.length > normalized.length) {\n        console.log(`Removed ${tabsPayload.length - normalized.length} invalid/duplicate tab ID(s)`);\n      }\n    }\n    \n    return { writer, tabs: normalized };\n  }\n  \n  /**\n   * Write the provided tabs list to storage alongside the writer token.\n   */\n  _writeTabState(tabs, writerToken) {\n    const normalized = this._normalizeTabs(tabs);\n    this.storage.setItem('tabs', JSON.stringify({\n      writer: writerToken || null,\n      tabs: normalized\n    }));\n    return normalized;\n  }\n  \n  /**\n   * Helper method to read and deduplicate the tabs array\n   * This ensures we always work with a unique set of tab IDs\n   */\n  _readAndDeduplicateTabs() {\n    return this._readTabState().tabs;\n  }\n  \n  /**\n   * Helper method to clean up stale tabs and return deduplicated active tabs\n   */\n  _cleanupStaleTabs() {\n    let existingTabs = this._readAndDeduplicateTabs();\n    \n    const timeNow = Date.now();\n    const timeout = this.config.tabs.timeout * 1000; // Convert to milliseconds\n    \n    // Clean up stale tabs\n    const activeTabs = [];\n    for (let existingTabID of existingTabs) {\n      const ts = this.storage.getItem(\"tabpoll_\" + existingTabID);\n      if (ts) {\n        const lastUpdateTime = new Date(1 * ts);\n        if ((lastUpdateTime == \"Invalid Date\") || ((timeNow - lastUpdateTime) > timeout)) {\n          // Tab is stale, remove it\n          this.storage.removeItem(\"tabpoll_\" + existingTabID);\n        } else {\n          // Tab is still active\n          activeTabs.push(existingTabID);\n        }\n      } else {\n        // No poll timestamp, remove it\n        this.storage.removeItem(\"tabpoll_\" + existingTabID);\n      }\n    }\n    \n    // Update storage with only active tabs (already deduplicated)\n    if (this._tabsChanged(existingTabs, activeTabs)) {\n      this._writeTabState(activeTabs, this._nextWriteToken());\n    }\n    return activeTabs;\n  }\n  \n  initialize() {\n    if (!this.config.tabs.enabled) {\n      this.tabID = null;\n      return;\n    }\n    \n    // Clean up stale tabs and get deduplicated active tabs\n    this._cleanupStaleTabs();\n    \n    // Retry loop to handle race conditions when multiple tabs initialize simultaneously\n    const maxRetries = 10;\n    let retryCount = 0;\n    let nextTabID = null;\n    \n    while (retryCount < maxRetries && nextTabID === null) {\n      // Re-read and deduplicate tabs list to get the most current state\n      let existingTabs = this._readAndDeduplicateTabs();\n      \n      // Find the next available tab ID\n      // First, try to find a gap (reuse IDs from closed tabs)\n      let candidateID = 0;\n      if (existingTabs.length > 0) {\n        const sortedTabs = [...existingTabs].sort((a, b) => a - b);\n        // Look for first gap starting from 0\n        for (let i = 0; i < sortedTabs.length; i++) {\n          if (sortedTabs[i] !== i) {\n            candidateID = i;\n            break;\n          }\n          candidateID = i + 1;\n        }\n      }\n      \n      // Re-read and deduplicate again to check for race condition\n      let currentTabs = this._readAndDeduplicateTabs();\n      \n      // Check if candidate ID is already taken\n      if (!currentTabs.includes(candidateID)) {\n        // ID is available, claim it atomically using writer tokens\n        const updatedTabs = [...currentTabs, candidateID];\n        const writeToken = this._nextWriteToken();\n        this._writeTabState(updatedTabs, writeToken);\n        \n        // Verify we successfully claimed it uniquely by ensuring our write \"won\"\n        const verifyState = this._readTabState();\n        if (verifyState.writer === writeToken && verifyState.tabs.includes(candidateID)) {\n          nextTabID = candidateID;\n        } else {\n          retryCount++;\n          if (this.config.debug && retryCount < maxRetries) {\n            console.log(`Tab ID conflict detected after claim verification, retrying... (attempt ${retryCount + 1}/${maxRetries})`);\n          }\n        }\n      } else {\n        // ID was taken by another tab, retry\n        retryCount++;\n        if (this.config.debug && retryCount < maxRetries) {\n          console.log(`Tab ID conflict detected, retrying... (attempt ${retryCount + 1}/${maxRetries})`);\n        }\n      }\n    }\n    \n    if (nextTabID === null) {\n      throw new Error(`Failed to acquire unique tab ID after ${maxRetries} attempts`);\n    }\n    \n    this.tabID = nextTabID;\n    \n    // Start polling to keep tab alive\n    const pollKey = \"tabpoll_\" + this.tabID;\n    this.storage.setItem(pollKey, Date.now().toString());\n    this.interval = setInterval(() => {\n      this._ensureTabStillRegistered();\n      this.storage.setItem(pollKey, Date.now().toString());\n    }, this.config.tabs.pollInterval);\n    \n    if (this.config.debug) {\n      console.log(\"Tab ID: \", this.tabID);\n    }\n  }\n  \n  getTabID() {\n    return this.tabID;\n  }\n  \n  cleanup() {\n    if (this.interval) {\n      clearInterval(this.interval);\n      this.interval = null;\n    }\n    \n    if (this.tabID !== null) {\n      // Read and deduplicate tabs before removing this tab's ID\n      let existingTabs = this._readAndDeduplicateTabs();\n      // Remove all instances of this tab ID (should only be one, but be safe)\n      const filteredTabs = existingTabs.filter(v => v !== this.tabID);\n      if (this._tabsChanged(existingTabs, filteredTabs)) {\n        this._writeTabState(filteredTabs, this._nextWriteToken());\n      }\n      this.storage.removeItem(\"tabpoll_\" + this.tabID);\n    }\n  }\n  \n  _ensureTabStillRegistered() {\n    if (this.tabID === null || this.reinitializing) {\n      return;\n    }\n    const tabs = this._readAndDeduplicateTabs();\n    if (!tabs.includes(this.tabID)) {\n      if (this.config.debug) {\n        console.warn(`Lost ownership of tab ID ${this.tabID}, attempting recovery`);\n      }\n      this._recoverFromLostRegistration();\n    }\n  }\n  \n  _recoverFromLostRegistration() {\n    if (this.reinitializing) {\n      return;\n    }\n    this.reinitializing = true;\n    const previousTabID = this.tabID;\n    try {\n      this.cleanup();\n      this.tabID = null;\n      this.initialize();\n      if (this.config.debug) {\n        console.log(`Recovered tab ID. Old ID: ${previousTabID}, New ID: ${this.tabID}`);\n      }\n    } finally {\n      this.reinitializing = false;\n    }\n  }\n}\n\n\n","/**\n * MQTT Library Loader - Handles loading MQTT and compression libraries\n */\n\nexport class MQTTLoader {\n  constructor(config) {\n    this.config = config;\n    this.mqtt = null;\n    this.compression = null;\n    this.loading = false;\n  }\n  \n  async load() {\n    if (this.loading) {\n      return this.waitForLoad();\n    }\n    \n    this.loading = true;\n    \n    // If mqttLibrary is provided, use it\n    if (this.config.mqttLibrary) {\n      this.mqtt = this.config.mqttLibrary;\n      this.loading = false;\n      return this.mqtt;\n    }\n    \n    // Otherwise, try to load from global or CDN\n    if (typeof window !== 'undefined') {\n      // Check if already loaded\n      if (window.mqtt) {\n        this.mqtt = window.mqtt;\n        this.loading = false;\n        return this.mqtt;\n      }\n      \n      // Load from CDN\n      return this.loadFromCDN();\n    }\n    \n    throw new Error('MQTT library not available and cannot be loaded');\n  }\n  \n  loadFromCDN() {\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = \"https://unpkg.com/mqtt/dist/mqtt.min.js\";\n      script.onload = () => {\n        if (window.mqtt) {\n          this.mqtt = window.mqtt;\n          this.loadCompression().then(() => {\n            this.loading = false;\n            resolve(this.mqtt);\n          });\n        } else {\n          this.loading = false;\n          reject(new Error('MQTT library failed to load'));\n        }\n      };\n      script.onerror = () => {\n        this.loading = false;\n        reject(new Error('Failed to load MQTT library from CDN'));\n      };\n      document.head.appendChild(script);\n    });\n  }\n  \n  async loadCompression() {\n    if (!this.config.compression.enabled) {\n      return;\n    }\n    \n    const library = this.config.compression.library;\n    \n    if (library === 'lz-string') {\n      if (window.LZString) {\n        this.compression = window.LZString;\n        return;\n      }\n      \n      return new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.src = \"https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js\";\n        script.onload = () => {\n          if (window.LZString) {\n            this.compression = window.LZString;\n            resolve();\n          } else {\n            reject(new Error('LZ-String library failed to load'));\n          }\n        };\n        script.onerror = () => {\n          reject(new Error('Failed to load LZ-String library'));\n        };\n        document.head.appendChild(script);\n      });\n    }\n  }\n  \n  getMQTT() {\n    return this.mqtt;\n  }\n  \n  getCompression() {\n    return this.compression;\n  }\n  \n  compress(data) {\n    if (!this.compression || !this.config.compression.enabled) {\n      return data;\n    }\n    \n    const str = typeof data === 'string' ? data : JSON.stringify(data);\n    if (str.length < this.config.compression.threshold) {\n      return data;\n    }\n    \n    if (this.compression.compressToUint8Array) {\n      return this.compression.compressToUint8Array(str);\n    }\n    return data;\n  }\n  \n  decompress(data) {\n    if (!this.compression || !this.config.compression.enabled) {\n      return data;\n    }\n    \n    if (this.compression.decompressFromUint8Array) {\n      return this.compression.decompressFromUint8Array(data);\n    }\n    return data;\n  }\n  \n  waitForLoad() {\n    return new Promise((resolve) => {\n      const checkInterval = setInterval(() => {\n        if (!this.loading && this.mqtt) {\n          clearInterval(checkInterval);\n          resolve(this.mqtt);\n        }\n      }, 100);\n    });\n  }\n}\n\n","/**\n * MQTT-RTC Client Library - Core peer-to-peer communication system\n * \n * This module provides a complete implementation for establishing peer-to-peer connections\n * using MQTT for signaling and WebRTC for direct communication. It handles connection\n * management, data channels, video/audio calls, and message passing.\n * \n * Architecture:\n * - BaseMQTTRTCClient: Base class with MQTT and WebRTC connection logic\n * - PromisefulMQTTRTCClient: Adds promise-based APIs for async operations\n * - MQTTRTCClient: High-level client with event callbacks and peer management\n * - RTCConnection: Manages individual WebRTC peer connections\n * - Peer: Convenience wrapper for interacting with a specific peer\n * \n * Usage:\n *   import { MQTTRTCClient } from './mqtt-rtc.js';\n *   \n *   const client = new MQTTRTCClient({\n *     name: 'MyName',\n *     topic: 'myroom',\n *     broker: 'wss://broker.example.com',\n *     stunServer: 'stun:stun.example.com:19302'\n *   });\n * \n *   client.on('connectedtopeer', (user) => {\n *     console.log('Connected to', user);\n *   });\n * \n *   client.on('chat', (message, sender) => {\n *     console.log(`${sender}: ${message}`);\n *   });\n * \n *   // Send a message to all connected peers\n *   client.sendRTCChat('Hello everyone!');\n * \n *   // Get a peer object for direct interaction\n *   const peer = client.getPeer('OtherUser');\n *   peer.dm('Private message');\n *   peer.ask('What is 2+2?').then(answer => console.log(answer));\n * \n * Features:\n * - Automatic connection establishment via MQTT signaling\n * - WebRTC data channels for messaging\n * - Video/audio calling support\n * - Question/answer system for RPC-like communication\n * - Ping/pong for connection health checks\n * - Tab ID management for multiple tabs\n * - Message compression using LZ-String\n * - Connection history tracking\n * \n * Configuration:\n * - broker: MQTT broker URL (default: public cloud.shiftr.io)\n * - stunServer: STUN server for NAT traversal (default: Google STUN)\n * - baseTopic: Base MQTT topic prefix (default: 'mrtchat')\n * - topic: Room/channel identifier (auto-derived from URL by default)\n * - name: User identifier (auto-generated if not provided)\n * \n * @module mqtt-rtc\n */\n\n// Import new refactored modules\nimport { RTCConfig } from '../config/rtc-config.js';\nimport { LocalStorageAdapter } from '../storage/local-storage-adapter.js';\nimport { TabManager } from './tab-manager.js';\nimport { MQTTLoader } from './mqtt-loader.js';\nimport { EventEmitter } from '../utils/event-emitter.js';\nimport { DeferredPromise } from '../utils/deferred-promise.js';\n\n// DEBUG: Intercept ALL getUserMedia calls to track stream creation\nif (typeof navigator !== 'undefined' && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n  const originalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(constraints) {\n    console.log(\"ðŸŽ¥ðŸŽ¤ getUserMedia CALLED with constraints:\", constraints);\n    console.trace(\"getUserMedia call stack\");\n    return originalGetUserMedia(constraints).then(stream => {\n      console.log(\"ðŸŽ¥ðŸŽ¤ getUserMedia RETURNED stream with tracks:\", stream.getTracks().map(t => `${t.kind}:${t.id}`).join(', '));\n      // Add tracking when tracks end\n      stream.getTracks().forEach(track => {\n        track.addEventListener('ended', () => {\n          console.log(\"ðŸ›‘ Track ENDED:\", track.kind, track.id);\n        });\n      });\n      return stream;\n    });\n  };\n}\n\n//______________________________________________________________________________________________________________________\n\n\n\n// EventEmitter is now imported above\n\nclass BaseMQTTRTCClient extends EventEmitter {\n  constructor(userConfig){\n    super(); // Initialize EventEmitter\n    userConfig = userConfig || {};\n    \n    // Use RTCConfig system (always available now)\n    const config = userConfig instanceof RTCConfig ? userConfig : new RTCConfig(userConfig);\n    const configObj = config.getConfig();\n    \n    // Initialize storage adapter\n    const storage = userConfig.storage || new LocalStorageAdapter();\n    \n    // Initialize tab manager\n    let tabManager = null;\n    if (configObj.tabs.enabled) {\n      tabManager = new TabManager(storage, configObj);\n    }\n    \n    // Initialize MQTT loader\n    const mqttLoader = new MQTTLoader(configObj);\n    \n    // Set properties from config\n    const tabIDValue = tabManager ? tabManager.getTabID() : null;\n    this.name = configObj.name + (tabIDValue ? ('(' + tabIDValue + ')') : '');\n    this.userInfo = configObj.userInfo || {};\n    this.mqttBroker = configObj.mqtt.broker;\n    this.iceServers = configObj.webrtc.iceServers;\n    this.baseTopic = configObj.topic.base;\n    this.topic = config.topic;\n    this.config = config;\n    this.storage = storage;\n    this.tabManager = tabManager;\n    this.mqttLoader = mqttLoader;\n    this.maxHistoryLength = configObj.history.maxLength;\n    \n    // Save name to storage if not anonymous\n    if (!configObj.name.startsWith(\"anon\") && !configObj.name.startsWith(\"User #\")) {\n      storage.setItem(\"name\", configObj.name);\n      storage.setItem(\"rtchat_name\", configObj.name);\n    }\n    \n    // Load flag\n    const load = userConfig.load !== false;\n\n    // bind methods to this\n    // MQTT methods\n    this.load = this.load.bind(this);\n    this._onMQTTConnect = this._onMQTTConnect.bind(this);\n    this.onConnectedToMQTT = this.onConnectedToMQTT.bind(this);\n    this._onMQTTMessage = this._onMQTTMessage.bind(this);\n    this.onMQTTMessage = this.onMQTTMessage.bind(this);\n    this.beforeunload = this.beforeunload.bind(this);\n    this.postPubliclyToMQTTServer = this.postPubliclyToMQTTServer.bind(this);\n    for (let [k, v] of Object.entries(this.mqttHandlers)){\n        this.mqttHandlers[k] = v.bind(this);\n    }\n    this.changeName = this.changeName.bind(this);\n    this.recordNameChange = this.recordNameChange.bind(this);\n    this.onNameChange = this.onNameChange.bind(this);\n\n\n    // RTC connection methods\n    this.shouldConnectToUser = this.shouldConnectToUser.bind(this);\n    this.connectToUser = this.connectToUser.bind(this);\n    this.connectionToUser = this.connectionToUser.bind(this);\n    this.connectionsToUsers = this.connectionsToUsers.bind(this);\n    this.disconnectFromUser = this.disconnectFromUser.bind(this);\n    this.onConnectedToUser = this.onConnectedToUser.bind(this);\n    this.onDisconnectedFromUser = this.onDisconnectedFromUser.bind(this);\n    this.onrtcdisconnectedFromUser = this.onrtcdisconnectedFromUser.bind(this);\n\n    // RTC send/receive methods\n    this.callUser = this.callUser.bind(this);\n    this.callFromUser = this.callFromUser.bind(this);\n    this.acceptCallFromUser = this.acceptCallFromUser.bind(this);\n    this.oncallconnected = this.oncallconnected.bind(this);\n    this.isConnectedToUser = this.isConnectedToUser.bind(this);\n\n    this.sendOverRTC = this.sendOverRTC.bind(this);\n    this.onrtcmessage = this.onrtcmessage.bind(this);\n    this.onrtcerror = this.onrtcerror.bind(this);\n\n    // initialize state tracking variables\n    this.rtcConnections = {};\n    this.knownUsers = {};\n    this.pendingIceCandidates = {};\n    this.maxConnectRetries = configObj.webrtc?.maxConnectRetries || 3;\n    this.connectRetryDelay = configObj.webrtc?.connectRetryDelay || 4000;\n    this.waitForAnswerTimeout = configObj.webrtc?.waitForAnswerTimeout || 12000;\n    this.connectingUsers = new Set();\n    this.attemptedPeers = new Set();\n    this.waitingForPeerInitiation = new Map(); // Track peers we're waiting to initiate (peerName -> timeoutId)\n    this.sharedLocalStream = null; // Shared media stream for all connections (one-to-many)\n    this.maxConnectRetries = configObj.webrtc?.maxConnectRetries || 3;\n    this.connectRetryDelay = configObj.webrtc?.connectRetryDelay || 4000;\n\n\n    this.mqttHistory = [];\n    this.announceInterval = null; // For periodic announcements\n\n    // load the MQTT client\n    if (load){\n        this.load();\n    }\n    \n    // Optional window.rtc assignment (can be disabled via config)\n    const assignToWindow = userConfig.assignToWindow !== false;\n    \n    if (assignToWindow && typeof window !== 'undefined') {\n      if (window.rtc){\n        let old = window.rtc;\n        console.warn(\"RTC already exists. Saving old RTC object to window.rtc.old,\", old);\n        let oldName = old.name;\n        window.rtc = {\n            oldName: old,\n            name: this\n        }\n      }else{\n        window.rtc = this;\n      }\n    }\n  }\n  //________________________________________________________ MQTT BASICS _______________________________________________\n  async load(){\n    // Use MQTTLoader (always available now)\n    await this.mqttLoader.load();\n    const mqtt = this.mqttLoader.getMQTT();\n    if (!mqtt) {\n      throw new Error('MQTT library not available');\n    }\n    \n    const configObj = this.config.getConfig();\n    const clientId = configObj.mqtt?.clientId || (this.baseTopic + this.name);\n    const mqttOptions = {\n      clientId: clientId,\n      username: configObj.mqtt.username,\n      password: configObj.mqtt.password,\n      reconnectPeriod: configObj.mqtt.reconnectPeriod,\n      connectTimeout: configObj.mqtt.connectTimeout\n    };\n    \n    this.client = mqtt.connect(this.mqttBroker, mqttOptions);\n    this.client.on('connect', this._onMQTTConnect.bind(this));\n    this.client.on('message', this._onMQTTMessage.bind(this));\n    \n    if (typeof window !== 'undefined') {\n      window.addEventListener(\"beforeunload\", this.beforeunload.bind(this));\n    }\n  }\n  _onMQTTConnect(){\n    console.log(`MQTT transport connected, subscribing to ${this.topic} as ${this.name}`);\n    this.client.subscribe(this.topic, ((err)=>{\n    if (!err) {\n        console.log(\"subscribed to \", this.topic);\n        // Send initial connect message immediately after subscription is confirmed\n        // This ensures we announce our presence as soon as we're ready to receive messages\n        console.log(`MQTT subscribed to ${this.topic}, listening for presence as ${this.name}`);\n        setTimeout(() => {\n          console.log(`MQTT connect: announcing presence as ${this.name} in ${this.topic}`);\n          this.postPubliclyToMQTTServer(\"connect\", this.userInfo);\n          this.onConnectedToMQTT();\n        }, 500);\n        \n        // Also set up periodic announcements to catch any missed connections\n        // This handles race conditions when two users connect simultaneously\n        // Announce every 3 seconds for the first 15 seconds, then every 30 seconds\n        // Only announce if we don't have active connections (to reduce noise)\n        let announcementCount = 0;\n        this.announceInterval = setInterval(() => {\n          // Only send periodic announcements if we have no active connections\n          // This reduces unnecessary connect messages when already connected\n          const hasActiveConnections = Object.keys(this.rtcConnections).some(user => {\n            const conn = this.rtcConnections[user];\n            return conn && conn.peerConnection && \n                   (conn.peerConnection.connectionState === \"connected\" || \n                    conn.peerConnection.connectionState === \"completed\");\n          });\n          \n          // Only announce if no active connections (removed the \"announcementCount < 5\" condition)\n          if (!hasActiveConnections) {\n            this.postPubliclyToMQTTServer(\"connect\", this.userInfo);\n          }\n          \n          announcementCount++;\n          // After 5 announcements (15 seconds), switch to less frequent announcements\n          if (announcementCount >= 5 && this.announceInterval) {\n            clearInterval(this.announceInterval);\n            // Switch to less frequent announcements (every 30 seconds, only if no connections)\n            this.announceInterval = setInterval(() => {\n              const hasActiveConnections = Object.keys(this.rtcConnections).some(user => {\n                const conn = this.rtcConnections[user];\n                return conn && conn.peerConnection && \n                       (conn.peerConnection.connectionState === \"connected\" || \n                        conn.peerConnection.connectionState === \"completed\");\n              });\n              if (!hasActiveConnections) {\n                this.postPubliclyToMQTTServer(\"connect\", this.userInfo);\n              }\n            }, 30000);\n          }\n        }, 3000);\n    }else {\n        console.error(\"Error subscribing to \" + this.topic, err);\n    }\n    }).bind(this));\n\n\n  }\n    onConnectedToMQTT(){\n        console.log(\"Connected to MQTT: \" + this.topic + \" as \" + this.name);\n        this.emit('mqttconnected', this.topic, this.name);\n    }\n  _onMQTTMessage(t, payloadString){\n        if (t === this.topic){\n            let payload;\n            try{\n                // Use MQTTLoader for decompression\n                const decompressed = this.mqttLoader.decompress(payloadString);\n                payload = typeof decompressed === 'string' ? JSON.parse(decompressed) : decompressed;\n            }catch(e){\n                // Fallback to uncompressed if decompression fails\n                payload = JSON.parse(payloadString);\n            }\n            if (payload.sender === this.name){\n                return;\n            }\n            let subtopic = payload.subtopic;\n            payload.sent = false;\n            payload.receiveTimestamp = Date.now();\n            this.mqttHistory.push(payload);\n            while (this.mqttHistory.length > this.maxHistoryLength){\n                this.mqttHistory.shift();\n            }\n            // Log removed to reduce console noise\n            if (this.mqttHandlers[subtopic]){\n                this.mqttHandlers[subtopic](payload);\n            }else{\n                this.onMQTTMessage(subtopic, payload.data, payload.sender, payload.timestamp);\n                console.warn(\"Unhandled message: \" + subtopic, payload);\n            }\n        }\n    }\n  onMQTTMessage(subtopic, data, sender, timestamp){\n    console.log(\"Received message from \" + sender + \" on \" + subtopic, data);\n    this.emit('mqttmessage', subtopic, data, sender, timestamp);\n  }\n  beforeunload(){\n    this.postPubliclyToMQTTServer(\"unload\", \"disconnecting\");\n    \n    // Cleanup tab manager if using new system\n    if (this.tabManager) {\n      this.tabManager.cleanup();\n    }\n  }\n  \n  disconnect(){\n    // Cleanup connections\n    for (let user of Object.keys(this.rtcConnections)) {\n      this.disconnectFromUser(user);\n    }\n    \n    // Stop periodic announcements\n    if (this.announceInterval) {\n      clearInterval(this.announceInterval);\n      this.announceInterval = null;\n    }\n    if (this.connectionMaintenanceInterval) {\n      clearInterval(this.connectionMaintenanceInterval);\n      this.connectionMaintenanceInterval = null;\n    }\n    \n    // Cleanup MQTT client\n    if (this.client) {\n      this.client.end();\n      this.client = null;\n    }\n    \n    // Cleanup tab manager\n    if (this.tabManager) {\n      this.tabManager.cleanup();\n    }\n  }\n  postPubliclyToMQTTServer(subtopic, data){\n    let payload = {\n        sender: this.name,\n        timestamp: Date.now(),\n        subtopic: subtopic,\n        data: data\n    }\n    let payloadString = JSON.stringify(payload);\n    let originalLength = payloadString.length;\n    \n    // Use MQTTLoader's compression if available\n    if (this.mqttLoader) {\n      const compressed = this.mqttLoader.compress(payloadString);\n      if (compressed !== payloadString) {\n        payloadString = compressed;\n      }\n    }\n    \n    // Reduce logging for frequent messages like ICE candidates\n    if (subtopic === \"RTCIceCandidate\") {\n      // Only log null candidates (end of ICE gathering) or log at debug level\n      if (!data || data === null) {\n        console.log(\"Sending message to \" + this.topic + \" subtopic \" + subtopic + \" (end of ICE gathering)\");\n      }\n      // Otherwise, ICE candidates are sent too frequently to log each one\n    } else {\n      console.log(\"Sending message to \" + this.topic + \" subtopic \" + subtopic, data);\n    }\n    this.client.publish(this.topic, payloadString);\n    payload.sent = true;\n    this.mqttHistory.push(payload);\n    while (this.mqttHistory.length > this.maxHistoryLength){\n        this.mqttHistory.shift();\n    }\n  }\n\n  //____________________________________________________________________________________________________________________\n  mqttHandlers = {\n    connect: payload => {//connection\n        // Log removed to reduce console noise\n        \n        console.log(`MQTT connect message received from ${payload.sender}, initiating WebRTC signaling flow`);\n        // Check if we're already connected and the connection is healthy\n        const existingConnection = this.rtcConnections[payload.sender];\n        if (existingConnection) {\n            const connectionState = existingConnection.peerConnection.connectionState;\n            const iceConnectionState = existingConnection.peerConnection.iceConnectionState;\n            \n            // If connection is healthy, ignore this connect message (likely a periodic announcement)\n            if (connectionState === \"connected\" && \n                (iceConnectionState === \"connected\" || iceConnectionState === \"completed\")) {\n                // Log removed to reduce console noise\n                this.knownUsers[payload.sender] = payload.data; // Update user info\n                return;\n            }\n            \n            const weShouldInitiate = this._shouldInitiateConnection(payload.sender);\n            // Connection exists but is broken, disconnect it\n            if (weShouldInitiate && (connectionState === \"failed\" || connectionState === \"closed\" ||\n                iceConnectionState === \"failed\" || iceConnectionState === \"closed\")) {\n                console.warn(\"Connection to \" + payload.sender + \" is broken, disconnecting\");\n                this.disconnectFromUser(payload.sender);\n            } else if (connectionState === \"new\") {\n                // Connection is in \"new\" state - check if it's been stuck for too long\n                // If it's been more than 10 seconds, allow a retry\n                const connectionAge = Date.now() - (existingConnection.createdAt || 0);\n                if (weShouldInitiate && connectionAge > 10000) {\n                    console.warn(\"Connection to \" + payload.sender + \" stuck in 'new' state for \" + connectionAge + \"ms, allowing retry\");\n                    this.disconnectFromUser(payload.sender);\n                    // Fall through to create new connection\n                } else {\n                    // Connection is new but not stuck yet, don't interfere\n                    this.knownUsers[payload.sender] = payload.data; // Update user info\n                    return;\n                }\n            } else if (connectionState === \"connecting\") {\n                // Connection is actively connecting, don't interfere\n                this.knownUsers[payload.sender] = payload.data; // Update user info\n                return;\n            } else {\n                // Other states (checking, etc.), allow retry if stuck\n                const connectionAge = Date.now() - (existingConnection.createdAt || 0);\n                if (weShouldInitiate && connectionAge > 15000) {\n                    console.warn(\"Connection to \" + payload.sender + \" stuck in '\" + connectionState + \"' state for \" + connectionAge + \"ms, allowing retry\");\n                    this.disconnectFromUser(payload.sender);\n                    // Fall through to create new connection\n                } else {\n                    // Connection is progressing, don't interfere\n                    this.knownUsers[payload.sender] = payload.data; // Update user info\n                    return;\n                }\n            }\n        }\n        \n        this.knownUsers[payload.sender] = payload.data;\n        this.shouldConnectToUser(payload.sender, payload.data).then(shouldConnect => {\n            if (!shouldConnect){\n                return;\n            }\n            if (!this._shouldInitiateConnection(payload.sender)) {\n                console.log(\"connect: Waiting for peer \" + payload.sender + \" to initiate connection\");\n                \n                // Set up a fallback timeout: if peer doesn't initiate within waitForAnswerTimeout,\n                // we'll initiate anyway to prevent hanging\n                if (!this.waitingForPeerInitiation.has(payload.sender) && \n                    !this.connectionToUser(payload.sender) && \n                    !this.attemptedPeers.has(payload.sender)) {\n                    \n                    const fallbackTimeout = setTimeout(() => {\n                        console.warn(\"connect: Peer \" + payload.sender + \" did not initiate connection within timeout. Initiating fallback connection.\");\n                        this.waitingForPeerInitiation.delete(payload.sender);\n                        \n                        // Double-check we're still not connected before initiating\n                        if (!this.connectionToUser(payload.sender) && !this.attemptedPeers.has(payload.sender)) {\n                            this.attemptedPeers.add(payload.sender);\n                            setTimeout(() => this.attemptedPeers.delete(payload.sender), this.waitForAnswerTimeout);\n                            this.connectToUser(payload.sender);\n                        }\n                    }, this.waitForAnswerTimeout);\n                    \n                    this.waitingForPeerInitiation.set(payload.sender, fallbackTimeout);\n                }\n                return;\n            }\n            \n            // We should initiate - clear any waiting timeout\n            const waitingTimeout = this.waitingForPeerInitiation.get(payload.sender);\n            if (waitingTimeout) {\n                clearTimeout(waitingTimeout);\n                this.waitingForPeerInitiation.delete(payload.sender);\n            }\n            \n            if (this.connectionToUser(payload.sender)) {\n                console.log(\"connect: Already connected or connecting to \" + payload.sender);\n                return;\n            }\n            if (this.attemptedPeers.has(payload.sender)) {\n                console.log(\"connect: Already attempted connection to \" + payload.sender);\n                return;\n            }\n            this.attemptedPeers.add(payload.sender);\n            setTimeout(() => this.attemptedPeers.delete(payload.sender), this.waitForAnswerTimeout);\n            this.connectToUser(payload.sender);\n        })\n    },\n    nameChange: payload => {//name\n        this.recordNameChange(payload.data.oldName, payload.data.newName);\n    },\n    unload: payload => {\n        this.disconnectFromUser(payload.sender);\n        delete this.knownUsers[payload.sender];\n    },\n    RTCOffer: payload => {//rtc offer\n        this.shouldConnectToUser(payload.sender, payload.data.userInfo).then(r => {\n            if (r){\n                if (payload.data.offer.target != this.name){return};\n                \n                // Clear waiting timeout since peer is initiating connection\n                const waitingTimeout = this.waitingForPeerInitiation.get(payload.sender);\n                if (waitingTimeout) {\n                    clearTimeout(waitingTimeout);\n                    this.waitingForPeerInitiation.delete(payload.sender);\n                    console.log(\"RTCOffer: Cleared waiting timeout for \" + payload.sender);\n                }\n                \n                if (this.rtcConnections[payload.sender]){\n                    console.warn(\"Already have a connection to \" + payload.sender + \". Closing and reopening.\")\n                    this.rtcConnections[payload.sender].close();\n                }\n                this.rtcConnections[payload.sender] = new RTCConnection(this, payload.sender);\n                this.rtcConnections[payload.sender].respondToOffer(payload.data.offer.localDescription);\n                let pendingIceCandidate = this.pendingIceCandidates[payload.sender];\n                if (pendingIceCandidate){\n                    console.log(\"Found pending ice candidate for \" + payload.sender);\n                    this.rtcConnections[payload.sender].onReceivedIceCandidate(pendingIceCandidate);\n                    delete this.pendingIceCandidates[payload.sender];\n                }\n            }else{\n                console.warn(\"Not connecting to \" + payload.sender);\n                // TODO: actually reject offer\n            }\n        });\n\n    },\n\n    RTCIceCandidate: payload => {//rtc ice candidate\n        if (payload.data){\n            let rtcConnection = this.rtcConnections[payload.sender]; // Using the correct connection\n            if (!rtcConnection){\n    //            console.error(\"No connection found for \" + payload.sender);\n                this.pendingIceCandidates[payload.sender] = payload.data;\n    //            rtcConnection = new RTCConnection(this, payload.sender);\n    //            this.rtcConnections[payload.sender] = rtcConnection\n            }else{\n                rtcConnection.onReceivedIceCandidate(payload.data);\n            }\n        }\n    },\n    RTCAnswer: payload => {//rtc answer\n        if (payload.data.target != this.name){return};\n        let rtcConnection = this.rtcConnections[payload.sender]; // Using the correct connection\n        if (!rtcConnection){\n            console.error(\"No connection found for \" + payload.sender);\n            return\n        }\n        rtcConnection.receiveAnswer(payload.data.localDescription);\n    }\n  }\n  shouldConnectToUser(user, userInfo){\n    return Promise.resolve(true);\n  }\n\n  callUser(user, callInfo){\n    let callStartPromise;\n    if (callInfo instanceof MediaStream){\n        let localStream = callInfo;\n        // Store as shared stream if we don't have one\n        if (!this.sharedLocalStream) {\n          console.log(\"MQTTRTCClient.callUser: Storing provided stream as sharedLocalStream\");\n          this.sharedLocalStream = localStream;\n        }\n        console.log(\"MQTTRTCClient.callUser: Using provided MediaStream\");\n        // startCall returns a promise that resolves to {localStream, remoteStream}\n        callStartPromise = this.rtcConnections[user].startCall(localStream);\n    }else{\n        callInfo = callInfo || {video: true, audio: true}\n        \n        // CRITICAL: If a stream is being created (pending promise exists), wait for it\n        if (this.sharedLocalStreamPromise) {\n          console.log(\"MQTTRTCClient.callUser: â³ Waiting for pending shared stream creation\");\n          callStartPromise = this.sharedLocalStreamPromise.then(sharedStream => {\n            console.log(\"MQTTRTCClient.callUser: â™»ï¸ Using stream from pending promise (tracks:\", sharedStream.getTracks().map(t => `${t.kind}:${t.id.substring(0,8)}`).join(', '), \")\");\n            return this.rtcConnections[user].startCall(sharedStream);\n          });\n        }\n        // Reuse shared stream if it exists and matches callInfo\n        else if (this.sharedLocalStream) {\n          const hasVideo = this.sharedLocalStream.getVideoTracks().length > 0;\n          const hasAudio = this.sharedLocalStream.getAudioTracks().length > 0;\n          const matches = (callInfo.video === hasVideo || !callInfo.video) && \n                         (callInfo.audio === hasAudio || !callInfo.audio);\n          if (matches) {\n            console.log(\"MQTTRTCClient.callUser: â™»ï¸ Reusing shared local stream (tracks:\", this.sharedLocalStream.getTracks().map(t => `${t.kind}:${t.id.substring(0,8)}`).join(', '), \")\");\n            callStartPromise = this.rtcConnections[user].startCall(this.sharedLocalStream);\n          } else {\n            console.log(\"MQTTRTCClient.callUser: âš ï¸ Shared stream doesn't match callInfo, creating new stream\");\n            this.sharedLocalStreamPromise = navigator.mediaDevices.getUserMedia(callInfo).then(localStream => {\n              console.log(\"MQTTRTCClient.callUser: ðŸ†• Created new stream (tracks:\", localStream.getTracks().map(t => `${t.kind}:${t.id.substring(0,8)}`).join(', '), \")\");\n              this.sharedLocalStream = localStream;\n              this.sharedLocalStreamPromise = null; // Clear promise after resolution\n              return localStream;\n            });\n            callStartPromise = this.sharedLocalStreamPromise.then(stream => {\n              return this.rtcConnections[user].startCall(stream);\n            });\n          }\n        } else {\n          console.log(\"MQTTRTCClient.callUser: ðŸ†• Creating first shared local stream\");\n          // Create promise and store it IMMEDIATELY to prevent race condition\n          this.sharedLocalStreamPromise = navigator.mediaDevices.getUserMedia(callInfo).then(localStream => {\n            console.log(\"MQTTRTCClient.callUser: ðŸ†• Created first stream (tracks:\", localStream.getTracks().map(t => `${t.kind}:${t.id.substring(0,8)}`).join(', '), \")\");\n            this.sharedLocalStream = localStream;\n            this.sharedLocalStreamPromise = null; // Clear promise after resolution\n            return localStream;\n          });\n          callStartPromise = this.sharedLocalStreamPromise.then(stream => {\n            return this.rtcConnections[user].startCall(stream);\n          });\n        }\n    }\n    let callEndPromise = this.rtcConnections[user].callEndPromise.promise;\n    return {start: callStartPromise, end: callEndPromise};\n  }\n  endCallWithUser(user){\n    console.log(\"MQTTRTCClient.endCallWithUser: Ending call with \" + user);\n    console.log(\"MQTTRTCClient.endCallWithUser: Available connections:\", Object.keys(this.rtcConnections));\n    if (this.rtcConnections[user]){\n        try {\n            console.log(\"MQTTRTCClient.endCallWithUser: Calling endCall on RTCConnection for \" + user);\n            this.rtcConnections[user].endCall();\n            console.log(\"MQTTRTCClient.endCallWithUser: Sent endcall message to \" + user + \" via RTC data channel\");\n        } catch (err) {\n            console.warn(\"MQTTRTCClient.endCallWithUser: Failed to send endcall via RTC channel, trying MQTT fallback:\", err);\n            // Fallback: send via MQTT if RTC channel fails\n            try {\n                this.sendOverRTC(\"endcall\", null, user);\n                console.log(\"MQTTRTCClient.endCallWithUser: Sent endcall message to \" + user + \" via MQTT fallback\");\n            } catch (mqttErr) {\n                console.error(\"MQTTRTCClient.endCallWithUser: Failed to send endcall message to \" + user + \" via both RTC and MQTT:\", mqttErr);\n            }\n        }\n    } else {\n        console.warn(\"MQTTRTCClient.endCallWithUser: No RTC connection found for \" + user + \", cannot send endcall message\");\n    }\n  }\n  callFromUser(user, callInfo, initiatedCall, promises){\n    callInfo = callInfo || {video: true, audio: true}\n    if (initiatedCall){\n        // CRITICAL: If a stream is being created (pending promise exists), wait for it\n        if (this.sharedLocalStreamPromise) {\n          console.log(\"MQTTRTCClient.callFromUser: â³ Waiting for pending shared stream creation\");\n          return this.sharedLocalStreamPromise;\n        }\n        // Reuse shared stream if it exists\n        if (this.sharedLocalStream) {\n          const hasVideo = this.sharedLocalStream.getVideoTracks().length > 0;\n          const hasAudio = this.sharedLocalStream.getAudioTracks().length > 0;\n          const matches = (callInfo.video === hasVideo || !callInfo.video) && \n                         (callInfo.audio === hasAudio || !callInfo.audio);\n          if (matches) {\n            console.log(\"MQTTRTCClient.callFromUser: â™»ï¸ Reusing shared local stream (tracks:\", this.sharedLocalStream.getTracks().map(t => `${t.kind}:${t.id.substring(0,8)}`).join(', '), \")\");\n            return Promise.resolve(this.sharedLocalStream);\n          }\n        }\n        console.log(\"MQTTRTCClient.callFromUser: ðŸ†• Creating new shared local stream\");\n        this.sharedLocalStreamPromise = navigator.mediaDevices.getUserMedia(callInfo).then(stream => {\n          console.log(\"MQTTRTCClient.callFromUser: ðŸ†• Created stream (tracks:\", stream.getTracks().map(t => `${t.kind}:${t.id.substring(0,8)}`).join(', '), \")\");\n          this.sharedLocalStream = stream;\n          this.sharedLocalStreamPromise = null; // Clear promise after resolution\n          return stream;\n        });\n        return this.sharedLocalStreamPromise;\n    }else{\n        return this.acceptCallFromUser(user, callInfo, promises).then(r=> {\n            if (r === false || r === null || r === undefined){\n                return Promise.reject(\"Call rejected\");\n            }\n            // If acceptCallFromUser returns modified callInfo (object), use it\n            // Otherwise use the original callInfo\n            const mediaCallInfo = (typeof r === 'object' && r !== null && (r.video !== undefined || r.audio !== undefined)) \n                ? r \n                : callInfo;\n            // CRITICAL: If a stream is being created (pending promise exists), wait for it\n            if (this.sharedLocalStreamPromise) {\n              console.log(\"MQTTRTCClient.callFromUser: â³ Waiting for pending shared stream creation (incoming)\");\n              return this.sharedLocalStreamPromise;\n            }\n            // Reuse shared stream if it exists\n            if (this.sharedLocalStream) {\n              const hasVideo = this.sharedLocalStream.getVideoTracks().length > 0;\n              const hasAudio = this.sharedLocalStream.getAudioTracks().length > 0;\n              const matches = (mediaCallInfo.video === hasVideo || !mediaCallInfo.video) && \n                             (mediaCallInfo.audio === hasAudio || !mediaCallInfo.audio);\n              if (matches) {\n                console.log(\"MQTTRTCClient.callFromUser: â™»ï¸ Reusing shared local stream (incoming) (tracks:\", this.sharedLocalStream.getTracks().map(t => `${t.kind}:${t.id.substring(0,8)}`).join(', '), \")\");\n                return Promise.resolve(this.sharedLocalStream);\n              }\n            }\n            console.log(\"MQTTRTCClient.callFromUser: ðŸ†• Creating new shared local stream (incoming)\");\n            this.sharedLocalStreamPromise = navigator.mediaDevices.getUserMedia(mediaCallInfo).then(stream => {\n              console.log(\"MQTTRTCClient.callFromUser: ðŸ†• Created stream (incoming) (tracks:\", stream.getTracks().map(t => `${t.kind}:${t.id.substring(0,8)}`).join(', '), \")\");\n              this.sharedLocalStream = stream;\n              this.sharedLocalStreamPromise = null; // Clear promise after resolution\n              return stream;\n            });\n            return this.sharedLocalStreamPromise;\n        })\n    }\n  }\n  oncallended(user){\n    console.log(\"BaseMQTTRTCClient.oncallended: Call ended with \" + user);\n    // Emit the callended event so UI components can react\n    this.emit('callended', user);\n    console.log(\"BaseMQTTRTCClient.oncallended: Emitted 'callended' event for \" + user);\n  }\n  acceptCallFromUser(user, callInfo, promises){\n     return Promise.resolve(true);\n  }\n  connectToUser(user){\n    if (!user || user === this.name){\n        return null;\n    }\n    const establishedConnection = this.connectionToUser(user);\n    if (establishedConnection){\n        console.log(\"connectToUser: Already connected or connecting to \" + user);\n        return establishedConnection;\n    }\n    if (this.rtcConnections[user]){\n        console.log(\"connectToUser: Connection to \" + user + \" is still negotiating\");\n        return this.rtcConnections[user];\n    }\n    console.log(`connectToUser: Starting WebRTC offer to ${user}`);\n    const rtcConnection = new RTCConnection(this, user);\n    this.rtcConnections[user] = rtcConnection;\n    rtcConnection.sendOffer();\n    return rtcConnection;\n  }\n  _shouldInitiateConnection(peerName){\n    if (!peerName){\n        return false;\n    }\n    // Deterministic tie-breaker: lexicographically smaller name initiates\n    // If names are identical (shouldn't happen), fall back to comparing lengths\n    if (this.name === peerName){\n        return this.name.length <= peerName.length;\n    }\n    return this.name.localeCompare(peerName) < 0;\n  }\n  connectionToUser(user){\n    let existingConnection = this.rtcConnections[user];\n    if (existingConnection && existingConnection.peerConnection.connectionState === \"connected\"){\n        return existingConnection\n    }else if (existingConnection){\n        console.warn(\"Already have a connection to \" + user + \" but it's not connected.\", existingConnection.peerConnection.connectionState);\n        if (existingConnection.peerConnection.connectionState == \"failed\"){\n            console.warn(\"Connection failed. Closing and reopening.\");\n            this.disconnectFromUser(user);\n            return null;\n        }\n\n\n        return existingConnection;\n\n    }\n    return null;\n  }\n  connectionsToUsers(users){\n    users = users || Object.keys(this.rtcConnections);\n    if (typeof users === \"string\"){\n        users = [users];\n    }\n    return users.filter(c => this.connectionToUser(c));\n  }\n  get connectedUsers(){\n    return this.connectionsToUsers();\n  }\n  disconnectFromUser(user){\n    console.warn(\"Closing connection to \" + user);\n    let rtcConnection = this.rtcConnections[user]\n    if (rtcConnection){\n        rtcConnection.close();\n        delete this.rtcConnections[user];\n        console.warn(\"Closed connection to \" + user);\n    }else{\n        console.warn(\"No connection to close to \" + user);\n    }\n    this.connectingUsers.delete(user);\n    this.attemptedPeers.delete(user);\n    \n    // Clear any waiting timeout for this user\n    const waitingTimeout = this.waitingForPeerInitiation.get(user);\n    if (waitingTimeout) {\n        clearTimeout(waitingTimeout);\n        this.waitingForPeerInitiation.delete(user);\n    }\n  }\n  onConnectedToUser(user){\n    console.log(\"Connected to user \", user);\n    this.emit('connectedtopeer', user);\n  }\n  isConnectedToUser(user){\n    return this.rtcConnections[user] && this.rtcConnections[user].peerConnection.connectionState === \"connected\";\n  }\n  onrtcdisconnectedFromUser(user){\n    if (!this.rtcConnections[user]){\n        console.warn(\"Already disconnected from\" + user);\n        return;\n    }\n    console.log(\"Disconnected from user \", user);\n    delete this.rtcConnections[user];\n    this.onDisconnectedFromUser(user);\n  }\n  onDisconnectedFromUser(user){\n    console.log(\"Disconnected from user \", user);\n    this.emit('disconnectedfrompeer', user);\n    this.connectingUsers.delete(user);\n    this.attemptedPeers.delete(user);\n  }\n\n  changeName(newName){\n    let oldName = this.name;\n    const tabID = this.tabManager ? this.tabManager.getTabID() : null;\n    this.name = newName + (tabID ? ('(' + tabID + ')') : '');\n    \n    // Use storage adapter if available, otherwise use localStorage\n    if (this.storage) {\n      this.storage.setItem(\"name\", newName);\n      this.storage.setItem(\"rtchat_name\", newName);\n    } else if (typeof localStorage !== 'undefined') {\n      localStorage.setItem(\"name\", newName);\n    }\n    \n    this.postPubliclyToMQTTServer(\"nameChange\", {oldName: oldName, newName: this.name});\n  }\n  recordNameChange(oldName, newName){\n    this.knownUsers[newName] = this.knownUsers[oldName];\n    delete this.knownUsers[oldName];\n    this.rtcConnections[newName] = this.rtcConnections[oldName];\n    delete this.rtcConnections[oldName];\n    this.onNameChange(oldName, newName);\n  }\n    onNameChange(oldName, newName){\n        console.log(oldName + \" changed name to \" + newName);\n    }\n  //____________________________________________________________________________________________________________________\n  sendOverRTC(channel, data, users){\n    if (!channel){ throw new Error(\"No channel specified\") }\n    if (!this.rtcHandlers[channel]){throw new Error(\"Unsupported RTC channel: \" + channel)}\n    let handler = this.rtcHandlers[channel];\n    data = data || channel;\n    let serializedData = data\n    if (handler && !handler.raw){\n        serializedData = (handler.serializer || JSON.stringify)(data);\n    }\n    for (let user of this.connectionsToUsers(users)){\n        if (!this.verifyUser(channel, data, user)){\n            console.warn(\"Not connected to \" + user);\n            continue;\n        }else{\n            const sendResult = this.rtcConnections[user].send(channel, serializedData);\n            // If send returns a promise (channel not ready), handle it\n            if (sendResult && typeof sendResult.then === 'function') {\n                sendResult.catch(err => {\n                    console.error(`Failed to send on channel ${channel} to ${user}:`, err);\n                });\n            }\n        }\n    }\n  }\n  verifyUser(channel, data, user){\n    return true;\n  }\n\n  //____________________________________________________________________________________________________________________\n  rtcHandlers = {\n    connectedViaRTC: (data, sender) => { this.onConnectedToUser(sender) },\n  }\n\n  onrtcmessage(channel, data, sender){\n    let handler = this.rtcHandlers[channel];\n    let deserializedData = data;\n    if (handler && !handler.raw){\n        deserializedData = (handler.deserializer || JSON.parse)(data);\n    }\n    if (handler){\n        handler(deserializedData, sender);\n    }else{\n        console.warn(\"No handler found for \" + channel);\n    }\n    // Emit generic RTC message event\n    this.emit('rtcmessage', channel, deserializedData, sender);\n  }\n  onrtcerror(channel, error, sender){\n    let handler = this.rtcHandlers[channel];\n    if (handler && handler.error){\n        handler.error(error, sender);\n    }\n  }\n}\n\n\nclass RTCConnection {\n    constructor(mqttClient, target){\n        // Use iceServers array if available, otherwise fall back to stunServer\n        const iceServers = mqttClient.iceServers || \n          (mqttClient.stunServer ? [{ urls: mqttClient.stunServer }] : \n           [{ urls: \"stun:stun4.l.google.com:19302\" }]);\n        \n        this.rtcConfiguration = { \n          iceServers: iceServers,\n          iceTransportPolicy: mqttClient.config?.getConfig()?.webrtc?.iceTransportPolicy || 'all',\n          bundlePolicy: mqttClient.config?.getConfig()?.webrtc?.bundlePolicy || 'balanced',\n          rtcpMuxPolicy: mqttClient.config?.getConfig()?.webrtc?.rtcpMuxPolicy || 'require'\n        };\n        this.target = target;\n        this.mqttClient = mqttClient;\n        this.dataChannels = {};\n        this.createdAt = Date.now(); // Track when connection was created\n        this.pendingIceCandidates = []; // Store pending ICE candidates for this connection\n        this.peerConnection = new RTCPeerConnection(this.rtcConfiguration);\n        this.peerConnection.onicecandidate = this.onicecandidate.bind(this);\n\n        this.startCall = this.startCall.bind(this);\n        this.onTrack = this.onTrack.bind(this);\n        this.sentOffer = false;\n\n        this.streamChannels = [\"streamice\", \"streamoffer\", \"streamanswer\", \"endcall\"];\n\n        this.dataChannelDeferredPromises = Object.fromEntries(Object.entries(mqttClient.rtcHandlers).map(([name, handler]) => [name, new DeferredPromise()]));\n        this.streamChannels.forEach(channel => this.dataChannelDeferredPromises[channel] = new DeferredPromise());\n\n        this.loadPromise = Promise.all(Object.values(this.dataChannelDeferredPromises).map((deferredPromise) => deferredPromise.promise));\n        this.loaded = false;\n        this.loadPromise.then((() => {this.loaded = true}).bind(this));\n\n        this.peerConnection.ondatachannel = ((event) => {\n            this.registerDataChannel(event.channel);\n        }).bind(this);\n        this.peerConnection.oniceconnectionstatechange = (function() {\n            if (this.peerConnection.iceConnectionState === 'disconnected' ||\n                this.peerConnection.iceConnectionState === 'failed' ||\n                this.peerConnection.iceConnectionState === 'closed') {\n                this.mqttClient.onDisconnectedFromUser(this.target);\n            }\n        }).bind(this);\n\n        this.pendingStreamIceCandidate = null;\n        this.pendingStreamIceCandidates = []; // Array to store multiple pending ICE candidates\n        this.streamConnection = null;\n        this.remoteStream = null;\n        this.localStream = null;\n        this.sendstreamice = false;\n        this.initiatedCall = false;\n        this.streamConnectionPromise = new DeferredPromise();\n        this.streamPromise = new DeferredPromise();\n        this.callEndPromise = new DeferredPromise();\n        this.callPromises = {start: this.streamPromise.promise, end: this.callEndPromise.promise};\n    }\n    registerDataChannel(dataChannel){\n        dataChannel.onmessage = ((e) => {\n            console.log(\"RTCConnection.registerDataChannel: Received message on channel '\" + dataChannel.label + \"' from \" + this.target, e.data);\n            this.onmessage(e, dataChannel.label);\n        }).bind(this);\n        dataChannel.onerror = ((e) => {\n            this.dataChannelDeferredPromises[dataChannel.label].reject(e);\n            this.ondatachannelerror(e, dataChannel.label);\n        }).bind(this);\n        dataChannel.onopen = ((e) => {\n            console.log(\"RTCConnection.registerDataChannel: Data channel '\" + dataChannel.label + \"' opened for \" + this.target);\n            this.dataChannelDeferredPromises[dataChannel.label].resolve(e);\n        }).bind(this);\n        this.dataChannels[dataChannel.label] = dataChannel;\n    }\n    setupDataChannels(){\n        for (let [name, dataChannelHandler] of Object.entries(this.mqttClient.rtcHandlers)){\n            let dataChannel = this.peerConnection.createDataChannel(name);\n            this.registerDataChannel(dataChannel);\n        }\n        this.streamChannels.forEach(channel => {\n            let dataChannel = this.peerConnection.createDataChannel(channel);\n            this.registerDataChannel(dataChannel);\n        });\n    }\n\n    startCall(stream){\n        this.initiatedCall = true;\n        if (this.streamConnection && this.streamConnection.signalingState !== \"closed\"){\n            console.warn(\"startCall: stream connection already active or negotiating; returning existing promise\");\n            return this.streamPromise.promise;\n        }\n        // Detect call type from stream tracks\n        const hasVideo = stream.getVideoTracks().length > 0;\n        const hasAudio = stream.getAudioTracks().length > 0;\n        let streamInfo = {video: hasVideo, audio: hasAudio};\n        this.streamConnection = this._makeStreamConnection(stream);\n\n        this.streamConnection.createOffer()\n            .then(offer => this.streamConnection.setLocalDescription(offer))\n            .then(() => {\n                // Send offer via MQTT\n                this.send(\"streamoffer\", JSON.stringify({\"offer\": this.streamConnection.localDescription, \"streamInfo\": streamInfo}));\n            });\n\n         this.callPromises = {start: this.streamPromise.promise, end: this.callEndPromise.promise};\n\n        return this.streamPromise.promise;\n    }\n    _makeStreamConnection(stream){\n        if (this.streamConnection){\n            console.warn(\"Already have a stream connection, reusing existing instance\");\n            return this.streamConnection;\n        }\n        this.localStream = stream\n        this.streamConnection = new RTCPeerConnection(this.rtcConfiguration);\n\n        stream.getTracks().forEach(track => this.streamConnection.addTrack(track, stream));\n\n        this.streamConnection.onicecandidate = this.onstreamicecandidate.bind(this);\n        this.streamConnection.ontrack = this.onTrack;\n        this.streamConnectionPromise.resolve(this.streamConnection);\n        this.callPromises = {start: this.streamPromise.promise, end: this.callEndPromise.promise};\n        return this.streamConnection;\n    }\n    onTrack(event){\n        console.warn(\"Track event\", event);\n        this.remoteStream = event.streams[0];\n        let d = {\n            localStream: this.localStream,\n            remoteStream: this.remoteStream\n        }\n        this.streamPromise.resolve(d);\n        this.mqttClient.oncallconnected(this.target, d);\n    }\n    sendOffer(){\n        if (!this.peerConnection){\n            console.error(\"sendOffer called but peerConnection missing\");\n            return;\n        }\n        if (this.peerConnection.signalingState !== \"stable\"){\n            console.warn(`sendOffer: signaling state is ${this.peerConnection.signalingState}, waiting for stable state before creating offer`);\n            return;\n        }\n        this.setupDataChannels();\n        this.peerConnection.createOffer()\n          .then(offer => this.peerConnection.setLocalDescription(offer))\n          .then(() => {\n            // Send offer via MQTT\n            console.log(\"Sending offer to \" + this.target);\n            this.mqttClient.postPubliclyToMQTTServer(\"RTCOffer\", {userInfo: this.mqttClient.userInfo, offer: {\"localDescription\": this.peerConnection.localDescription, \"target\": this.target}});\n          });\n        this.sentOffer = true;\n    }\n    respondToOffer(offer){\n        this.peerConnection.setRemoteDescription(new RTCSessionDescription(offer))\n              .then(() => this.peerConnection.createAnswer())\n              .then(answer => this.peerConnection.setLocalDescription(answer))\n              .then((answer) => {\n                // Send answer via MQTT\n                this.mqttClient.postPubliclyToMQTTServer(\"RTCAnswer\", {\n                    \"localDescription\": this.peerConnection.localDescription,\n                    \"target\": this.target,\n                });\n              });\n    }\n    receiveAnswer(answer){\n        if (this.peerConnection.signalingState !== 'have-local-offer') {\n            // This can happen if answer arrives after connection is established or out of order\n            // It's not necessarily an error, just means we can't process this answer\n            if (this.peerConnection.signalingState !== 'stable') {\n                // Only warn if it's an unexpected state (not just \"stable\" which is normal)\n                console.warn(\"Received answer in unexpected signaling state: \" + this.peerConnection.signalingState);\n            }\n            return;\n        }\n        this.peerConnection.setRemoteDescription(new RTCSessionDescription(answer))\n            .then(() => {\n                // Apply all pending ICE candidates now that remote description is set\n                if (this.pendingIceCandidates && this.pendingIceCandidates.length > 0) {\n                    console.log(`Applying ${this.pendingIceCandidates.length} pending ICE candidates for ${this.target}`);\n                    this.pendingIceCandidates.forEach(candidate => {\n                        this.peerConnection.addIceCandidate(new RTCIceCandidate(candidate))\n                            .catch(err => {\n                                console.warn('Error adding pending ICE candidate:', err);\n                            });\n                    });\n                    this.pendingIceCandidates = [];\n                }\n            })\n            .catch(err => {\n                console.error('Error setting remote description:', err);\n            });\n        // Wait for all data channels to be ready before notifying connection\n        this.loadPromise.then((() => {\n            this.send(\"connectedViaRTC\", null);\n            this.mqttClient.onConnectedToUser(this.target);\n        }).bind(this));\n    }\n    send(channel, serializedData){\n        let dataChannel = this.dataChannels[channel];\n        if (!dataChannel){\n            if (this.mqttClient.rtcHandlers[channel]){\n                console.warn(\"handler found for \", channel, \"but no data channel\");\n            }\n            throw new Error(\"No data channel for \" + channel);\n        }\n        \n        // If channel is not open, wait for it to open\n        if (dataChannel.readyState !== \"open\"){\n            if (dataChannel.readyState === \"closed\") {\n                throw new Error(\"Channel closed: \" + channel);\n            }\n            // Channel is connecting, wait for it to open\n            return new Promise((resolve, reject) => {\n                const timeout = setTimeout(() => {\n                    reject(new Error(`Channel ${channel} did not open within 10 seconds`));\n                }, 10000);\n                \n                const onOpen = () => {\n                    clearTimeout(timeout);\n                    dataChannel.removeEventListener('open', onOpen);\n                    dataChannel.removeEventListener('error', onError);\n                    try {\n                        dataChannel.send(serializedData);\n                        resolve();\n                    } catch (e) {\n                        reject(e);\n                    }\n                };\n                \n                const onError = (e) => {\n                    clearTimeout(timeout);\n                    dataChannel.removeEventListener('open', onOpen);\n                    dataChannel.removeEventListener('error', onError);\n                    reject(new Error(`Channel ${channel} error: ${e.message || e}`));\n                };\n                \n                dataChannel.addEventListener('open', onOpen);\n                dataChannel.addEventListener('error', onError);\n            });\n        }\n        \n        dataChannel.send(serializedData);\n    }\n    onmessage(event, channel){\n        if (channel === \"streamoffer\"){\n            console.log(\"received stream offer\", event.data)\n            let {offer, streamInfo} = JSON.parse(event.data);\n            // Use streamInfo from the offer if available, otherwise default to video+audio\n            const callInfo = streamInfo || {video: true, audio: true};\n            this.mqttClient.callFromUser(this.target, callInfo, this.initiatedCall, this.callPromises).then(stream => {\n                if (!this.streamConnection){\n                    this.streamConnection = this._makeStreamConnection(stream);\n                }\n                return this.streamConnection;\n            }).catch(e => {\n                // If call was rejected, properly end the call\n                if (e === \"Call rejected\" || (typeof e === 'string' && e.includes('rejected'))) {\n                    console.log(`Call rejected by ${this.target}, ending call`);\n                    // End the call properly\n                    this.endCall();\n                }\n                this.streamConnectionPromise.reject(e);\n                this.streamPromise.reject(e);\n                // Return null to indicate failure, don't throw (which would break the chain)\n                return null;\n            }).then(streamConnection => {\n                // Only proceed if streamConnection exists (call was not rejected)\n                if (!streamConnection) {\n                    return;\n                }\n                streamConnection.setRemoteDescription(new RTCSessionDescription(offer))\n                    .then(() => this.streamConnection.createAnswer())\n                    .then(answer => this.streamConnection.setLocalDescription(answer))\n                    .then(() => {\n                        // Send answer via MQTT\n                        console.log(\"Sending stream answer\", this.streamConnection.localDescription);\n                        this.send(\"streamanswer\", JSON.stringify({\"answer\": this.streamConnection.localDescription}));\n                        \n                        // Apply pending ICE candidates after setting local description\n                        // Note: We still need remote description to be set, so these will be applied\n                        // when the remote description is set in the streamanswer handler\n                        if (this.pendingStreamIceCandidate || (this.pendingStreamIceCandidates && this.pendingStreamIceCandidates.length > 0)) {\n                            console.log(\"Found pending stream ice candidates, will apply when remote description is set\");\n                        }\n                    })\n                    .catch(err => {\n                        console.error(\"Error setting remote description or creating answer:\", err);\n                    });\n            });\n\n        }else if (channel === \"streamanswer\"){\n            console.log(\"received stream answer\", event.data)\n            let {answer} = JSON.parse(event.data);\n            this.streamConnection.setRemoteDescription(new RTCSessionDescription(answer))\n                .then(() => {\n                    // Apply all pending ICE candidates now that remote description is set\n                    if (this.pendingStreamIceCandidates && this.pendingStreamIceCandidates.length > 0) {\n                        console.log(`Applying ${this.pendingStreamIceCandidates.length} pending ICE candidates`);\n                        this.pendingStreamIceCandidates.forEach(candidate => {\n                            try {\n                                this.streamConnection.addIceCandidate(new RTCIceCandidate(candidate))\n                                    .catch(err => {\n                                        console.warn('Error adding pending ICE candidate:', err);\n                                    });\n                            } catch (err) {\n                                console.warn('Error creating ICE candidate:', err);\n                            }\n                        });\n                        this.pendingStreamIceCandidates = [];\n                    }\n                    // Also handle single pending candidate for backward compatibility\n                    if (this.pendingStreamIceCandidate) {\n                        try {\n                            this.streamConnection.addIceCandidate(new RTCIceCandidate(this.pendingStreamIceCandidate))\n                                .catch(err => {\n                                    console.warn('Error adding pending ICE candidate:', err);\n                                });\n                            this.pendingStreamIceCandidate = null;\n                        } catch (err) {\n                            console.warn('Error creating ICE candidate:', err);\n                        }\n                    }\n                })\n                .catch(err => {\n                    console.error('Error setting remote description:', err);\n                });\n        }else if (channel === \"streamice\"){\n            console.log(\"received stream ice\", event.data)\n            if (event.data){\n                const candidateData = JSON.parse(event.data);\n                if (this.streamConnection){\n                    // Check if remote description is set before adding ICE candidate\n                    if (this.streamConnection.remoteDescription) {\n                        // Remote description is set, safe to add ICE candidate\n                        this.streamConnection.addIceCandidate(new RTCIceCandidate(candidateData))\n                            .catch(err => {\n                                // If it fails, store it as pending (might be a duplicate or invalid)\n                                console.warn('Error adding ICE candidate, storing as pending:', err);\n                                if (!this.pendingStreamIceCandidates) {\n                                    this.pendingStreamIceCandidates = [];\n                                }\n                                this.pendingStreamIceCandidates.push(candidateData);\n                            });\n                    } else {\n                        // Remote description not set yet, store as pending\n                        console.log('Remote description not set yet, storing ICE candidate as pending');\n                        if (!this.pendingStreamIceCandidates) {\n                            this.pendingStreamIceCandidates = [];\n                        }\n                        this.pendingStreamIceCandidates.push(candidateData);\n                        // Also set single pending for backward compatibility\n                        this.pendingStreamIceCandidate = candidateData;\n                    }\n                }else{\n                    // Stream connection doesn't exist yet, store as pending\n                    this.pendingStreamIceCandidate = candidateData;\n                    if (!this.pendingStreamIceCandidates) {\n                        this.pendingStreamIceCandidates = [];\n                    }\n                    this.pendingStreamIceCandidates.push(candidateData);\n                }\n            }\n        }else if (channel === \"endcall\"){\n            console.log(\"RTCConnection.onmessage: Received endcall message from \" + this.target);\n            this._closeCall();\n        }else{\n            this.mqttClient.onrtcmessage(channel, event.data, this.target);\n        }\n    }\n    endCall(){\n        console.log(\"RTCConnection.endCall: Sending endcall message to \" + this.target);\n        try {\n            const sendResult = this.send(\"endcall\", null);\n            // send() can return a Promise if channel is not ready\n            if (sendResult && typeof sendResult.then === 'function') {\n                sendResult\n                    .then(() => {\n                        console.log(\"RTCConnection.endCall: Successfully sent endcall message to \" + this.target);\n                    })\n                    .catch((err) => {\n                        console.error(\"RTCConnection.endCall: Failed to send endcall message (async):\", err);\n                    });\n            } else {\n                console.log(\"RTCConnection.endCall: Successfully sent endcall message to \" + this.target);\n            }\n        } catch (err) {\n            console.error(\"RTCConnection.endCall: Failed to send endcall message (sync):\", err);\n            // Still close the call even if send failed\n        }\n        this._closeCall();\n    }\n    _closeCall(){\n        console.log(\"RTCConnection._closeCall: Closing call with \" + this.target);\n        \n        // Mark this connection as closed FIRST (before checking others)\n        const wasStreamConnectionActive = !!this.streamConnection;\n        \n        if (this.streamConnection){\n            this.streamConnection.close();\n            this.streamConnection = null;\n            \n            // Always stop remote stream tracks (they're specific to this connection)\n            if (this.remoteStream){\n                const remoteTracks = this.remoteStream.getTracks();\n                console.log(`RTCConnection._closeCall: Stopping ${remoteTracks.length} remote track(s) for ${this.target}`);\n                remoteTracks.forEach(track => track.stop());\n            }\n            this.remoteStream = null;\n            this.localStream = null; // Clear reference from THIS connection\n        } else {\n            console.log(`RTCConnection._closeCall: No streamConnection for ${this.target}`);\n        }\n        \n        // Only check for other connections if THIS connection actually had a stream\n        if (wasStreamConnectionActive) {\n            // Count OTHER connections that still have active streamConnections\n            let otherActiveConnections = 0;\n            const allConnections = [];\n            if (this.mqttClient && this.mqttClient.rtcConnections) {\n                for (const [user, conn] of Object.entries(this.mqttClient.rtcConnections)) {\n                    const hasStreamConn = !!(conn && conn.streamConnection);\n                    allConnections.push(`${user}:${hasStreamConn ? 'active' : 'inactive'}`);\n                    if (user !== this.target && conn && conn.streamConnection) {\n                        otherActiveConnections++;\n                        console.log(`RTCConnection._closeCall: Found other active connection: ${user}`);\n                    }\n                }\n            }\n            \n            console.log(`RTCConnection._closeCall: All connections: [${allConnections.join(', ')}]`);\n            console.log(`RTCConnection._closeCall: ${otherActiveConnections} other active connections remain (excluding ${this.target})`);\n            \n            // Only stop shared stream tracks if NO other connections exist\n            if (otherActiveConnections === 0) {\n                if (this.mqttClient && this.mqttClient.sharedLocalStream) {\n                    console.log(`RTCConnection._closeCall: âœ… Last connection closed, stopping shared stream tracks`);\n                    const tracks = this.mqttClient.sharedLocalStream.getTracks();\n                    console.log(`RTCConnection._closeCall: Shared stream has ${tracks.length} tracks`);\n                    tracks.forEach(track => {\n                        console.log(`RTCConnection._closeCall: ðŸ›‘ Stopping ${track.kind} track ${track.id} (readyState: ${track.readyState})`);\n                        track.stop();\n                        console.log(`RTCConnection._closeCall: âœ… Stopped ${track.kind} track ${track.id} (new readyState: ${track.readyState})`);\n                    });\n                    this.mqttClient.sharedLocalStream = null;\n                    this.mqttClient.sharedLocalStreamPromise = null; // Also clear the promise\n                    console.log(`RTCConnection._closeCall: âœ… Shared stream and promise cleared`);\n                } else {\n                    console.log(`RTCConnection._closeCall: No shared stream to stop`);\n                }\n            } else {\n                console.log(`RTCConnection._closeCall: â¸ï¸  ${otherActiveConnections} other connections still active, keeping shared stream alive`);\n            }\n        }\n        \n        this.callEndPromise.resolve();\n        this.callEndPromise = new DeferredPromise();\n        this.callRinging = false;\n        this.initiatedCall = false;\n        this.pendingStreamIceCandidate = null;\n        this.streamConnectionPromise = new DeferredPromise();\n        this.streamPromise = new DeferredPromise();\n        this.callEndPromise = new DeferredPromise();\n        this.callPromises = {start: this.streamPromise.promise, end: this.callEndPromise.promise};\n\n        if (this.mqttClient && this.mqttClient.oncallended){\n            console.log(\"RTCConnection._closeCall: Calling mqttClient.oncallended for \" + this.target);\n            this.mqttClient.oncallended(this.target);\n        } else {\n            console.warn(\"RTCConnection._closeCall: mqttClient.oncallended is not defined!\");\n        }\n    }\n\n    onReceivedIceCandidate(data) {\n        // Check if remote description is set before adding ICE candidate\n        if (this.peerConnection.remoteDescription) {\n            this.peerConnection.addIceCandidate(new RTCIceCandidate(data))\n                .catch(err => {\n                    // ICE candidate might be invalid or duplicate, log but don't throw\n                    console.warn('Error adding ICE candidate to peer connection:', err);\n                });\n        } else {\n            // Remote description not set yet, store as pending\n            // The pending ICE candidate will be applied when the answer is received\n            if (!this.pendingIceCandidates) {\n                this.pendingIceCandidates = [];\n            }\n            this.pendingIceCandidates.push(data);\n            console.log('Remote description not set, storing ICE candidate as pending');\n        }\n    }\n\n    onicecandidate(event){\n//        if (event.candidate && !this.sentice) {\n//            this.sentice = true;\n            // Send ICE candidate via MQTT\n            this.mqttClient.postPubliclyToMQTTServer(\"RTCIceCandidate\", event.candidate);\n//        }\n    }\n    onstreamicecandidate(event){\n        if (event.candidate) {\n            // Send ICE candidate via RTC\n            // Reduced logging - ICE candidates are sent very frequently during connection setup\n            // console.log(\"Sending stream ice\", this, event.candidate);\n            this.send(\"streamice\", JSON.stringify(event.candidate));\n        }\n    }\n    ondatachannel(event){\n        let dataChannel = event.channel;\n        this.dataChannels[event.name] = dataChannel;\n        dataChannel.onmessage = this.onmessage.bind(this);\n    }\n    ondatachannelerror(error, channelName){\n        this.mqttClient.onrtcerror(channelName, error, this.target);\n    }\n\n    close(){\n        if (this.closed){return}\n        this.peerConnection.close();\n        this.closed = true;\n        this.peerConnection = null;\n        this.mqttClient.onrtcdisconnectedFromUser(this.target);\n    }\n}\n\n\nclass PromisefulMQTTRTCClient extends BaseMQTTRTCClient {\n    constructor(config){\n    config = config || {};\n    let {name, userInfo, questionHandlers, handlers, load} = config;\n    if (load === undefined){\n        load = true;\n    }\n\n    config.load = false;\n    // initialize state tracking variables\n    super(config);\n\n    Object.assign(this.rtcHandlers, this.extraRTCHandlers);\n    Object.assign(this.rtcHandlers, handlers || {});\n    for (let [k, v] of Object.entries(this.rtcHandlers)){\n        this.rtcHandlers[k] = v.bind(this);\n    }\n\n    if (questionHandlers){\n        this.questionHandlers = questionHandlers;\n    }else if (!this.questionHandlers){\n        this.questionHandlers = {};\n    }\n    this.questionPromises = {};\n    this.latestPings = {};\n    this.questionNumber = 0;\n\n    this.mqttConnected = new DeferredPromise();\n    this.nextUserConnection = new DeferredPromise();\n    this.nextUserDisconnectionPromises = {}\n    this.nextDMPromises = {};\n    this.nextChatPromises = {};\n    this.nextQuestionPromises = {};\n    this.nextAnswerPromises = {};\n    this.nextPingPromises = {};\n    this.nextPongPromises = {};\n    this.nextMQTTMessagePromises = {};\n\n\n    this.onConnectedToMQTT = this.onConnectedToMQTT.bind(this);\n    this.sendRTCDM = this.sendRTCDM.bind(this);\n    this.onRTCDM = this.onRTCDM.bind(this);\n    this.sendRTCChat = this.sendRTCChat.bind(this);\n    this.onRTCChat = this.onRTCChat.bind(this);\n    this.onConnectedToUser = this.onConnectedToUser.bind(this);\n    this.onDisconnectedFromUser = this.onDisconnectedFromUser.bind(this);\n    this.sendRTCQuestion = this.sendRTCQuestion.bind(this);\n    this.onRTCQuestion = this.onRTCQuestion.bind(this);\n    this.respondToQuestion = this.respondToQuestion.bind(this);\n    this.onRTCAnswer = this.onRTCAnswer.bind(this);\n    this.pingEveryone = this.pingEveryone.bind(this);\n    this.ping = this.ping.bind(this);\n    this.receivedPing = this.receivedPing.bind(this);\n    this.receivedPong = this.receivedPong.bind(this);\n\n    this.nextUserDisconnection = this.nextUserDisconnection.bind(this);\n    this.nextMQTTMessage = this.nextMQTTMessage.bind(this);\n    this.nextAnswer = this.nextAnswer.bind(this);\n    this.nextQuestion = this.nextQuestion.bind(this);\n    this.nextChat = this.nextChat.bind(this);\n    this.nextDM = this.nextDM.bind(this);\n    this.nextPing = this.nextPing.bind(this);\n    this.nextPong = this.nextPong.bind(this);\n\n    this.addQuestionHandler = this.addQuestionHandler.bind(this);\n\n    if (load){\n        this.load();\n    }\n  }\n  addQuestionHandler(name, handler){\n        this.questionHandlers[name] = handler;\n  }\n\n  extraRTCHandlers = {\n    dm: (data, sender) => {\n        this.onRTCDM(data, sender);\n        if (this.nextDMPromises[\"anyone\"]){\n            this.nextDMPromises[\"anyone\"].resolve([data, sender]);\n            delete this.nextDMPromises[\"anyone\"];\n        }\n        if (this.nextDMPromises[sender]){\n            this.nextDMPromises[sender].resolve(data);\n            delete this.nextDMPromises[sender];\n        }\n    },\n    chat: (data, sender) => {\n        this.onRTCChat(data, sender);\n        if (this.nextChatPromises[\"anyone\"]){\n            this.nextChatPromises[\"anyone\"].resolve([data, sender]);\n            delete this.nextChatPromises[\"anyone\"];\n        }\n        if (this.nextChatPromises[sender]){\n            this.nextChatPromises[sender].resolve(data);\n            delete this.nextChatPromises[sender];\n        }\n    },\n    question: (data, sender) => {\n        this.onRTCQuestion(data, sender);\n        if (this.nextQuestionPromises[\"anyone\"]){\n            this.nextQuestionPromises[\"anyone\"].resolve([data, sender]);\n            delete this.nextQuestionPromises[\"anyone\"];\n        }\n        if (this.nextQuestionPromises[sender]){\n            this.nextQuestionPromises[sender].resolve(data);\n            delete this.nextQuestionPromises[sender];\n        }\n\n    },\n    answer: (data, sender) => {\n        this.onRTCAnswer(data, sender);\n        if (this.nextAnswerPromises[\"anyone\"]){\n            this.nextAnswerPromises[\"anyone\"].resolve([data, sender]);\n            delete this.nextAnswerPromises[\"anyone\"];\n        }\n        if (this.nextAnswerPromises[sender]){\n            this.nextAnswerPromises[sender].resolve(data);\n            delete this.nextAnswerPromises[sender];\n        }\n    },\n    ping: (data, sender) => {\n        this.sendOverRTC(\"pong\", null, sender);\n        this.receivedPing(sender);\n        if (this.nextPingPromises[\"anyone\"]){\n            this.nextPingPromises[\"anyone\"].resolve([data, sender]);\n            delete this.nextPingPromises[\"anyone\"];\n        }\n        if (this.nextPingPromises[sender]){\n            this.nextPingPromises[sender].resolve(data);\n            delete this.nextPingPromises[sender];\n        }\n    },\n    pong: (data, sender) => {\n        this.latestPings[sender].resolve();\n        this.receivedPong(sender);\n        if (this.nextPongPromises[\"anyone\"]){\n            this.nextPongPromises[\"anyone\"].resolve([data, sender]);\n            delete this.nextPongPromises[\"anyone\"];\n        }\n        if (this.nextPongPromises[sender]){\n            this.nextPongPromises[sender].resolve(data);\n            delete this.nextPongPromises[sender];\n        }\n    },\n  }\n\n  onConnectedToMQTT(){\n    this.mqttConnected.resolve();\n    console.log(\"Connected to MQTT\");\n  }\n  postPubliclyToMQTTServer(subtopic, data){\n    super.postPubliclyToMQTTServer(subtopic, data);\n  }\n  onMQTTMessage(subtopic, data, sender, timestamp){\n    console.log(\"Received message from \" + sender + \" on \" + subtopic, data);\n    if (this.nextMQTTMessagePromises[\"anysubtopic\"]){\n        this.nextMQTTMessagePromises[\"anysubtopic\"].resolve([data, sender, timestamp]);\n        delete this.nextMQTTMessagePromises[\"anysubtopic\"];\n    }\n    if (this.nextMQTTMessagePromises[subtopic]){\n        this.nextMQTTMessagePromises[subtopic].resolve([data, sender, timestamp]);\n        delete this.nextMQTTMessagePromises[subtopic];\n    }\n    // Call parent to emit event\n    super.onMQTTMessage(subtopic, data, sender, timestamp);\n  }\n\n //__________________________________________________ RTC ______________________________________________________________\n  onConnectedToUser(user){\n    console.log(\"Connected to user \", user);\n    this.nextUserConnection.resolve(user);\n    this.nextUserConnection = new DeferredPromise();\n  }\n  onDisconnectedFromUser(user){\n    console.log(\"Disconnected from user \", user);\n    this.nextUserDisconnection.resolve(user);\n    if (this.nextUserDisconnectionPromises[\"anyone\"]){\n        this.nextUserDisconnectionPromises[\"anyone\"].resolve(user);\n        delete this.nextUserDisconnectionPromises[\"anyone\"];\n    }\n    if (this.nextUserDisconnectionPromises[user]){\n        this.nextUserDisconnectionPromises[user].resolve(user);\n        delete this.nextUserDisconnectionPromises[user];\n    }\n  }\n\n  sendRTCDM(message, target){\n    this.sendOverRTC(\"dm\", message, target);\n  }\n  onRTCDM(message, sender){\n    console.log(\"Received DM from \" + sender, message);\n  }\n  nextDM(target='anyone'){\n    this.nextDMPromises[target] = new DeferredPromise();\n    return this.nextDMPromises[target].promise;\n  }\n  nextChat(target='anyone'){\n    this.nextChatPromises[target] = new DeferredPromise();\n    return this.nextChatPromises[target].promise;\n  }\n  nextQuestion(target='anyone'){\n    this.nextQuestionPromises[target] = new DeferredPromise();\n    return this.nextQuestionPromises[target].promise;\n  }\n    nextAnswer(target='anyone'){\n        this.nextAnswerPromises[target] = new DeferredPromise();\n        return this.nextAnswerPromises[target].promise;\n    }\n    nextPing(target='anyone'){\n        this.nextPingPromises[target] = new DeferredPromise();\n        return this.nextPingPromises[target].promise;\n    }\n    nextPong(target='anyone'){\n        this.nextPongPromises[target] = new DeferredPromise();\n        return this.nextPongPromises[target].promise;\n    }\n    nextUserDisconnection(target='anyone'){\n        this.nextUserDisconnectionPromises[target] = new DeferredPromise();\n        return this.nextUserDisconnectionPromises[target].promise;\n    }\n    nextMQTTMessage(subtopic='anysubtopic'){\n        this.nextMQTTMessagePromises[subtopic] = new DeferredPromise();\n        return this.nextMQTTMessagePromises[subtopic].promise;\n    }\n\n\n  sendRTCChat(message){\n    this.sendOverRTC(\"chat\", message);\n  }\n  onRTCChat(message, sender){\n    console.log(\"Received chat from \" + sender, message);\n  }\n  sendRTCQuestion(topic, content, target){\n    let question = {topic, content};\n    let n = this.questionNumber;\n    this.questionNumber++;\n    let p = new DeferredPromise();\n    this.questionPromises[n] = p;\n    let data = {n, question};\n    this.sendOverRTC(\"question\", data, target);\n    return p.promise;\n  }\n  onRTCQuestion(data, sender){\n    let {n, question} = data;\n    let answer = this.respondToQuestion(question, sender);\n    if (answer instanceof Promise){\n        answer.then((a) => {\n            this.sendOverRTC(\"answer\", {n, answer: a, question}, sender);\n        });\n    }else{\n        this.sendOverRTC(\"answer\", {n, answer, question}, sender);\n    }\n  }\n  respondToQuestion(question, sender){\n    let {topic, content} = question;\n    if (this.questionHandlers[topic]){\n        return this.questionHandlers[topic](content, sender);\n    }else{\n        console.warn(\"No handler found for question \" + topic);\n        throw new Error(\"No handler found for question \" + topic);\n    }\n    return \"I don't know.\"\n  }\n  onRTCAnswer(data, sender){\n    let {n, answer} = data;\n    if (this.questionPromises[n]){\n        this.questionPromises[n].resolve(answer);\n        delete this.questionPromises[n];\n    }else{\n        console.warn(\"No promise found for question \" + n);\n    }\n  }\n  pingEveryone(){\n    this.latestPings = {};\n    for (let user of this.connectedUsers){\n        this.ping(user);\n    }\n    return Promise.all(Object.values(this.latestPings).map((p) => p.promise));\n  }\n  ping(user){\n    this.latestPings[user] = new DeferredPromise();\n    this.sendOverRTC(\"ping\", \"ping\", users);\n    return this.latestPings[user].promise;\n  }\n  receivedPing(sender){\n    console.log(\"Received ping from \" + sender);\n  }\n  receivedPong(sender){\n    console.log(\"Received pong from \" + sender);\n  }\n\n\n\n}\n\nclass MQTTRTCClient extends PromisefulMQTTRTCClient {\n    constructor(config){\n        config = config || {};\n        let {name, userInfo, questionHandlers, handlers, load} = config;\n        // this.knownUsers = {name: userInfo, ...} of all users, even those we're not connected to\n        // this.rtcConnections = {name: rtcConnection, ...} of active connections\n        // this.connectedUsers = [name, ...] of all users we're connected to\n        if (load === undefined){\n            load = true;\n        }\n        config.load = false;\n        super(config);\n        \n\n        if (load){\n            this.load();\n        }\n\n    }\n    on(rtcevent, handler){\n        // Use EventEmitter for standard events, but handle special cases\n        if (rtcevent === \"connectionrequest\"){\n            // Special case: connectionrequest sets shouldConnectToUser\n            this.shouldConnectToUser = handler.bind(this);\n            // Also register as event listener for consistency\n            return super.on(rtcevent, handler);\n        }else if (rtcevent === \"call\"){\n            // Special case: call sets acceptCallFromUser\n            this.acceptCallFromUser = handler.bind(this);\n            // Also register as event listener\n            return super.on(rtcevent, handler);\n        }else if (rtcevent === \"callended\"){\n            // Special case: callended sets oncallended\n            // Store the original oncallended method that emits the event\n            const originalOnCallEnded = this.oncallended;\n            // Create a wrapper that calls the original (to emit event)\n            // The handler will be called via the event listener registered below\n            this.oncallended = (user) => {\n                // Call the original method to emit the 'callended' event\n                // This will trigger all registered event listeners including the handler\n                if (originalOnCallEnded) {\n                    originalOnCallEnded.call(this, user);\n                }\n            };\n            // Register handler as event listener so it gets called when event is emitted\n            return super.on(rtcevent, handler);\n        }else if (rtcevent === \"question\"){\n            // Question handlers are registered via addQuestionHandler\n            this.addQuestionHandler(rtcevent, handler);\n            // Also emit events for consistency\n            return super.on(rtcevent, handler);\n        }else{\n            // All other events use EventEmitter\n            return super.on(rtcevent, handler);\n        }\n    }\n\n    shouldConnectToUser(user, userInfo){\n        return super.shouldConnectToUser(user, userInfo);\n      }\n\n    changeName(newName){\n        super.changeName(newName);\n    }\n    onNameChange(oldName, newName){\n        super.onNameChange(oldName, newName);\n        this.emit('namechange', oldName, newName);\n    }\n\n    onConnectedToMQTT(){\n        console.log(\"Connected to MQTT\");\n        this.emit('mqttconnected');\n    }\n    onConnectedToUser(user){\n        console.log(\"Connected to user \", user);\n        this.emit('connectedtopeer', user);\n    }\n    onDisconnectedFromUser(user){\n        console.log(\"Disconnected from user \", user);\n        this.emit('disconnectedfrompeer', user);\n    }\n    onRTCDM(data, sender){\n        this.emit('dm', data, sender);\n    }\n    onRTCChat(data, sender){\n        this.emit('chat', data, sender);\n    }\n    addQuestionHandler(name, handler){\n        super.addQuestionHandler(name, handler);\n    }\n    oncallconnected(sender, {localStream, remoteStream}){\n        this.emit('callconnected', sender, {localStream, remoteStream});\n    }\n\n    pingEveryone(){\n        let start = Date.now();\n        return super.pingEveryone().then(() => {\n            console.log(\"Pinged everyone in \" + (Date.now() - start) + \"ms\");\n        });\n    }\n    ping(user){\n        // time the ping\n        let start = Date.now();\n        return super.ping(user).then(() => {\n            console.log(\"Pinged \" + user + \" in \" + (Date.now() - start) + \"ms\");\n        });\n    }\n    receivedPing(sender){\n        this.emit('ping', sender);\n    }\n\n    // nextUserConnection is a promise that resolves when the client connects to a new user\n    get nextDMPromise() {return this.nextDM();}\n    get nextChatPromise() {return this.nextChat();}\n    get nextQuestionPromise() {return this.nextQuestion();}\n    get nextAnswerPromise() {return this.nextAnswer();}\n    get nextPingPromise() {return this.nextPing();}\n    get nextPongPromise() {return this.nextPong();}\n    get nextUserDisconnectionPromise() {return this.nextUserDisconnection();}\n\n    get connectedUsers(){\n        return this.connectionsToUsers();\n    }\n\n    disconnectFromUser(user){\n        super.disconnectFromUser(user);\n        return this.nextUserDisconnection(user);\n    }\n\n    getPeer(user){\n        return new Peer(this, user);\n    }\n    get peers(){\n        return Object.fromEntries(Object.entries(this.connectedUsers).map(name => [name, new Peer(this, name)]));\n    }\n    get peerList(){\n        return Object.values(this.peers);\n    }\n    send(data, channel = 'chat', users){\n        return super.sendOverRTC(channel, data, users);\n    }\n}\n\nclass Peer{\n    constructor(mqttclient, name){\n        this.mqttClient = mqttclient;\n        this.target = name;\n    }\n    dm(message){\n        return this.mqttClient.sendRTCDM(message, this.target);\n    }\n    chat(message){\n        return this.mqttClient.sendRTCChat(message);\n    }\n    ask(question){\n        return this.mqttClient.sendRTCQuestion(question, this.target);\n    }\n    ping(){\n        return this.mqttClient.ping(this.target);\n    }\n\n}\n\n\n//____________________________________________________________________________________________________________________\n// Export main classes\nexport {MQTTRTCClient, BaseMQTTRTCClient, PromisefulMQTTRTCClient, RTCConnection, Peer, DeferredPromise};\nexport { RTCConfig, LocalStorageAdapter, TabManager, MQTTLoader };","/**\n * Keys - Cryptographic key management for identity verification\n * \n * Manages RSA-PSS key pairs for signing and verification.\n * Handles key generation, storage, and challenge/response operations.\n * \n * @param {string} name - The name associated with these keys\n * @param {boolean|'force'} generate - Whether to generate new keys if none exist. 'force' will always generate.\n * @param {Object} dependencies - Injected dependencies\n * @param {StorageAdapter} [dependencies.storage] - Storage adapter for key persistence. Falls back to localStorage if available.\n * @param {Crypto} [dependencies.crypto] - Web Crypto API instance. Falls back to window.crypto if available.\n */\n\nexport class Keys {\n  algorithm = {\n    name: \"RSA-PSS\",\n    modulusLength: 2048,\n    publicExponent: new Uint8Array([1, 0, 1]),\n    hash: {name: \"SHA-256\"},\n  }\n  extractable = true;\n  keyUsages = [\"sign\", \"verify\"];\n\n  constructor(name, generate=true, { storage = null, crypto = null } = {}) {\n    this._name = null;\n    this.name = name;\n    \n    // Use storage adapter if provided, otherwise fall back to localStorage\n    this.storage = storage || (typeof localStorage !== 'undefined' ? {\n      getItem: (key) => localStorage.getItem(key),\n      setItem: (key, value) => localStorage.setItem(key, value),\n      removeItem: (key) => localStorage.removeItem(key)\n    } : null);\n    \n    // Use crypto if provided, otherwise fall back to window.crypto\n    this.crypto = crypto || (typeof window !== 'undefined' && window.crypto ? window.crypto : null);\n    \n    if (!this.crypto || !this.crypto.subtle) {\n      throw new Error(\"Web Crypto API not available. Please provide a crypto instance via constructor.\");\n    }\n\n    this._loadKeys = this._loadKeys.bind(this);\n    this.load = this.load.bind(this);\n    this.generate = this.generate.bind(this);\n    this._dumpKey = this._dumpKey.bind(this);\n    this._loadPrivateKey = this._loadPrivateKey.bind(this);\n    this._loadPublicKey = this._loadPublicKey.bind(this);\n    this.sign = this.sign.bind(this);\n    this.getChallengeString = this.getChallengeString.bind(this);\n    this.verify = this.verify.bind(this);\n    this.savePublicKey = this.savePublicKey.bind(this);\n    this.savePublicKeyString = this.savePublicKeyString.bind(this);\n    this.getPublicKey = this.getPublicKey.bind(this);\n    this.clearOwnKeys = this.clearOwnKeys.bind(this);\n    this.clearKnownHosts = this.clearKnownHosts.bind(this);\n    this.getPeerNames = this.getPeerNames.bind(this);\n    this.reset = this.reset.bind(this);\n\n    this.loadedPromise = this.load(generate);\n  }\n  \n  load(generate=true) {\n    this.loading = true;\n    this.loaded = false;\n    this.loadedPromise = this._loadKeys(generate).then((keys) => {\n      if (!this.storage) {\n        this._knownHostsStrings = {};\n        this._knownHostsKeys = {};\n      } else {\n        this._knownHostsStrings = JSON.parse(this.storage.getItem(\"knownHostsStrings\") || \"{}\");\n        for (let [name, key] of Object.entries(this._knownHostsStrings)) {\n          if (name.startsWith(\"anon\")){\n            delete this._knownHostsStrings[name];\n          }\n        }\n        this._knownHostsKeys = {};\n      }\n      \n      this._privateKey = keys.privateKey;\n      this._publicKey = keys.publicKey;\n      this._privateKeyString = keys.privateKeyString;\n      this.publicKeyString = keys.publicKeyString;\n      \n      if (this.storage) {\n        this.storage.setItem(\"privateKeyString\", this._privateKeyString);\n        this.storage.setItem(\"publicKeyString\", this.publicKeyString);\n      }\n      \n      this.loaded = true;\n      this.loading = false;\n      return this.publicKeyString;\n    });\n    return this.loadedPromise;\n  }\n  \n  _loadKeys(generate=true) {\n    if (!this.storage) {\n      if (!generate) {\n        throw new Error(\"No storage available and generate is false\");\n      }\n      return this.generate();\n    }\n    \n    let privateKeyString = this.storage.getItem(\"privateKeyString\");\n    let publicKeyString = this.storage.getItem(\"publicKeyString\");\n    if (generate !== 'force' && publicKeyString && privateKeyString) {\n      return this._loadPrivateKey(privateKeyString).then((privateKey) => {\n        return this._loadPublicKey(publicKeyString).then((publicKey) => {\n          return {privateKey, publicKey, privateKeyString, publicKeyString};\n        });\n      })\n    }\n    if (!generate) {\n      throw new Error(\"No keys found and generate is false\");\n    }\n    return this.generate()\n  }\n  \n  generate(){\n    return this.crypto.subtle.generateKey(\n      this.algorithm, this.extractable, this.keyUsages\n    ).then((keys) => {\n      return this._dumpKey(keys.privateKey).then(privateKeyString => {\n        keys.privateKeyString = privateKeyString;\n        return this._dumpKey(keys.publicKey).then(publicKeyString => {\n          keys.publicKeyString = publicKeyString;\n          return keys;\n        });\n      });\n    });\n  }\n  \n  _dumpKey(key){\n    return this.crypto.subtle.exportKey(\"jwk\", key).then(JSON.stringify);\n  }\n  \n  _loadPrivateKey(key){\n    return this.crypto.subtle.importKey(\"jwk\", JSON.parse(key), this.algorithm, this.extractable, [\"sign\"])\n  }\n  \n  _loadPublicKey(key){\n    return this.crypto.subtle.importKey(\"jwk\", JSON.parse(key), this.algorithm, this.extractable, [\"verify\"])\n  }\n  \n  getChallengeString() {\n    return Array.from(this.crypto.getRandomValues(new Uint8Array(32))).map(b => String.fromCharCode(b)).join('');\n  }\n  \n  sign(challenge) {\n    if (this.loading && !this._loaded) {\n      return this.loadedPromise.then(() => this.sign(challenge));\n    }\n    return this.crypto.subtle.sign(\n      {\n        name: \"RSA-PSS\",\n        saltLength: 32,\n      },\n      this._privateKey,\n      new Uint8Array(challenge.split('').map((c) => c.charCodeAt(0))).buffer\n    ).then((signature) => {\n      return String.fromCharCode.apply(null, new Uint8Array(signature));\n    });\n  }\n  \n  verify(publicKeyString, signatureString, challenge) {\n    return this._loadPublicKey(publicKeyString).then((publicKey) => {\n      return this.crypto.subtle.verify(\n        {\n          name: \"RSA-PSS\",\n          saltLength: 32,\n        },\n        publicKey,\n        new Uint8Array(signatureString.split('').map((c) => c.charCodeAt(0))).buffer,\n        new Uint8Array(challenge.split('').map((c) => c.charCodeAt(0))).buffer\n      );\n    });\n  }\n  \n  getPeerNames(publicKeyString) {\n    let matchingPeers = [];\n    if (!this._knownHostsStrings) return matchingPeers;\n    for (let [name, key] of Object.entries(this._knownHostsStrings)) {\n      if (key === publicKeyString) {\n        matchingPeers.push(name);\n      }\n    }\n    return matchingPeers;\n  }\n  \n  savePublicKey(peerName, publicKey) {\n    peerName = peerName.split(\"|\")[0].split(\"(\")[0].trim();\n    if (publicKey instanceof CryptoKey) {\n      return this._dumpKey(publicKey).then((publicKeyString) => {\n        this.savePublicKey(peerName, publicKeyString);\n        this._knownHostsKeys[peerName] = publicKey;\n        return true;\n      });\n    }else{\n      return this.savePublicKeyString(peerName, publicKey);\n    }\n  }\n  \n  savePublicKeyString(peerName, publicKeyString) {\n    peerName = peerName.split(\"|\")[0].split(\"(\")[0].trim();\n    let matchingPeers = this.getPeerNames(publicKeyString);\n    if (matchingPeers.length > 0) {\n      // If the public key is already registered to this peer name, allow updating\n      if (matchingPeers.includes(peerName)) {\n        // Same peer, same key - no change needed, but update anyway to be safe\n        this._knownHostsStrings[peerName] = publicKeyString;\n        if (this.storage) {\n          this.storage.setItem(\"knownHostsStrings\", JSON.stringify(this._knownHostsStrings));\n        }\n        return true;\n      }\n      // Public key is registered to a different peer name\n      console.error(\"Public key already registered for another peer\", matchingPeers);\n      throw new Error(\"Public key already registered for another peer\");\n    }\n    this._knownHostsStrings[peerName] = publicKeyString;\n    if (this.storage) {\n      this.storage.setItem(\"knownHostsStrings\", JSON.stringify(this._knownHostsStrings));\n    }\n    return true;\n  }\n\n  getPublicKey(peerName) {\n    peerName = peerName.split(\"|\")[0].split(\"(\")[0].trim();\n    let publicKey = this._knownHostsKeys?.[peerName];\n    if (publicKey) { return Promise.resolve(publicKey); }\n    let publicKeyString = this._knownHostsStrings?.[peerName];\n    if (publicKeyString) {\n      return this._loadPublicKey(publicKeyString).then((publicKey) => {\n        if (!this._knownHostsKeys) this._knownHostsKeys = {};\n        this._knownHostsKeys[peerName] = publicKey;\n        return publicKey;\n      });\n    }\n    return Promise.resolve(null);\n  }\n  \n  getPublicKeyString(peerName) {\n    peerName = peerName.split(\"|\")[0].split(\"(\")[0].trim();\n    return this._knownHostsStrings?.[peerName] || null;\n  }\n  \n  removePublicKey(peerName) {\n    peerName = peerName.split(\"|\")[0].split(\"(\")[0].trim();\n    if (this._knownHostsStrings) {\n      delete this._knownHostsStrings[peerName];\n    }\n    if (this._knownHostsKeys) {\n      delete this._knownHostsKeys[peerName];\n    }\n    if (this.storage) {\n      this.storage.setItem(\"knownHostsStrings\", JSON.stringify(this._knownHostsStrings || {}));\n    }\n  }\n\n  get knownHosts() {\n    if (!this._knownHostsStrings) return [];\n    return Object.entries(this._knownHostsStrings).map(([name, key]) => {\n      return name + \"|\" + key;\n    });\n  }\n  \n  clearOwnKeys() {\n    if (this.storage) {\n      this.storage.removeItem(\"privateKeyString\");\n      this.storage.removeItem(\"publicKeyString\");\n    }\n    this._privateKey = null;\n    this._publicKey = null;\n    this._privateKeyString = null;\n    this.publicKeyString = null;\n  }\n  \n  clearKnownHosts() {\n    if (this.storage) {\n      this.storage.removeItem(\"knownHostsStrings\");\n    }\n    this._knownHostsKeys = {};\n    this._knownHostsStrings = {};\n  }\n\n  reset(){\n    this.clearOwnKeys();\n    this.clearKnownHosts();\n  }\n\n  get name(){return this._name}\n  set name(name) {\n    if (name.includes(\"|\")) {\n      throw new Error(\"Name cannot contain |\");\n    }\n    this._name = name;\n  }\n\n  get identity() {\n    if (!this.loaded){return null}\n    let name = this.name.split(\"|\")[0].split(\"(\")[0].trim();\n    return name + \"|\" + this.publicKeyString;\n  }\n\n  register(identity) {\n    let [peerName, publicKeyString] = identity.split(\"|\");\n    return this.savePublicKeyString(peerName, publicKeyString);\n  }\n}\n\n","/**\n * Signed MQTT-RTC Client - Secure peer-to-peer communication with identity verification\n * \n * Extends MQTTRTCClient with cryptographic identity verification using RSA-PSS keys.\n * Implements a challenge/response system to verify peer identities and prevent impersonation.\n * \n * Usage:\n *   import { SignedMQTTRTCClient } from './signed-mqtt-rtc.js';\n *   \n *   const client = new SignedMQTTRTCClient({\n *     name: 'MyName',\n *     trustMode: 'moderate',  // Trust configuration\n *     generate: true          // Generate new keys if none exist\n *   });\n * \n *   client.on('validation', (peerName, trusted) => {\n *     console.log(`Peer ${peerName} validated, trusted: ${trusted}`);\n *   });\n * \n *   client.on('validationfailure', (peerName, message) => {\n *     console.error(`Validation failed for ${peerName}: ${message}`);\n *   });\n * \n * Identity System:\n * - Each client generates an RSA-PSS key pair (2048-bit)\n * - Public keys are stored in localStorage (knownHostsStrings)\n * - Private keys are stored encrypted in localStorage\n * - Identity = name + \"|\" + publicKeyString\n * \n * Trust Levels:\n * - reject: Do not connect\n * - promptandtrust: Prompt user, then trust if challenge passes\n * - connectandprompt: Connect first, then prompt to trust\n * - connectandtrust: Connect and automatically trust\n * \n * Trust Modes (pre-configured trust level mappings):\n * - strict: Only auto-trust \"the one and only\" known peers\n * - moderate: Trust known peers and aliases, prompt for others\n * - lax: Trust most cases, prompt only for suspicious ones\n * - unsafe: Trust everyone (not recommended)\n * - rejectall: Reject all connections\n * \n * User Categories (automatic detection):\n * - theoneandonly: Known key and name match perfectly\n * - knownwithknownaliases: Known key, but also known by other names\n * - possiblenamechange: Known key, but different name\n * - possiblesharedpubkey: Known key with multiple other names\n * - nameswapcollision: Suspicious name/key mismatch\n * - pretender: Unknown key using a known name\n * - nevermet: Completely new peer\n * \n * Challenge/Response Flow:\n * 1. When connecting, peers exchange public keys via MQTT\n * 2. After WebRTC connection, challenge is sent via RTC\n * 3. Peer signs challenge with private key\n * 4. Signature is verified using stored public key\n * 5. If valid, peer is added to validatedPeers list\n * \n * Methods:\n * - trust(peerName): Trust a peer and save their public key\n * - challenge(peerName): Challenge a peer to prove identity\n * - untrust(peerName): Remove trust and disconnect\n * - register(identity): Register a peer's identity (name|publicKey)\n * - reset(): Clear all keys and known hosts\n * \n * @module signed-mqtt-rtc\n */\n\nimport { MQTTRTCClient } from \"./mqtt-rtc-client.js\";\nimport { RTCConfig } from \"../config/rtc-config.js\";\nimport { Keys } from \"../crypto/keys.js\";\n\nlet trustLevels = {\n    reject: 0, // do not even connect\n    promptandtrust: 1, // prompt whether to connect and then trust (assuming they pass the challenge)\n    connectandprompt: 2, // connect and then prompt whether to trust\n    connectandtrust: 3 // connect and trust\n}\n\nlet suspicionLevels = {\n        trusted: 0,\n        nonsuspicious: 1,\n        slightlyodd: 2,\n        odd: 3,\n        veryodd: 4\n    }\n\nclass SignedMQTTRTCClient extends MQTTRTCClient {\n    constructor(userConfig) {\n        userConfig = userConfig || {};\n        \n        // Extract config values\n        const config = userConfig instanceof RTCConfig ? userConfig : new RTCConfig(userConfig);\n        const configObj = config.getConfig();\n        const generate = userConfig.generate !== false;\n        const load = configObj.load !== false;\n        const trustMode = userConfig.trustMode || configObj.trustMode || \"strict\";\n        const name = config.name;\n        const autoAcceptConnections = configObj.connection?.autoAcceptConnections ?? false;\n\n        // Prepare config for parent (don't pass load flag, we'll handle it)\n        super({ ...userConfig, load: false });\n        \n        // Get name from config or use the one we extracted\n        const finalName = name || (this.name ? this.name.split('(')[0] : 'User');\n        \n        // Initialize keys with storage adapter and crypto from config\n        const storage = this.storage || (typeof localStorage !== 'undefined' ? {\n          getItem: (key) => localStorage.getItem(key),\n          setItem: (key, value) => localStorage.setItem(key, value),\n          removeItem: (key) => localStorage.removeItem(key)\n        } : null);\n        \n        // Get crypto from config\n        const crypto = configObj.crypto || (typeof window !== 'undefined' && window.crypto ? window.crypto : null);\n        \n        this.keys = new Keys(finalName, generate, { storage, crypto });\n        this.validatedPeers = [];\n\n        // Set up trust configuration\n        if (trustMode === undefined) {trustMode = \"strict\";}\n        if (this.trustConfigs[trustMode]){\n            this.trustConfig = this.trustConfigs[trustMode];\n        }else{\n            this.trustConfig = trustMode;\n        }\n        if (!this.trustConfig || Object.keys(this.userCategories).map((category) => this.trustConfig[category]).some((level) => level === undefined)){\n            throw new Error(\"Invalid trust mode\");\n        }\n        this.completeUserInfo = {};\n\n        this.shouldConnectToUser = this.shouldConnectToUser.bind(this);\n        this.checkTrust = this.checkTrust.bind(this);\n        this._getFullUserInfo = this._getFullUserInfo.bind(this);\n\n        this.trust = this.trust.bind(this);\n        this.register = this.register.bind(this);\n        this.challenge = this.challenge.bind(this);\n        this.untrust = this.untrust.bind(this);\n        \n        // Store auto-accept setting\n        this.autoAcceptConnections = autoAcceptConnections;\n\n        this.addQuestionHandler('identify', this._returnPublicKey.bind(this));\n        this.addQuestionHandler('challenge', this._sign.bind(this));\n        this.on('connectedtopeer', (peerName)=>{\n            // Only validate if not already validated to prevent infinite loops\n            if (!this.validatedPeers.includes(peerName)) {\n                setTimeout(()=> {this.trustOrChallenge.bind(this)(peerName)}, 1000);\n            }\n        });\n\n        if (load) {\n            this.keys.loadedPromise.then(() => {\n                this.userInfo.publicKeyString = this.keys.publicKeyString;\n                this.load();\n            });\n        }\n    }\n    verifyUser(channel, data, peerName) {\n        console.log(\"Verifying user\", channel, data, peerName, this.validatedPeers);\n        if ([\"question\", \"answer\"].includes(channel) && [\"identify\", \"challenge\"].includes(data.question.topic)) {\n            return true;\n        }\n        return this.validatedPeers.includes(peerName);\n    }\n\n    _getFullUserInfo(peerName, userInfo) {\n        let _bareName = peerName.split('|')[0].split('(')[0].trim();\n        if (_bareName.startsWith(\"anon\")) {\n            return {\n                peerName: peerName,\n                bareName: _bareName,\n                userInfo: userInfo,\n                providedPubKey: false,\n                knownPubKey: false,\n                knownName: false,\n                otherNamesForPubKey: [],\n                otherPubKeyForName: null,\n                completedChallenge: false,\n                explanation: \"anonymous\",\n                suspiciousness: suspicionLevels.nonsuspicious,\n                category: \"nevermet\",\n                hint: \"anon\"\n            }\n        }\n        let providedPubKey = !!userInfo.publicKeyString;\n        let peerNames = providedPubKey?this.keys.getPeerNames(userInfo.publicKeyString):[];\n        let _opk = this.keys.getPublicKeyString(_bareName);\n        let info = {\n            peerName: peerName,\n            bareName: _bareName,\n            userInfo: userInfo,\n            providedPubKey: providedPubKey,\n            knownPubKey: (peerNames.length > 0), // bool of whether the public key is known\n            knownName: peerNames.includes(_bareName), // bool of whether the public key is known under the name provided\n            otherNamesForPubKey: peerNames.filter((name) => name !== _bareName), // array of other names the public key is known under as well (if any)\n            otherPubKeyForName: (_opk && (_opk !== userInfo.publicKeyString)) ? _opk : null, // public key string for the name provided (if different from the public key string provided)\n            completedChallenge: false // bool of whether the challenge has been completed\n        }\n        let category = this.categorizeUser(info);\n        info.explanation = category.explanation;\n        info.suspiciousness = category.suspiciousness;\n        info.category = category.category;\n\n        let hint = '';\n        if (info.category === 'theoneandonly'){\n            hint = '';\n        }else if (['knownwithknownaliases', 'possiblenamechange', 'possiblesharedpubkey'].includes(info.category)){\n            hint = ` who is known as ${info.otherNamesForPubKey.join(', ')}`;\n        }else if (info.category === 'nameswapcollision'){\n            hint = `it appears ${info.otherNamesForPubKey[0]} (who you know) is using ${peerName}'s public key to impersonate them'`;\n        }else if (info.category === 'pretender'){\n            hint = ` who is pretending to be ${info.otherNamesForPubKey[0]}`;\n        }else if (info.category === 'nevermet'){\n            hint = ` who you have not met`;\n        }\n        hint = hint? ` (${hint})`: '';\n        info.hint = hint;\n\n        return info\n    }\n\n    shouldConnectToUser(peerName, userInfo) {\n        console.log(\"Checking if we should connect to user\", peerName, userInfo);\n        let info = this._getFullUserInfo(peerName, userInfo);\n        console.log(\"info\", info)\n        let trustLevel = this.checkTrust(info);\n\n        info.trustLevel = trustLevel;\n        info.trustLevelString = Object.keys(this.trustLevels).find((key) => this.trustLevels[key] === trustLevel);\n\n        if (this.completeUserInfo[peerName] && this.isConnectedToUser(peerName)) {\n            console.warn(\"Rejecting connection to \" + peerName + \" because we are already connected to someone with that name\");\n            return Promise.resolve(false);\n        }\n        this.completeUserInfo[peerName] = info;\n\n        if (trustLevel === trustLevels.reject) {\n            console.error(\"Rejecting connection to \" + peerName);\n            return Promise.resolve(false);\n        }else if ([trustLevels.doubleprompt, trustLevels.promptandtrust].includes(trustLevel)) {\n            return this.connectionrequest(peerName, info).then((connect) => {\n                if (connect) {\n                    console.log(\"Decided to connect to \" + peerName);\n                }else{\n                    console.log(\"Decided not to connect to \" + peerName);\n                }\n                return connect;\n            }, (e)=> {console.log(\"Error in connection request\", e); return false});\n        }else{\n            console.log(\"will connect to \" + peerName);\n            return Promise.resolve(true);\n        }\n    }\n    trustLevels = trustLevels\n    suspicionLevels = suspicionLevels\n    userCategories = {\n        theoneandonly: {knownPubKey: true, knownName: true, otherNamesForPubKey: false, otherPubKeyForName: false,\n            explanation: \"you know this person by the public key provided and don't now anyone else by this name or public key\",\n            suspiciousness: suspicionLevels.trusted,\n            category: \"theoneandonly\"\n        },\n        knownwithknownaliases: {knownPubKey: true, knownName: true, otherNamesForPubKey: true, otherPubKeyForName: false,\n            explanation: \"you know this person by the public key provided, but you also know them by other names\",\n            suspiciousness: suspicionLevels.slightlyodd,\n            category: \"knownwithknownaliases\"\n        },\n        possiblenamechange: {knownPubKey: true, knownName: false, otherNamesForPubKey: 1, otherPubKeyForName: false,\n            explanation: \"you recognize the public key but know it by a different name\",\n            suspiciousness: suspicionLevels.slightlyodd,\n            category: \"possiblenamechange\"\n        },\n        possiblesharedpubkey: {knownPubKey: true, knownName: false, otherNamesForPubKey: true, otherPubKeyForName: false,\n            explanation: \"you recognize the public key but know it by more than one other name\",\n            suspiciousness: suspicionLevels.slightlyodd,\n            category: \"possiblesharedpubkey\"\n        },\n        nameswapcollision: {knownPubKey: true, knownName: false, otherNamesForPubKey: true, otherPubKeyForName: true,\n            explanation: \"someone you know tried to change their name to the name of someone else you know\",\n            suspiciousness: suspicionLevels.odd,\n            category: \"nameswapcollision\"\n        },\n        //___________________________________________________________________________________\n        pretender: {knownPubKey: false, knownName: false, otherNamesForPubKey: false, otherPubKeyForName: true,\n            explanation: \"someone you don't know is using the name of someone you do know\",\n            suspiciousness: suspicionLevels.veryodd,\n            category: \"pretender\"\n        },\n        nevermet: {knownPubKey: false, knownName: false, otherNamesForPubKey: false, otherPubKeyForName: false,\n            explanation: \"you don't know anyone with this pub key or name, you probably just haven't met yet\",\n            suspiciousness: suspicionLevels.notsuspicious,\n            category: \"nevermet\"\n        }\n    }\n\n\n    trustConfigs = {\n        alwaysprompt: {\n            theoneandonly: trustLevels.promptandtrust,\n            knownwithknownaliases: trustLevels.promptandtrust,\n            possiblenamechange: trustLevels.promptandtrust,\n            possiblesharedpubkey: trustLevels.promptandtrust,\n            nameswapcollision: trustLevels.promptandtrust,\n            pretender: trustLevels.promptandtrust,\n            nevermet: trustLevels.promptandtrust\n        },\n        strict: {\n            theoneandonly: trustLevels.connectandtrust,\n            knownwithknownaliases: trustLevels.promptandtrust,\n            possiblenamechange: trustLevels.promptandtrust,\n            possiblesharedpubkey: trustLevels.promptandtrust,\n            nameswapcollision: trustLevels.promptandtrust,\n            pretender: trustLevels.promptandtrust,\n            nevermet: trustLevels.promptandtrust\n        },\n        strictandquiet: {\n            theoneandonly: trustLevels.connectandtrust,\n            knownwithknownaliases: trustLevels.reject,\n            possiblenamechange: trustLevels.reject,\n            possiblesharedpubkey: trustLevels.reject,\n            nameswapcollision: trustLevels.reject,\n            pretender: trustLevels.reject,\n            nevermet: trustLevels.promptandtrust\n        },\n        moderate: {\n            theoneandonly: trustLevels.connectandtrust,\n            knownwithknownaliases: trustLevels.connectandtrust,\n            possiblenamechange: trustLevels.connectandtrust,\n            possiblesharedpubkey: trustLevels.connectandtrust,\n            nameswapcollision: trustLevels.promptandtrust,\n            pretender: trustLevels.promptandtrust,\n            nevermet: trustLevels.promptandtrust\n        },\n        moderateandquiet: {\n            theoneandonly: trustLevels.connectandtrust,\n            knownwithknownaliases: trustLevels.connectandtrust,\n            possiblenamechange: trustLevels.connectandtrust,\n            possiblesharedpubkey: trustLevels.connectandtrust,\n            nameswapcollision: trustLevels.reject,\n            pretender: trustLevels.reject,\n            nevermet: trustLevels.promptandtrust\n        },\n        lax: {\n            theoneandonly: trustLevels.connectandtrust,\n            knownwithknownaliases: trustLevels.connectandtrust,\n            possiblenamechange: trustLevels.connectandtrust,\n            possiblesharedpubkey: trustLevels.connectandtrust,\n            nameswapcollision: trustLevels.promptandtrust,\n            pretender: trustLevels.promptandtrust,\n            nevermet: trustLevels.connectandtrust\n        },\n        unsafe:{\n            theoneandonly: trustLevels.connectandtrust,\n            knownwithknownaliases: trustLevels.connectandtrust,\n            possiblenamechange: trustLevels.connectandtrust,\n            possiblesharedpubkey: trustLevels.connectandtrust,\n            nameswapcollision: trustLevels.connectandtrust,\n            pretender: trustLevels.connectandtrust,\n            nevermet: trustLevels.connectandtrust\n        },\n        rejectall: {\n            theoneandonly: trustLevels.reject,\n            knownwithknownaliases: trustLevels.reject,\n            possiblenamechange: trustLevels.reject,\n            possiblesharedpubkey: trustLevels.reject,\n            nameswapcollision: trustLevels.reject,\n            pretender: trustLevels.reject,\n            nevermet: trustLevels.reject\n        }\n    }\n    categorizeUser(info){\n        if (info.knownPubKey){// we know this pubkey\n            if (info.knownName) { // we know this pubkey by this name (but maybe other names too?)\n                if (info.otherPubKeyForName) {\n                    throw new Error(\"knownName should mean that this name matches the pubkey so therefore otherPubKeyForName should be null\");\n                }else{ // we don't know of any other pubkeys for this name\n                    if (info.otherNamesForPubKey.length === 0) { // we don't know of any other names for this pubkey\n                        return this.userCategories.theoneandonly;\n                    }else{ // we know of other names for this pubkey (and we know this name as well)\n                        return this.userCategories.knownwithknownaliases;\n                    }\n                }\n            }else{ // we know this pubkey but not by this name\n                if (info.otherNamesForPubKey.length === 0) {\n                    throw new Error(\"knownPubKey should mean that this pubkey matches at least one name so if knownName is false then there should be at least one other name for this pubkey\");\n                }else if (info.otherNamesForPubKey.length === 1) { // we know this pubkey by one other name\n                    if (info.otherPubKeyForName) {\n                        return this.userCategories.nameswapcollision; // we know this pubkey by one other name and we know another pubkey by this name : VERY SUSPICIOUS\n                    }else{\n                        return this.userCategories.possiblenamechange; // we know this pubkey by one other name and we don't know another pubkey by this name\n                    }\n                }else{// we know this pubkey by more than one other name\n                    if (info.otherPubKeyForName) {\n                        return this.userCategories.nameswapcollision; // we know this pubkey by more than one other name and we know another pubkey by this name : VERY SUSPICIOUS\n                    }else{\n                        return this.userCategories.possiblesharedpubkey; // we know this pubkey by more than one other name and we don't know another pubkey by this name\n                    }\n                }\n            }\n        }else{\n            if (info.otherPubKeyForName) {\n                return this.userCategories.pretender;\n            }else{\n                return this.userCategories.nevermet;\n            }\n        }\n    }\n\n    checkTrust({peerName, bareName, userInfo, providedPubKey, peerNames, knownPubKey, knownName, otherNamesForPubKey, otherPubKeyForName, completedChallenge,\n        explanation, suspiciousness, category}) {\n        console.log(\"Checking trust for \" + peerName, category, this.trustConfig)\n        return this.trustConfig[category];\n    }\n    connectionrequest(peerName, info) {\n        // If auto-accept is enabled, automatically accept\n        if (this.autoAcceptConnections) {\n            console.log(\"Auto-accepting connection request from\", peerName);\n            return Promise.resolve(true);\n        }\n        \n        // Otherwise, prompt whether to connect to a peer\n        // This can be overridden by listening to the 'connectionrequest' event\n        let answer = confirm(\"Do you want to connect to \" + peerName + \"?\");\n        return Promise.resolve(answer);\n    }\n    trustOrChallenge(peerName) {\n        this.keys.getPublicKey(peerName).then((publicKey) => {\n            if (!publicKey) {\n                console.log(\"No public key found for \" + peerName);\n                let info = this.completeUserInfo[peerName];\n                \n                // If info doesn't exist, create it with default values\n                if (!info) {\n                    info = this._getFullUserInfo(peerName, {});\n                    const trustLevel = this.checkTrust(info);\n                    info.trustLevel = trustLevel;\n                    info.trustLevelString = Object.keys(this.trustLevels).find((key) => this.trustLevels[key] === trustLevel);\n                    this.completeUserInfo[peerName] = info;\n                }\n                \n                const trustLevel = info.trustLevel;\n\n                if ([this.trustLevels.reject].includes(trustLevel)) {\n                    console.error(\"Rejecting connection to \" + peerName);\n                    this.untrust(peerName);\n                    return;\n                }else if ([this.trustLevels.connectandprompt].includes(trustLevel)) {\n                    this.connectionrequest(peerName, info).then((connect) => {\n                        if (connect) {\n                            this.trust(peerName);\n                        }else{\n                            this.untrust(peerName);\n                        }\n                    });\n                    return;\n                }else if ([this.trustLevels.promptandtrust, this.trustLevels.connectandtrust].includes(trustLevel)) {\n                    this.trust(peerName);\n                }\n            }else{\n                this.challenge(peerName);\n            }\n        });\n    }\n    _returnPublicKey(challenge, senderName) {\n        console.log(\"Challenge received from \" + senderName);\n        return this.keys.sign(challenge).then((signature) => {\n            let answer =  {publicKeyString: this.keys.publicKeyString, signature: signature};\n            console.log(\"Returning public key to \" + senderName, answer);\n            return answer;\n        });\n    }\n    reset(){\n        this.keys.reset();\n        this.validatedPeers = [];\n    }\n    trust(peerName){\n        /* trust a peer, assuming they give you a public key they are abe to sign, save that public key to their name */\n        let oldPublicKeyString = this.keys.getPublicKeyString(peerName);\n        let challengeString = this.keys.getChallengeString();\n        return this.sendRTCQuestion(\"identify\", challengeString, peerName).then(({publicKeyString, signature}) => {\n             if (oldPublicKeyString && (oldPublicKeyString !== publicKeyString)) {\n                console.error(\"Public key changed for \" + peerName, oldPublicKeyString, publicKeyString);\n                throw new Error(\"Public key changed for \" + peerName);\n            }\n            return this.keys.verify(publicKeyString, signature, challengeString).then((valid) => {\n                if (valid) {\n                    console.log(\"Signature valid for \" + peerName + \", trusting and saving public key\");\n                    // Check if this public key is already registered to a different name\n                    const existingPeers = this.keys.getPeerNames(publicKeyString);\n                    if (existingPeers.length > 0 && !existingPeers.includes(peerName)) {\n                        // Public key is registered to a different name - update the mapping\n                        console.log(\"Public key already registered to\", existingPeers, \"updating to\", peerName);\n                        // Remove old name mappings\n                        existingPeers.forEach(oldName => {\n                            delete this.keys._knownHostsStrings[oldName];\n                        });\n                        // Update storage after removing old mappings\n                        if (this.keys.storage) {\n                            this.keys.storage.setItem(\"knownHostsStrings\", JSON.stringify(this.keys._knownHostsStrings));\n                        }\n                    }\n                    this.keys.savePublicKeyString(peerName, publicKeyString);\n                    // Only add to validatedPeers if not already there (prevent duplicates)\n                    if (!this.validatedPeers.includes(peerName)) {\n                        this.validatedPeers.push(peerName);\n                        this.onValidatedPeer(peerName, true);\n                    }\n                    return true;\n                } else {\n                    console.error(\"Signature invalid for \" + peerName);\n                    this.untrust(peerName);\n                    this.onValidationFailed(peerName);\n                    return false;\n                }\n            });\n        })\n    }\n\n    challenge(peerName) {\n        /* challenge a peer to prove they have the private key corresponding to the public key you have saved for them */\n        let publicKeyString = this.keys.getPublicKeyString(peerName);\n        let challengeString = this.keys.getChallengeString();\n        return this.sendRTCQuestion(\"challenge\", challengeString, peerName).then((signature) => {\n            return this.keys.verify(publicKeyString, signature, challengeString).then((valid) => {\n                console.log(\"Signature valid for \" + peerName, valid);\n                // Only add to validatedPeers if not already there (prevent duplicates)\n                if (!this.validatedPeers.includes(peerName)) {\n                    this.validatedPeers.push(peerName);\n                    console.log(\"Validated peers\", this.validatedPeers);\n                    this.onValidatedPeer(peerName);\n                }\n\n                return valid;\n            }, (err) => {\n                console.error(\"Error verifying signature of \"+ peerName, err);\n                this.untrust(peerName);\n                this.onValidationFailed(peerName);\n                throw err;\n            });\n        });\n    }\n    on(event, callback) {\n        if (event === \"connectionrequest\"){\n            this.connectionrequest = callback;\n            return super.on(event, callback);\n        }else{\n            return super.on(event, callback);\n        }\n    }\n\n    onValidatedPeer(peerName, trusting=false) {\n        if (trusting) {\n            console.log(\"Trusting peer \" + peerName + \" is who they say they are.\");\n        }\n        console.log(\"Peer \" + peerName + \" validated\");\n        this.emit('validation', peerName, trusting);\n        // Don't emit connectedtopeer here - it causes infinite loops\n        // ChatManager now listens to 'validation' events to add users after validation\n    }\n    onValidationFailed(peerName, message) {\n        console.error(\"Peer \" + peerName + \" validation failed\" + (message ? \": \" + message : \"\"));\n        this.emit('validationfailure', peerName, message);\n    }\n    untrust(peerName) {\n        /* remove a public key from a peer */\n\n        this.keys.removePublicKey(peerName);\n        console.error(\"Untrusting peer \" + peerName, this.validatedPeers);\n        if (this.validatedPeers.includes(peerName)) {\n            this.validatedPeers = this.validatedPeers.filter((name) => name !== peerName);\n        }\n        console.error(\"Disconnecting from untrusted peer \" + peerName, this.validatedPeers);\n        this.disconnectFromUser(peerName);\n    }\n    _sign(challengeString, peerName) {return this.keys.sign(challengeString);}\n    register(identity) {return this.keys.register(identity);}\n}\n\nexport { SignedMQTTRTCClient };\n\n\n","/**\n * VideoInterface - Interface for video element components\n * \n * This interface defines methods for video elements that display MediaStreams.\n * This allows for custom video implementations (e.g., custom HTML elements,\n * React components, Canvas-based rendering, etc.)\n * \n * @interface VideoInterface\n */\nexport class VideoInterface {\n  /**\n   * Set the video source (MediaStream)\n   * @param {MediaStream|null} stream - MediaStream to display, or null to clear\n   */\n  setStream(stream) {\n    throw new Error('setStream must be implemented');\n  }\n\n  /**\n   * Get the current video source\n   * @returns {MediaStream|null} Current stream or null\n   */\n  getStream() {\n    throw new Error('getStream must be implemented');\n  }\n\n  /**\n   * Show the video element\n   */\n  show() {\n    // Optional - no-op by default\n  }\n\n  /**\n   * Hide the video element\n   */\n  hide() {\n    // Optional - no-op by default\n  }\n\n  /**\n   * Set muted state\n   * @param {boolean} muted - Whether video should be muted\n   */\n  setMuted(muted) {\n    // Optional - no-op by default\n  }\n\n  /**\n   * Get muted state\n   * @returns {boolean} Whether video is muted\n   */\n  isMuted() {\n    return false;\n  }\n\n  /**\n   * Set autoplay\n   * @param {boolean} autoplay - Whether video should autoplay\n   */\n  setAutoplay(autoplay) {\n    // Optional - no-op by default\n  }\n\n  /**\n   * Set playsinline (for mobile)\n   * @param {boolean} playsinline - Whether video should play inline\n   */\n  setPlaysinline(playsinline) {\n    // Optional - no-op by default\n  }\n\n  /**\n   * Get the underlying element (for DOM manipulation if needed)\n   * @returns {HTMLElement|null} The underlying element\n   */\n  getElement() {\n    return null;\n  }\n\n  /**\n   * Cleanup and destroy the video element\n   */\n  destroy() {\n    // Optional - no-op by default\n  }\n}\n\n","/**\n * VideoElement - Default HTML video element implementation of VideoInterface\n * \n * This is the default implementation of VideoInterface using a standard HTML video element.\n * You can create custom implementations for different platforms or rendering methods.\n * \n * Usage:\n *   import { VideoElement } from './video-element.js';\n *   \n *   const video = new VideoElement();\n *   video.setStream(myMediaStream);\n *   document.body.appendChild(video.getElement());\n * \n * @implements VideoInterface\n */\n\nimport { VideoInterface } from '../core/interfaces/video-interface.js';\n\nclass VideoElement extends VideoInterface {\n  /**\n   * Create a new VideoElement instance\n   * @param {Object} options - Configuration options\n   * @param {boolean} options.autoplay - Whether to autoplay (default: true)\n   * @param {boolean} options.playsinline - Whether to play inline on mobile (default: true)\n   * @param {boolean} options.muted - Whether to start muted (default: false)\n   */\n  constructor(options = {}) {\n    super();\n    \n    this.options = {\n      autoplay: options.autoplay !== false, // Default: true\n      playsinline: options.playsinline !== false, // Default: true\n      muted: options.muted || false, // Default: false\n      ...options\n    };\n    \n    // Create HTML video element\n    this.element = document.createElement('video');\n    this.element.autoplay = this.options.autoplay;\n    this.element.playsinline = this.options.playsinline;\n    this.element.muted = this.options.muted;\n    \n    // Set initial styles\n    this.element.style.width = '100%';\n    this.element.style.height = 'auto';\n    this.element.style.display = 'block';\n  }\n\n  /**\n   * Set the video source (MediaStream)\n   * @param {MediaStream|null} stream - MediaStream to display, or null to clear\n   */\n  setStream(stream) {\n    if (stream && stream instanceof MediaStream) {\n      this.element.srcObject = stream;\n    } else if (stream === null) {\n      this.element.srcObject = null;\n    } else {\n      console.warn('VideoElement.setStream: Invalid stream provided', stream);\n    }\n  }\n\n  /**\n   * Get the current video source\n   * @returns {MediaStream|null} Current stream or null\n   */\n  getStream() {\n    return this.element.srcObject;\n  }\n\n  /**\n   * Show the video element\n   */\n  show() {\n    this.element.style.display = 'block';\n  }\n\n  /**\n   * Hide the video element\n   */\n  hide() {\n    this.element.style.display = 'none';\n  }\n\n  /**\n   * Set muted state\n   * @param {boolean} muted - Whether video should be muted\n   */\n  setMuted(muted) {\n    this.element.muted = muted;\n  }\n\n  /**\n   * Get muted state\n   * @returns {boolean} Whether video is muted\n   */\n  isMuted() {\n    return this.element.muted;\n  }\n\n  /**\n   * Set autoplay\n   * @param {boolean} autoplay - Whether video should autoplay\n   */\n  setAutoplay(autoplay) {\n    this.element.autoplay = autoplay;\n  }\n\n  /**\n   * Set playsinline (for mobile)\n   * @param {boolean} playsinline - Whether video should play inline\n   */\n  setPlaysinline(playsinline) {\n    this.element.playsinline = playsinline;\n  }\n\n  /**\n   * Get the underlying element (for DOM manipulation if needed)\n   * @returns {HTMLElement} The underlying video element\n   */\n  getElement() {\n    return this.element;\n  }\n\n  /**\n   * Cleanup and destroy the video element\n   */\n  destroy() {\n    // Stop all tracks\n    if (this.element.srcObject) {\n      this.element.srcObject.getTracks().forEach(track => track.stop());\n      this.element.srcObject = null;\n    }\n    \n    // Remove from DOM if attached\n    if (this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  }\n}\n\nexport { VideoElement };\n\n","/**\n * VideoStreamDisplayBase - Abstract base class for video stream display components\n * \n * This abstract class defines the contract for displaying video streams from\n * multiple peers. It is implementation-agnostic and can be implemented using\n * HTMLElement, React, Vue, or any other framework.\n * \n * Implements StreamDisplayInterface contract.\n * \n * @abstract\n * @implements StreamDisplayInterface\n */\n\nimport { StreamDisplayInterface } from './stream-display-interface.js';\n\nexport class VideoStreamDisplayBase {\n  /**\n   * Create a new VideoStreamDisplayBase instance\n   * @param {HTMLElement|Object} container - Container element or container object\n   * @param {Object} options - Configuration options\n   * @param {string} options.localVideoSize - Size of local video overlay (default: '30%')\n   * @param {string} options.localVideoPosition - Position of local video (default: 'top-right')\n   * @param {class} options.VideoClass - Video class implementing VideoInterface (optional)\n   */\n  constructor(container, options = {}) {\n    if (new.target === VideoStreamDisplayBase) {\n      throw new Error('VideoStreamDisplayBase is abstract and cannot be instantiated directly');\n    }\n    \n    if (!container) {\n      throw new Error('VideoStreamDisplayBase requires a container');\n    }\n    \n    this.container = container;\n    this.options = {\n      localVideoSize: options.localVideoSize || '30%',\n      localVideoPosition: options.localVideoPosition || 'top-right',\n      VideoClass: options.VideoClass,\n      ...options\n    };\n    \n    this.activeStreams = {}; // Track streams by peer name\n  }\n\n  /**\n   * Set video streams for a peer\n   * Must be implemented by subclasses\n   * @param {string} peerName - Name of the peer\n   * @param {Object} streams - Stream objects\n   * @param {MediaStream} streams.localStream - Local media stream\n   * @param {MediaStream} streams.remoteStream - Remote media stream\n   * @abstract\n   */\n  setStreams(peerName, { localStream, remoteStream }) {\n    throw new Error('setStreams must be implemented by subclass');\n  }\n\n  /**\n   * Remove video streams for a peer\n   * Must be implemented by subclasses\n   * @param {string} peerName - Name of the peer\n   * @abstract\n   */\n  removeStreams(peerName) {\n    throw new Error('removeStreams must be implemented by subclass');\n  }\n\n  /**\n   * Show the video container\n   * Default implementation - can be overridden\n   */\n  show() {\n    if (this.container && this.container.style) {\n      if (this.hasActiveStreams()) {\n        this.container.style.display = 'block';\n      }\n    }\n  }\n\n  /**\n   * Hide the video container\n   * Default implementation - can be overridden\n   */\n  hide() {\n    if (this.container && this.container.style) {\n      this.container.style.display = 'none';\n    }\n  }\n\n  /**\n   * Check if there are active streams\n   * @returns {boolean} True if there are active streams\n   */\n  hasActiveStreams() {\n    return Object.keys(this.activeStreams).length > 0;\n  }\n\n  /**\n   * Get list of active peer names\n   * @returns {string[]} Array of peer names with active streams\n   */\n  getActivePeers() {\n    return Object.keys(this.activeStreams);\n  }\n\n  /**\n   * Remove all video streams\n   * Default implementation - can be overridden\n   */\n  removeAllStreams() {\n    const peerNames = Object.keys(this.activeStreams);\n    peerNames.forEach(peerName => this.removeStreams(peerName));\n  }\n\n  /**\n   * Setup track end handlers for a stream\n   * Default implementation - can be overridden\n   * @param {string} peerName - Name of the peer\n   * @param {MediaStream} localStream - Local stream\n   * @param {MediaStream} remoteStream - Remote stream\n   * @protected\n   */\n  _setupTrackEndHandlers(peerName, localStream, remoteStream) {\n    const streamData = this.activeStreams[peerName];\n    if (!streamData) return;\n\n    // Remove existing handlers\n    if (streamData.trackEndHandlers) {\n      streamData.trackEndHandlers.forEach(handler => {\n        if (handler.track && handler.track.onended) {\n          handler.track.onended = null;\n        }\n      });\n    }\n    streamData.trackEndHandlers = [];\n\n    // Setup new handlers\n    const handleTrackEnd = () => {\n      console.log(`Stream track ended for ${peerName}`);\n      this.removeStreams(peerName);\n    };\n\n    if (remoteStream && remoteStream instanceof MediaStream && typeof remoteStream.getTracks === 'function') {\n      remoteStream.getTracks().forEach(track => {\n        track.onended = handleTrackEnd;\n        streamData.trackEndHandlers.push({ track, type: 'remote' });\n      });\n    }\n    if (localStream && localStream instanceof MediaStream && typeof localStream.getTracks === 'function') {\n      localStream.getTracks().forEach(track => {\n        track.onended = handleTrackEnd;\n        streamData.trackEndHandlers.push({ track, type: 'local' });\n      });\n    }\n  }\n\n  /**\n   * Stop all tracks in a stream\n   * @param {MediaStream} stream - Media stream\n   * @protected\n   */\n  _stopStreamTracks(stream) {\n    if (stream && stream instanceof MediaStream && typeof stream.getTracks === 'function') {\n      stream.getTracks().forEach(track => {\n        track.stop();\n      });\n    }\n  }\n\n  /**\n   * Setup CSS styles for video elements\n   * Must be implemented by subclasses if styles are needed\n   * @protected\n   * @abstract\n   */\n  _setupStyles() {\n    // Optional - no-op by default\n  }\n\n  /**\n   * Create a video container element for a peer\n   * Must be implemented by subclasses\n   * @param {string} peerName - Name of the peer\n   * @returns {Object} Object with container and video elements\n   * @protected\n   * @abstract\n   */\n  _createVideoContainer(peerName) {\n    throw new Error('_createVideoContainer must be implemented by subclass');\n  }\n}\n\n","/**\n * VideoStreamDisplay - Standalone component for displaying WebRTC video streams in chat\n * \n * HTMLElement-based implementation that extends VideoStreamDisplayBase,\n * which provides the abstract contract for video stream display.\n * \n * A modular component that manages video elements for multiple peer connections.\n * Uses VideoInterface implementations for local and remote video elements.\n * \n * Usage:\n *   import { VideoStreamDisplay } from './video-stream-display.js';\n *   import { VideoElement } from './video-element.js';\n *   \n *   const videoDisplay = new VideoStreamDisplay(containerElement, {\n *     VideoClass: VideoElement  // Optional: custom Video implementation\n *   });\n *   videoDisplay.setStreams('peerName', { localStream, remoteStream });\n *   videoDisplay.removeStreams('peerName');\n * \n * Features:\n * - Multiple peer support (one video container per peer)\n * - Automatic stream management\n * - Cleanup on stream end\n * - Responsive video layout\n * - Local video overlay (small preview)\n * - Remote video main display\n * - Pluggable Video implementations via VideoInterface\n * \n * @module video-stream-display\n */\n\nimport { VideoElement } from './video-element.js';\nimport { VideoInterface } from '../core/interfaces/video-interface.js';\nimport { VideoStreamDisplayBase } from '../core/interfaces/video-stream-display-base.js';\n\nclass VideoStreamDisplay extends VideoStreamDisplayBase {\n  /**\n   * Create a new VideoStreamDisplay instance\n   * @param {HTMLElement} container - Container element to append video elements to\n   * @param {Object} options - Configuration options\n   * @param {string} options.localVideoSize - Size of local video overlay (default: '30%')\n   * @param {string} options.localVideoPosition - Position of local video (default: 'top-right')\n   * @param {class} options.VideoClass - Video class implementing VideoInterface (default: VideoElement)\n   */\n  constructor(container, options = {}) {\n    super(container, {\n      localVideoSize: options.localVideoSize || '30%',\n      localVideoPosition: options.localVideoPosition || 'top-right',\n      VideoClass: options.VideoClass || VideoElement,\n      ...options\n    });\n    \n    this.VideoClass = this.options.VideoClass;\n    \n    // Validate VideoClass implements VideoInterface\n    if (!this.VideoClass || typeof this.VideoClass !== 'function') {\n      throw new Error('VideoClass must be a class implementing VideoInterface');\n    }\n    \n    // Ensure container has grid class from the start\n    if (this.container && !this.container.classList.contains('video-stream-display-container')) {\n      this.container.classList.add('video-stream-display-container');\n    }\n    \n    this._setupStyles();\n    this._localStream = null;\n  }\n\n  /**\n   * Set up CSS styles for video elements\n   * Implements VideoStreamDisplayBase._setupStyles\n   * @protected\n   */\n  _setupStyles() {\n    // Get the root node (handles shadow DOM)\n    const root = this.container.getRootNode ? this.container.getRootNode() : document;\n    \n    // Check if styles already exist in the root\n    if (root.querySelector) {\n      const existingStyle = root.querySelector('style[data-video-stream-display]');\n      if (existingStyle) {\n        const version = existingStyle.getAttribute('data-style-version');\n        if (version === '2') {\n          return;\n        }\n        if (existingStyle.parentNode) {\n          existingStyle.parentNode.removeChild(existingStyle);\n        }\n      }\n    }\n\n    const style = document.createElement('style');\n    style.setAttribute('data-video-stream-display', 'true');\n    style.setAttribute('data-style-version', '2');\n    style.textContent = `\n      .video-stream-display-container {\n        display: none;\n        gap: 10px;\n        width: 100%;\n        padding: 10px;\n        min-height: 300px;\n      }\n      .video-stream-display-container.is-active {\n        display: grid !important;\n      }\n      .video-stream-display-container.count-1 {\n        grid-template-columns: 1fr;\n        grid-template-rows: 1fr;\n      }\n      /* Two remote participants: place both side by side */\n      .video-stream-display-container.count-2 {\n        grid-template-columns: repeat(2, minmax(0, 1fr));\n        grid-template-rows: 1fr;\n      }\n      /* 3 people: three equal columns */\n      .video-stream-display-container.count-3 {\n        grid-template-columns: repeat(3, minmax(0, 1fr));\n        grid-template-rows: 1fr;\n      }\n      /* 4 people: 2x2 grid */\n      .video-stream-display-container.count-4 {\n        grid-template-columns: repeat(2, minmax(0, 1fr));\n        grid-template-rows: repeat(2, minmax(0, 1fr));\n      }\n      /* 5-6 people: 2x3 grid */\n      .video-stream-display-container.count-5,\n      .video-stream-display-container.count-6 {\n        grid-template-columns: repeat(3, minmax(0, 1fr));\n        grid-template-rows: repeat(2, minmax(0, 1fr));\n      }\n      /* 7-9 people: 3x3 grid */\n      .video-stream-display-container.count-7,\n      .video-stream-display-container.count-8,\n      .video-stream-display-container.count-9 {\n        grid-template-columns: repeat(3, 1fr);\n        grid-template-rows: repeat(3, 1fr);\n      }\n      /* 10+ people: auto-fit grid */\n      .video-stream-display-container.count-10-plus {\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        grid-auto-rows: minmax(150px, 1fr);\n      }\n      /* Two-person overlay layout */\n      .video-stream-display-container.two-person-overlay {\n        grid-template-columns: 1fr;\n        grid-template-rows: 1fr;\n      }\n      .video-stream-display-container.two-person-overlay .video-stream-container {\n        position: relative;\n      }\n      .video-stream-container {\n        position: relative;\n        width: 100%;\n        aspect-ratio: 16 / 9;\n        background: #000;\n        border-radius: 5px;\n        overflow: hidden;\n        border: 2px solid #333;\n      }\n      .video-stream-container video {\n        width: 100%;\n        height: 100%;\n        display: block;\n        object-fit: cover;\n      }\n      .video-stream-remote {\n        width: 100%;\n        height: 100%;\n      }\n      .video-stream-local {\n        display: none;\n        width: 0;\n        height: 0;\n        opacity: 0;\n        pointer-events: none;\n      }\n      .video-stream-display-container.two-person-overlay .video-stream-container:first-child .video-stream-local {\n        display: block !important;\n        position: absolute;\n        width: 30%;\n        max-width: 30%;\n        height: auto;\n        aspect-ratio: 16 / 9;\n        top: 10px;\n        right: 10px;\n        border: 2px solid white;\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n        border-radius: 5px;\n        background: #000;\n        opacity: 1 !important;\n        pointer-events: auto !important;\n        z-index: 10;\n      }\n      .video-stream-label {\n        position: absolute;\n        bottom: 10px;\n        left: 10px;\n        background: rgba(0, 0, 0, 0.7);\n        color: white;\n        padding: 4px 8px;\n        border-radius: 4px;\n        font-size: 12px;\n        z-index: 11;\n        pointer-events: none;\n      }\n    `;\n    \n    // Insert styles into the appropriate location\n    // For shadow DOM, we need to add to the shadow root\n    if (root instanceof ShadowRoot) {\n      // Shadow DOM - add to shadow root\n      root.appendChild(style);\n    } else if (root === document || root === document.documentElement) {\n      // Regular DOM - add to head\n      document.head.appendChild(style);\n    } else {\n      // Fallback - try to add to root or document head\n      try {\n        if (root.appendChild) {\n          root.appendChild(style);\n        } else {\n          document.head.appendChild(style);\n        }\n      } catch (e) {\n        // If all else fails, add to document head\n        document.head.appendChild(style);\n      }\n    }\n  }\n\n  /**\n   * Set video streams for a peer\n   * Implements VideoStreamDisplayBase.setStreams and StreamDisplayInterface.setStreams\n   * @param {string} peerName - Name of the peer\n   * @param {Object} streams - Stream objects\n   * @param {MediaStream} streams.localStream - Local media stream\n   * @param {MediaStream} streams.remoteStream - Remote media stream\n   */\n  setStreams(peerName, { localStream, remoteStream }) {\n    if (!peerName) {\n      throw new Error('peerName is required');\n    }\n\n    // Ensure container has grid class\n    if (!this.container.classList.contains('video-stream-display-container')) {\n      this.container.classList.add('video-stream-display-container');\n    }\n\n    // Get or create video container for this peer\n    let streamData = this.activeStreams[peerName];\n    \n    if (!streamData || !streamData.container) {\n      const { container, remoteVideo, localVideo, label } = this._createVideoContainer(peerName);\n      this.container.appendChild(container);\n      \n      // Initialize tracking\n      streamData = {\n        container,\n        remoteVideo, // VideoInterface instance\n        localVideo,  // VideoInterface instance\n        label,       // Label element\n        streams: {},\n        trackEndHandlers: []\n      };\n      this.activeStreams[peerName] = streamData;\n    }\n\n    // Set remote stream (always shown in grid)\n    if (remoteStream && remoteStream instanceof MediaStream) {\n      streamData.remoteVideo.setStream(remoteStream);\n      streamData.remoteVideo.show();\n      if (streamData.label) {\n        streamData.label.textContent = peerName;\n        streamData.label.style.display = 'block';\n      }\n    } else {\n      streamData.remoteVideo.setStream(null);\n      if (streamData.label) {\n        streamData.label.style.display = 'none';\n      }\n    }\n    \n    // Track latest local stream (may be reused across peers)\n    if (localStream instanceof MediaStream) {\n      this._localStream = localStream;\n    } else if (localStream === null) {\n      this._localStream = null;\n    }\n\n    // Store streams for cleanup\n    this.activeStreams[peerName].streams.local = localStream;\n    this.activeStreams[peerName].streams.remote = remoteStream;\n\n    // Setup track end handlers\n    this._setupTrackEndHandlers(peerName, localStream, remoteStream);\n\n    // Sync local video layout (overlay vs grid tile)\n    this._refreshLocalVideoLayout();\n\n    // Update grid layout based on number of participants\n    this._updateGridLayout();\n\n    this._updateContainerVisibility();\n  }\n  \n  /**\n   * Ensure local video is displayed either as overlay (1 remote) or grid tile (2+ remotes)\n   * @private\n   */\n  _refreshLocalVideoLayout() {\n    const remoteParticipants = Object.keys(this.activeStreams).filter(key => key !== '__local__');\n    const remoteCount = remoteParticipants.length;\n    const hasLocalStream = this._localStream instanceof MediaStream;\n\n    // Hide overlays by default\n    for (const peer of remoteParticipants) {\n      const data = this.activeStreams[peer];\n      if (data && data.localVideo) {\n        data.localVideo.setStream(null);\n        data.localVideo.hide();\n        const el = data.localVideo.getElement ? data.localVideo.getElement() : null;\n        if (el) {\n          el.style.display = 'none';\n        }\n      }\n    }\n\n    if (hasLocalStream && remoteCount === 1) {\n      const targetPeer = remoteParticipants[0];\n      const targetData = targetPeer ? this.activeStreams[targetPeer] : null;\n      if (targetData && targetData.localVideo) {\n        targetData.localVideo.setStream(this._localStream);\n        targetData.localVideo.show();\n        const overlayEl = targetData.localVideo.getElement ? targetData.localVideo.getElement() : null;\n        if (overlayEl) {\n          overlayEl.style.display = 'block';\n        }\n      }\n      this._deleteStreamData('__local__');\n    } else if (hasLocalStream && remoteCount >= 2) {\n      this._updateLocalVideoInGrid(this._localStream);\n    } else {\n      this._deleteStreamData('__local__');\n    }\n  }\n  \n  /**\n   * Update local video in grid for group calls (3+ participants)\n   * @param {MediaStream} localStream - Local video stream\n   * @private\n   */\n  _updateLocalVideoInGrid(localStream) {\n    const localVideoKey = '__local__';\n    let localStreamData = this.activeStreams[localVideoKey];\n    \n    if (!localStreamData || !localStreamData.container) {\n      // Create local video container\n      const { container, remoteVideo, label } = this._createVideoContainer(localVideoKey);\n      container.classList.add('local-video-container');\n      // Insert at the beginning for 3-person layout (local video first)\n      const firstChild = this.container.firstChild;\n      if (firstChild) {\n        this.container.insertBefore(container, firstChild);\n      } else {\n        this.container.appendChild(container);\n      }\n      \n      localStreamData = {\n        container,\n        remoteVideo, // Use remoteVideo element for local stream in grid\n        localVideo: null, // Not used for grid display\n        label,\n        streams: { local: localStream, remote: null },\n        trackEndHandlers: []\n      };\n      this.activeStreams[localVideoKey] = localStreamData;\n    }\n    \n    // Set local stream to the container\n    if (localStreamData.remoteVideo) {\n      localStreamData.remoteVideo.setStream(localStream);\n      localStreamData.remoteVideo.show();\n      if (localStreamData.label) {\n        localStreamData.label.textContent = 'You';\n        localStreamData.label.style.display = 'block';\n      }\n    }\n  }\n\n  /**\n   * Update grid layout based on number of active streams\n   * Supports unlimited participants with specific layouts\n   * @private\n   */\n  _updateGridLayout() {\n    // Count only remote participants (exclude local video container)\n    const remoteParticipants = Object.keys(this.activeStreams).filter(key => key !== '__local__');\n    const hasLocalVideoInGrid = this.activeStreams['__local__'] !== undefined;\n    const remoteCount = remoteParticipants.length;\n    const totalCount = remoteCount + (hasLocalVideoInGrid ? 1 : 0);\n    \n    // Remove all layout classes\n    const countClasses = Array.from(this.container.classList).filter(cls => cls.startsWith('count-'));\n    countClasses.forEach(cls => this.container.classList.remove(cls));\n    this.container.classList.remove('two-person-overlay');\n    \n    // Overlay layout for exactly one remote participant (classic 2-person view)\n    if (remoteCount === 1 && !hasLocalVideoInGrid && this._localStream instanceof MediaStream) {\n      this.container.classList.add('count-1');\n      this.container.classList.add('two-person-overlay');\n      console.log('Updated grid layout: two-person overlay mode');\n      return;\n    }\n    \n    // Apply layout based on total visible tiles\n    if (totalCount <= 1) {\n      this.container.classList.add('count-1');\n    } else if (totalCount === 2) {\n      this.container.classList.add('count-2');\n    } else if (totalCount === 3) {\n      this.container.classList.add('count-3');\n    } else if (totalCount === 4) {\n      this.container.classList.add('count-4');\n    } else if (totalCount === 5 || totalCount === 6) {\n      this.container.classList.add(`count-${totalCount}`);\n    } else if (totalCount >= 7 && totalCount <= 9) {\n      this.container.classList.add(`count-${totalCount}`);\n    } else if (totalCount >= 10) {\n      this.container.classList.add('count-10-plus');\n    }\n    \n    const localContribution = hasLocalVideoInGrid ? 1 : 0;\n    console.log(`Updated grid layout: ${totalCount} tiles (${remoteCount} remote + ${localContribution} local)`);\n  }\n\n  /**\n   * Create a video container element for a peer\n   * Implements VideoStreamDisplayBase._createVideoContainer\n   * @param {string} peerName - Name of the peer\n   * @returns {Object} Object with container, remoteVideo, localVideo, and label\n   * @protected\n   */\n  _createVideoContainer(peerName) {\n    const container = document.createElement('div');\n    container.className = 'video-stream-container';\n    container.setAttribute('data-peer', peerName);\n\n    // Create remote video using VideoInterface implementation\n    const remoteVideo = new this.VideoClass({\n      autoplay: true,\n      playsinline: true,\n      muted: false\n    });\n    const remoteVideoElement = remoteVideo.getElement();\n    if (remoteVideoElement) {\n      remoteVideoElement.className = 'video-stream-remote';\n      remoteVideoElement.setAttribute('data-peer', peerName);\n      remoteVideoElement.setAttribute('data-type', 'remote');\n      container.appendChild(remoteVideoElement);\n    }\n\n    // Create label for participant name\n    const label = document.createElement('div');\n    label.className = 'video-stream-label';\n    label.textContent = peerName;\n    label.setAttribute('data-peer', peerName);\n    container.appendChild(label);\n\n    // Create local video using VideoInterface implementation for overlay mode\n    const localVideo = new this.VideoClass({\n      autoplay: true,\n      playsinline: true,\n      muted: true // Mute local video to avoid feedback\n    });\n    const localVideoElement = localVideo.getElement();\n    if (localVideoElement) {\n      localVideoElement.className = 'video-stream-local';\n      localVideoElement.setAttribute('data-peer', peerName);\n      localVideoElement.setAttribute('data-type', 'local');\n      container.appendChild(localVideoElement);\n    }\n\n    return { container, remoteVideo, localVideo, label };\n  }\n\n  /**\n   * Delete stream data for a peer without triggering layout updates\n   * @param {string} peerName\n   * @private\n   */\n  _deleteStreamData(peerName) {\n    const streamData = this.activeStreams[peerName];\n    if (!streamData) {\n      return;\n    }\n\n    // Only stop REMOTE tracks (local tracks may be shared with other connections)\n    // The RTC layer handles stopping local tracks when appropriate\n    if (streamData.streams) {\n      // Don't stop local stream tracks - they're managed by RTC layer\n      // this._stopStreamTracks(streamData.streams.local);\n      this._stopStreamTracks(streamData.streams.remote);\n    }\n\n    // Remove track end handlers\n    if (streamData.trackEndHandlers) {\n      streamData.trackEndHandlers.forEach(handler => {\n        if (handler.track && handler.track.onended) {\n          handler.track.onended = null;\n        }\n      });\n    }\n\n    // Clear video elements using VideoInterface methods\n    if (streamData.remoteVideo && typeof streamData.remoteVideo.setStream === 'function') {\n      streamData.remoteVideo.setStream(null);\n      if (typeof streamData.remoteVideo.destroy === 'function') {\n        streamData.remoteVideo.destroy();\n      }\n    }\n    if (streamData.localVideo && typeof streamData.localVideo.setStream === 'function') {\n      streamData.localVideo.setStream(null);\n      if (typeof streamData.localVideo.destroy === 'function') {\n        streamData.localVideo.destroy();\n      }\n    }\n\n    // Remove container from DOM\n    if (streamData.container && streamData.container.parentNode) {\n      streamData.container.parentNode.removeChild(streamData.container);\n    }\n\n    delete this.activeStreams[peerName];\n  }\n\n  // _setupTrackEndHandlers is inherited from VideoStreamDisplayBase\n\n  /**\n   * Remove video streams for a peer\n   * Implements VideoStreamDisplayBase.removeStreams and StreamDisplayInterface.removeStreams\n   * @param {string} peerName - Name of the peer\n   */\n  removeStreams(peerName) {\n    if (!this.activeStreams[peerName]) {\n      return;\n    }\n\n    this._deleteStreamData(peerName);\n\n    // Re-sync overlay/grid state after removal\n    this._refreshLocalVideoLayout();\n\n    // Update grid layout\n    this._updateGridLayout();\n\n    this._updateContainerVisibility();\n  }\n\n  /**\n   * Toggle container visibility class based on active streams\n   * @private\n   */\n  _updateContainerVisibility() {\n    const hasStreams = Object.keys(this.activeStreams).length > 0;\n    this.container.classList.toggle('is-active', hasStreams);\n  }\n\n  // removeAllStreams, hasActiveStreams, getActivePeers, show, and hide\n  // are inherited from VideoStreamDisplayBase\n}\n\nexport { VideoStreamDisplay };\n\n","/**\n * AudioStreamDisplay - Standalone component for displaying WebRTC audio streams in chat\n * \n * A modular component that manages audio elements for multiple peer connections.\n * Can be used independently or integrated into other components like ChatBox.\n * \n * Usage:\n *   import { AudioStreamDisplay } from './audio-stream-display.js';\n *   \n *   const audioDisplay = new AudioStreamDisplay(containerElement);\n *   audioDisplay.setStreams('peerName', { localStream, remoteStream });\n *   audioDisplay.removeStreams('peerName');\n * \n * Features:\n * - Multiple peer support (one audio element per peer)\n * - Automatic stream management\n * - Cleanup on stream end\n * - Visual indicators for active audio calls\n * - Optional visual waveform or status display\n * \n * @module audio-stream-display\n */\n\nclass AudioStreamDisplay {\n  /**\n   * Create a new AudioStreamDisplay instance\n   * @param {HTMLElement} container - Container element to append audio elements to\n   * @param {Object} options - Configuration options\n   * @param {boolean} options.showVisualIndicator - Show visual indicator for active calls (default: true)\n   * @param {boolean} options.showWaveform - Show audio waveform visualization (default: false)\n   */\n  constructor(container, options = {}) {\n    if (!container) {\n      throw new Error('AudioStreamDisplay requires a container element');\n    }\n    \n    this.container = container;\n    this.options = {\n      showVisualIndicator: options.showVisualIndicator !== false,\n      showWaveform: options.showWaveform || false,\n      ...options\n    };\n    \n    this.activeStreams = {}; // Track streams by peer name\n    this._setupStyles();\n  }\n\n  /**\n   * Set up CSS styles for audio elements\n   * @private\n   */\n  _setupStyles() {\n    // Get the root node (handles shadow DOM)\n    const root = this.container.getRootNode ? this.container.getRootNode() : document;\n    \n    // Check if styles already exist in the root\n    if (root.querySelector && root.querySelector('style[data-audio-stream-display]')) {\n      return;\n    }\n\n    const style = document.createElement('style');\n    style.setAttribute('data-audio-stream-display', 'true');\n    style.textContent = `\n      .audio-stream-container {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n        padding: 8px;\n        margin-bottom: 5px;\n        background: rgba(0, 0, 0, 0.05);\n        border-radius: 5px;\n        border-left: 3px solid #4CAF50;\n      }\n      .audio-stream-indicator {\n        width: 12px;\n        height: 12px;\n        border-radius: 50%;\n        background: #4CAF50;\n        animation: pulse 2s infinite;\n      }\n      @keyframes pulse {\n        0%, 100% { opacity: 1; }\n        50% { opacity: 0.5; }\n      }\n      .audio-stream-label {\n        font-size: 0.9em;\n        color: #333;\n        flex: 1;\n      }\n      .audio-stream-controls {\n        display: flex;\n        gap: 5px;\n      }\n      .audio-stream-mute-btn {\n        padding: 4px 8px;\n        border: 1px solid #ccc;\n        border-radius: 3px;\n        background: white;\n        cursor: pointer;\n        font-size: 0.8em;\n      }\n      .audio-stream-mute-btn:hover {\n        background: #f0f0f0;\n      }\n      .audio-stream-mute-btn.muted {\n        background: #ffebee;\n        border-color: #f44336;\n      }\n      .audio-stream-element {\n        display: none; /* Hide audio element, we just use it for playback */\n      }\n    `;\n    \n    // Insert styles into the appropriate location\n    if (root instanceof ShadowRoot) {\n      root.appendChild(style);\n    } else if (root === document || root === document.documentElement) {\n      document.head.appendChild(style);\n    } else {\n      try {\n        if (root.appendChild) {\n          root.appendChild(style);\n        } else {\n          document.head.appendChild(style);\n        }\n      } catch (e) {\n        document.head.appendChild(style);\n      }\n    }\n  }\n\n  /**\n   * Set audio streams for a peer\n   * @param {string} peerName - Name of the peer\n   * @param {Object} streams - Stream objects\n   * @param {MediaStream} streams.localStream - Local media stream (optional for audio-only)\n   * @param {MediaStream} streams.remoteStream - Remote media stream\n   */\n  setStreams(peerName, { localStream, remoteStream }) {\n    if (!peerName) {\n      throw new Error('peerName is required');\n    }\n\n    // Get or create audio container for this peer\n    let audioContainer = this.activeStreams[peerName]?.container;\n    \n    if (!audioContainer) {\n      audioContainer = this._createAudioContainer(peerName);\n      this.container.appendChild(audioContainer);\n      \n      // Initialize tracking\n      if (!this.activeStreams[peerName]) {\n        this.activeStreams[peerName] = {\n          container: audioContainer,\n          streams: {},\n          trackEndHandlers: [],\n          muted: false\n        };\n      } else {\n        this.activeStreams[peerName].container = audioContainer;\n      }\n    }\n\n    // Get audio elements\n    const remoteAudio = audioContainer.querySelector('.audio-stream-element[data-type=\"remote\"]');\n    const localAudio = audioContainer.querySelector('.audio-stream-element[data-type=\"local\"]');\n\n    // Set streams\n    if (remoteStream && remoteAudio) {\n      remoteAudio.srcObject = remoteStream;\n      // Ensure audio plays\n      remoteAudio.play().catch(err => {\n        console.warn('Could not play remote audio:', err);\n      });\n    }\n    if (localStream && localAudio) {\n      localAudio.srcObject = localStream;\n      localAudio.muted = true; // Always mute local audio to avoid feedback\n      // Ensure audio plays (even though muted)\n      localAudio.play().catch(err => {\n        console.warn('Could not play local audio:', err);\n      });\n    }\n\n    // Store streams for cleanup\n    this.activeStreams[peerName].streams.local = localStream;\n    this.activeStreams[peerName].streams.remote = remoteStream;\n\n    // Setup track end handlers\n    this._setupTrackEndHandlers(peerName, localStream, remoteStream);\n\n    // Show container if hidden\n    if (this.container.style.display === 'none') {\n      this.container.style.display = 'block';\n    }\n  }\n\n  /**\n   * Create an audio container element for a peer\n   * @param {string} peerName - Name of the peer\n   * @returns {HTMLElement} Audio container element\n   * @private\n   */\n  _createAudioContainer(peerName) {\n    const container = document.createElement('div');\n    container.className = 'audio-stream-container';\n    container.setAttribute('data-peer', peerName);\n\n    // Visual indicator\n    if (this.options.showVisualIndicator) {\n      const indicator = document.createElement('div');\n      indicator.className = 'audio-stream-indicator';\n      container.appendChild(indicator);\n    }\n\n    // Label\n    const label = document.createElement('div');\n    label.className = 'audio-stream-label';\n    label.textContent = `ðŸ”Š ${peerName}`;\n    container.appendChild(label);\n\n    // Controls\n    const controls = document.createElement('div');\n    controls.className = 'audio-stream-controls';\n    \n    // Mute button\n    const muteBtn = document.createElement('button');\n    muteBtn.className = 'audio-stream-mute-btn';\n    muteBtn.textContent = 'Mute';\n    muteBtn.onclick = () => this._toggleMute(peerName);\n    controls.appendChild(muteBtn);\n    \n    container.appendChild(controls);\n\n    // Create remote audio element (hidden, for playback)\n    const remoteAudio = document.createElement('audio');\n    remoteAudio.className = 'audio-stream-element';\n    remoteAudio.autoplay = true;\n    remoteAudio.setAttribute('data-peer', peerName);\n    remoteAudio.setAttribute('data-type', 'remote');\n\n    // Create local audio element (hidden, usually muted)\n    const localAudio = document.createElement('audio');\n    localAudio.className = 'audio-stream-element';\n    localAudio.autoplay = true;\n    localAudio.muted = true; // Always mute local audio\n    localAudio.setAttribute('data-peer', peerName);\n    localAudio.setAttribute('data-type', 'local');\n\n    container.appendChild(remoteAudio);\n    container.appendChild(localAudio);\n\n    return container;\n  }\n\n  /**\n   * Toggle mute for a peer's audio\n   * @param {string} peerName - Name of the peer\n   * @private\n   */\n  _toggleMute(peerName) {\n    const streamData = this.activeStreams[peerName];\n    if (!streamData) return;\n\n    const remoteAudio = streamData.container.querySelector('.audio-stream-element[data-type=\"remote\"]');\n    if (!remoteAudio) return;\n\n    streamData.muted = !streamData.muted;\n    remoteAudio.muted = streamData.muted;\n\n    const muteBtn = streamData.container.querySelector('.audio-stream-mute-btn');\n    if (muteBtn) {\n      muteBtn.textContent = streamData.muted ? 'Unmute' : 'Mute';\n      muteBtn.classList.toggle('muted', streamData.muted);\n    }\n  }\n\n  /**\n   * Setup handlers for track end events\n   * @param {string} peerName - Name of the peer\n   * @param {MediaStream} localStream - Local stream\n   * @param {MediaStream} remoteStream - Remote stream\n   * @private\n   */\n  _setupTrackEndHandlers(peerName, localStream, remoteStream) {\n    // Remove existing handlers\n    if (this.activeStreams[peerName].trackEndHandlers) {\n      this.activeStreams[peerName].trackEndHandlers.forEach(handler => {\n        if (handler.track && handler.track.onended) {\n          handler.track.onended = null;\n        }\n      });\n    }\n    this.activeStreams[peerName].trackEndHandlers = [];\n\n    // Setup new handlers\n    const handleTrackEnd = () => {\n      console.log(`Audio stream track ended for ${peerName}`);\n      this.removeStreams(peerName);\n    };\n\n    if (remoteStream && remoteStream instanceof MediaStream && typeof remoteStream.getTracks === 'function') {\n      remoteStream.getTracks().forEach(track => {\n        track.onended = handleTrackEnd;\n        this.activeStreams[peerName].trackEndHandlers.push({ track, type: 'remote' });\n      });\n    }\n    if (localStream && localStream instanceof MediaStream && typeof localStream.getTracks === 'function') {\n      localStream.getTracks().forEach(track => {\n        track.onended = handleTrackEnd;\n        this.activeStreams[peerName].trackEndHandlers.push({ track, type: 'local' });\n      });\n    }\n  }\n\n  /**\n   * Remove audio streams for a peer\n   * @param {string} peerName - Name of the peer\n   */\n  removeStreams(peerName) {\n    const streamData = this.activeStreams[peerName];\n    if (!streamData) {\n      return;\n    }\n\n    // Only stop REMOTE tracks (local tracks may be shared with other connections)\n    // The RTC layer handles stopping local tracks when appropriate\n    if (streamData.streams) {\n      // Don't stop local stream tracks - they're managed by RTC layer\n      // if (streamData.streams.local) {\n      //   streamData.streams.local.getTracks().forEach(track => {\n      //     track.stop();\n      //   });\n      // }\n      if (streamData.streams.remote) {\n        streamData.streams.remote.getTracks().forEach(track => {\n          track.stop();\n        });\n      }\n    }\n\n    // Remove track end handlers\n    if (streamData.trackEndHandlers) {\n      streamData.trackEndHandlers.forEach(handler => {\n        if (handler.track && handler.track.onended) {\n          handler.track.onended = null;\n        }\n      });\n    }\n\n    // Clear audio elements\n    const remoteAudio = streamData.container?.querySelector('.audio-stream-element[data-type=\"remote\"]');\n    const localAudio = streamData.container?.querySelector('.audio-stream-element[data-type=\"local\"]');\n\n    if (remoteAudio) {\n      remoteAudio.srcObject = null;\n    }\n    if (localAudio) {\n      localAudio.srcObject = null;\n    }\n\n    // Remove container from DOM\n    if (streamData.container && streamData.container.parentNode) {\n      streamData.container.parentNode.removeChild(streamData.container);\n    }\n\n    // Remove from active streams\n    delete this.activeStreams[peerName];\n\n    // Hide container if no active streams\n    if (Object.keys(this.activeStreams).length === 0) {\n      this.container.style.display = 'none';\n    }\n  }\n\n  /**\n   * Remove all audio streams\n   */\n  removeAllStreams() {\n    const peerNames = Object.keys(this.activeStreams);\n    peerNames.forEach(peerName => this.removeStreams(peerName));\n  }\n\n  /**\n   * Check if there are active streams\n   * @returns {boolean} True if there are active streams\n   */\n  hasActiveStreams() {\n    return Object.keys(this.activeStreams).length > 0;\n  }\n\n  /**\n   * Get list of active peer names\n   * @returns {string[]} Array of peer names with active streams\n   */\n  getActivePeers() {\n    return Object.keys(this.activeStreams);\n  }\n\n  /**\n   * Show the audio container\n   */\n  show() {\n    if (this.hasActiveStreams()) {\n      this.container.style.display = 'block';\n    }\n  }\n\n  /**\n   * Hide the audio container\n   */\n  hide() {\n    this.container.style.display = 'none';\n  }\n}\n\nexport { AudioStreamDisplay };\n\n","/**\n * RingerInterface - Interface for ringtone/audio notification components\n * \n * This interface defines methods for playing ringtones (e.g., for incoming calls).\n * Implement this if you want to provide custom ringtone behavior.\n * \n * @interface RingerInterface\n */\nexport class RingerInterface {\n  /**\n   * Start playing the ringtone\n   * @returns {Promise} Promise that resolves when ringtone starts\n   */\n  start() {\n    throw new Error('start must be implemented');\n  }\n\n  /**\n   * Stop playing the ringtone\n   */\n  stop() {\n    throw new Error('stop must be implemented');\n  }\n\n  /**\n   * Check if ringtone is currently playing\n   * @returns {boolean} Whether ringtone is playing\n   */\n  isRinging() {\n    return false;\n  }\n}\n\n","/**\n * CallRinger - Audio notification for incoming calls\n * \n * Provides a ringing sound when calls are received.\n * Uses Web Audio API to generate a ringtone without requiring audio files.\n * \n * Implements RingerInterface for use with CallManager.\n * \n * Usage:\n *   import { CallRinger } from './call-ringer.js';\n *   import { CallManager } from '../core/call-manager.js';\n *   \n *   const ringer = new CallRinger();\n *   const callManager = new CallManager(rtcClient, { ringer });\n *   // Ringer will automatically start/stop for incoming calls\n * \n * Features:\n * - No external audio files required\n * - Configurable ring pattern\n * - Automatic volume management\n * - Works in all modern browsers\n * \n * @module call-ringer\n */\n\nimport { RingerInterface } from '../core/interfaces/ringer-interface.js';\n\nclass CallRinger extends RingerInterface {\n  /**\n   * Create a new CallRinger instance\n   * @param {Object} options - Configuration options\n   * @param {number} options.volume - Ring volume (0-1, default: 0.25)\n   */\n  constructor(options = {}) {\n    super();\n    this.options = {\n      volume: options.volume !== undefined ? options.volume : 0.25,\n      ...options\n    };\n    \n    this.audioContext = null;\n    this.oscillator1 = null;\n    this.oscillator2 = null;\n    this.gainNode = null;\n    this.isRinging = false;\n    this.ringInterval = null;\n    this._initAudioContext();\n  }\n\n  /**\n   * Initialize Web Audio API context\n   * @private\n   */\n  _initAudioContext() {\n    try {\n      const AudioContext = window.AudioContext || window.webkitAudioContext;\n      if (AudioContext) {\n        this.audioContext = new AudioContext();\n      }\n    } catch (e) {\n      console.warn('Web Audio API not supported:', e);\n    }\n  }\n\n  /**\n   * Resume audio context if suspended (required by some browsers)\n   * @private\n   */\n  async _resumeAudioContext() {\n    if (this.audioContext && this.audioContext.state === 'suspended') {\n      try {\n        await this.audioContext.resume();\n      } catch (e) {\n        console.warn('Failed to resume audio context:', e);\n      }\n    }\n  }\n\n  /**\n   * Create and start oscillators for ringing with pleasant pattern\n   * @private\n   */\n  _startOscillators() {\n    if (!this.audioContext) {\n      return;\n    }\n\n    const now = this.audioContext.currentTime;\n    // Pleasant two-tone pattern: play two notes in quick succession\n    const note1Duration = 0.15; // First note\n    const note2Duration = 0.15; // Second note\n    const totalDuration = note1Duration + note2Duration;\n\n    // Create gain node for volume control\n    this.gainNode = this.audioContext.createGain();\n    this.gainNode.gain.value = this.options.volume;\n    this.gainNode.connect(this.audioContext.destination);\n\n    // First note: A4 (440 Hz) - pleasant, warm tone\n    this.oscillator1 = this.audioContext.createOscillator();\n    this.oscillator1.type = 'sine';\n    this.oscillator1.frequency.value = 440; // A4\n    this.oscillator1.connect(this.gainNode);\n    \n    // Second note: C#5 (554.37 Hz) - pleasant harmony\n    this.oscillator2 = this.audioContext.createOscillator();\n    this.oscillator2.type = 'sine';\n    this.oscillator2.frequency.value = 554.37; // C#5\n    \n    // Create separate gain for second note to play it after first\n    const gain2 = this.audioContext.createGain();\n    gain2.gain.value = this.options.volume;\n    gain2.connect(this.audioContext.destination);\n    this.oscillator2.connect(gain2);\n\n    // Start first note immediately\n    this.oscillator1.start(now);\n    this.oscillator1.stop(now + note1Duration);\n    \n    // Start second note after first note\n    this.oscillator2.start(now + note1Duration);\n    this.oscillator2.stop(now + totalDuration);\n  }\n\n  /**\n   * Stop oscillators\n   * @private\n   */\n  _stopOscillators() {\n    if (this.oscillator1) {\n      try {\n        this.oscillator1.stop();\n      } catch (e) {\n        // Oscillator may already be stopped\n      }\n      this.oscillator1 = null;\n    }\n    if (this.oscillator2) {\n      try {\n        this.oscillator2.stop();\n      } catch (e) {\n        // Oscillator may already be stopped\n      }\n      this.oscillator2 = null;\n    }\n    if (this.gainNode) {\n      this.gainNode.disconnect();\n      this.gainNode = null;\n    }\n  }\n\n  /**\n   * Start ringing\n   */\n  async start() {\n    if (this.isRinging) {\n      return; // Already ringing\n    }\n\n    if (!this.audioContext) {\n      // Try to initialize audio context if it doesn't exist\n      this._initAudioContext();\n      if (!this.audioContext) {\n        console.warn('Web Audio API not available, cannot play ringtone');\n        return;\n      }\n    }\n\n    try {\n      await this._resumeAudioContext();\n      this.isRinging = true;\n\n      // Start the ring pattern\n      this._ringPattern();\n    } catch (err) {\n      console.warn('Could not start ringtone (may require user interaction):', err);\n      // Still mark as ringing so we can try again\n      this.isRinging = true;\n      this._ringPattern();\n    }\n  }\n\n  /**\n   * Stop ringing\n   */\n  stop() {\n    if (!this.isRinging) {\n      return;\n    }\n\n    this.isRinging = false;\n    \n    // Clear interval\n    if (this.ringInterval) {\n      clearInterval(this.ringInterval);\n      this.ringInterval = null;\n    }\n\n    // Stop oscillators\n    this._stopOscillators();\n  }\n\n  /**\n   * Ring pattern: play pleasant two-tone pattern, pause, repeat\n   * @private\n   */\n  _ringPattern() {\n    if (!this.isRinging) {\n      return;\n    }\n\n    // Start oscillators (they'll stop themselves)\n    this._startOscillators();\n\n    // Schedule next ring after pattern completes + pause\n    // Pattern is ~0.3 seconds, pause is 0.7 seconds = 1 second total cycle\n    this.ringInterval = setTimeout(() => {\n      if (this.isRinging) {\n        // Clean up any remaining oscillators\n        this._stopOscillators();\n        // Start next ring\n        this._ringPattern();\n      }\n    }, 1000); // 1 second cycle: 0.3s ring + 0.7s pause\n  }\n\n  /**\n   * Check if currently ringing\n   * @returns {boolean} True if ringing\n   */\n  isRinging() {\n    return this.isRinging;\n  }\n\n  /**\n   * Getter for ringing state (alternative accessor)\n   * @returns {boolean} True if ringing\n   */\n  get ringing() {\n    return this.isRinging;\n  }\n\n  /**\n   * Set ring volume\n   * @param {number} volume - Volume (0-1)\n   */\n  setVolume(volume) {\n    this.options.volume = Math.max(0, Math.min(1, volume));\n    if (this.gainNode) {\n      this.gainNode.gain.value = this.options.volume;\n    }\n  }\n}\n\nexport { CallRinger };\n\n","/**\n * NotificationInterface - Interface for notification components\n * \n * This interface defines methods for showing notifications (e.g., connection sounds, alerts).\n * Implement this if you want to provide custom notification behavior.\n * \n * @interface NotificationInterface\n */\nexport class NotificationInterface {\n  /**\n   * Play a ping/connection sound\n   * @returns {Promise} Promise that resolves when sound plays\n   */\n  ping() {\n    // Optional - no-op by default\n    return Promise.resolve();\n  }\n\n  /**\n   * Play a beep sound\n   * @returns {Promise} Promise that resolves when sound plays\n   */\n  beep() {\n    // Optional - no-op by default\n    return Promise.resolve();\n  }\n\n  /**\n   * Show a visual notification (e.g., browser notification)\n   * @param {string} title - Notification title\n   * @param {Object} options - Notification options {body, icon, etc.}\n   * @returns {Promise} Promise that resolves when notification is shown\n   */\n  showNotification(title, options = {}) {\n    // Optional - no-op by default\n    return Promise.resolve();\n  }\n}\n\n","/**\n * NotificationSound - Simple audio notifications for UI events\n * \n * Provides short audio notifications for various UI events like:\n * - New chat connections\n * - Messages received\n * - Other notifications\n * \n * Implements NotificationInterface for use with ChatManager and CallManager.\n * \n * Usage:\n *   import { NotificationSound } from './notification-sound.js';\n *   import { ChatManager } from '../core/chat-manager.js';\n *   \n *   const notifications = new NotificationSound();\n *   const chatManager = new ChatManager(rtcClient, { notifications });\n *   // Notifications will automatically play for connections\n * \n * Features:\n * - No external audio files required\n * - Uses Web Audio API\n * - Configurable volume and frequency\n * - Works in all modern browsers\n * \n * @module notification-sound\n */\n\nimport { NotificationInterface } from '../core/interfaces/notification-interface.js';\n\nclass NotificationSound extends NotificationInterface {\n  /**\n   * Create a new NotificationSound instance\n   * @param {Object} options - Configuration options\n   * @param {number} options.volume - Sound volume (0-1, default: 0.2)\n   */\n  constructor(options = {}) {\n    super();\n    this.options = {\n      volume: options.volume !== undefined ? options.volume : 0.2,\n      ...options\n    };\n    \n    this.audioContext = null;\n    this._initAudioContext();\n  }\n\n  /**\n   * Initialize Web Audio API context\n   * @private\n   */\n  _initAudioContext() {\n    try {\n      const AudioContext = window.AudioContext || window.webkitAudioContext;\n      if (AudioContext) {\n        this.audioContext = new AudioContext();\n      }\n    } catch (e) {\n      console.warn('Web Audio API not supported:', e);\n    }\n  }\n\n  /**\n   * Resume audio context if suspended (required by some browsers)\n   * @private\n   */\n  async _resumeAudioContext() {\n    if (this.audioContext && this.audioContext.state === 'suspended') {\n      try {\n        await this.audioContext.resume();\n      } catch (e) {\n        // Ignore errors\n      }\n    }\n  }\n\n  /**\n   * Play a tone\n   * @param {number} frequency - Frequency in Hz\n   * @param {number} duration - Duration in milliseconds\n   * @param {string} type - Oscillator type ('sine', 'square', 'sawtooth', 'triangle')\n   * @private\n   */\n  async _playTone(frequency, duration, type = 'sine') {\n    if (!this.audioContext) {\n      // Try to initialize if it doesn't exist\n      this._initAudioContext();\n      if (!this.audioContext) {\n        return; // Still no audio context\n      }\n    }\n\n    try {\n      await this._resumeAudioContext();\n      \n      const oscillator = this.audioContext.createOscillator();\n      const gainNode = this.audioContext.createGain();\n      \n      oscillator.type = type;\n      oscillator.frequency.value = frequency;\n      \n      gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);\n      gainNode.gain.linearRampToValueAtTime(this.options.volume, this.audioContext.currentTime + 0.01);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + duration / 1000);\n      \n      oscillator.connect(gainNode);\n      gainNode.connect(this.audioContext.destination);\n      \n      oscillator.start(this.audioContext.currentTime);\n      oscillator.stop(this.audioContext.currentTime + duration / 1000);\n    } catch (err) {\n      // Silently fail - audio might not be available\n      console.debug('Could not play notification sound:', err);\n    }\n  }\n\n  /**\n   * Play a ping sound (short, pleasant notification)\n   */\n  async ping() {\n    // Play a quick ascending tone\n    await this._playTone(800, 50, 'sine');\n    await new Promise(resolve => setTimeout(resolve, 30));\n    await this._playTone(1000, 50, 'sine');\n  }\n\n  /**\n   * Play a beep sound (single tone)\n   * @param {number} frequency - Frequency in Hz (default: 800)\n   * @param {number} duration - Duration in ms (default: 100)\n   */\n  async beep(frequency = 800, duration = 100) {\n    await this._playTone(frequency, duration, 'sine');\n  }\n\n  /**\n   * Play a chime sound (pleasant multi-tone)\n   */\n  async chime() {\n    // Play multiple tones in quick succession\n    await this._playTone(523, 80, 'sine'); // C\n    await new Promise(resolve => setTimeout(resolve, 50));\n    await this._playTone(659, 80, 'sine'); // E\n    await new Promise(resolve => setTimeout(resolve, 50));\n    await this._playTone(784, 100, 'sine'); // G\n  }\n\n  /**\n   * Set volume\n   * @param {number} volume - Volume (0-1)\n   */\n  setVolume(volume) {\n    this.options.volume = Math.max(0, Math.min(1, volume));\n  }\n}\n\nexport { NotificationSound };\n\n\n","/**\n * CallManagement - UI component for displaying call controls and information\n * \n * This is a pure UI component that displays call state from CallManager.\n * It does not manage any state itself - all state comes from CallManager.\n * \n * This component provides a dedicated UI section for call management, separate from\n * the chat messages area. It displays:\n * - Active call information (who you're calling with)\n * - Call controls (mute mic, mute speakers, video toggle)\n * - Latency metrics (RTT, packet loss, jitter)\n * \n * Usage:\n *   import { CallManager } from '../core/call-manager.js';\n *   import { CallManagement } from './call-management.js';\n *   \n *   const callManager = new CallManager(rtcClient);\n *   const callMgmt = new CallManagement(containerElement, callManager);\n *   \n *   // CallManagement automatically subscribes to CallManager events\n *   // and updates the UI accordingly\n */\n\nclass CallManagement {\n  /**\n   * Create a new CallManagement instance\n   * @param {HTMLElement} container - Container element for the call management UI\n   * @param {CallManager} callManager - CallManager instance to read state from\n   * @param {Object} options - Configuration options\n   */\n  constructor(container, callManager, options = {}) {\n    if (!callManager) {\n      throw new Error('CallManager is required');\n    }\n    \n    this.container = container;\n    this.callManager = callManager;\n    this.options = {\n      showMetrics: options.showMetrics !== false, // Default: true\n      ...options\n    };\n    \n    this._setupUI();\n    this._setupEventListeners();\n    this._setupCallManagerListeners();\n    \n    // Initial render from current state\n    this._updateFromCallManager();\n  }\n\n  /**\n   * Setup the UI structure\n   * @private\n   */\n  _setupUI() {\n    // Check if call-buttons-container already exists (from ChatBox template)\n    const existingButtonsContainer = this.container.querySelector('#call-buttons-container');\n    \n    // Only set innerHTML if call-buttons-container doesn't exist\n    // This preserves the call buttons that ChatBox adds\n    if (!existingButtonsContainer) {\n      this.container.innerHTML = `\n        <div id=\"call-buttons-container\"></div>\n        <div id=\"call-info-container\"></div>\n        <div id=\"call-controls-container\">\n          <span style=\"font-weight: bold; margin-right: 8px;\">Call Controls:</span>\n          <button id=\"call-mute-mic-btn\" class=\"call-control-button\" title=\"Toggle microphone on/off\">Mic</button>\n          <button id=\"call-mute-speakers-btn\" class=\"call-control-button\" title=\"Toggle speakers on/off\">Speakers</button>\n          <button id=\"call-video-toggle-btn\" class=\"call-control-button\" title=\"Toggle camera on/off\">Camera</button>\n          <button id=\"end-call-button\" class=\"call-control-button end-call\" title=\"End call\" style=\"background-color: #f44336; color: white;\">End</button>\n          <span id=\"call-metrics\"></span>\n        </div>\n      `;\n    } else {\n      // Preserve existing buttons, just add our containers if they don't exist\n      if (!this.container.querySelector('#call-info-container')) {\n        const infoContainer = document.createElement('div');\n        infoContainer.id = 'call-info-container';\n        existingButtonsContainer.after(infoContainer);\n      }\n      \n      // Check if end call button exists in call-buttons-container and needs to be moved\n      const existingEndCallButton = existingButtonsContainer.querySelector('#end-call-button');\n      \n      if (!this.container.querySelector('#call-controls-container')) {\n        const controlsContainer = document.createElement('div');\n        controlsContainer.id = 'call-controls-container';\n        controlsContainer.innerHTML = `\n          <span style=\"font-weight: bold; margin-right: 8px;\">Call Controls:</span>\n          <button id=\"call-mute-mic-btn\" class=\"call-control-button\" title=\"Toggle microphone on/off\">Mic</button>\n          <button id=\"call-mute-speakers-btn\" class=\"call-control-button\" title=\"Toggle speakers on/off\">Speakers</button>\n          <button id=\"call-video-toggle-btn\" class=\"call-control-button\" title=\"Toggle camera on/off\">Camera</button>\n          <span id=\"call-metrics\"></span>\n        `;\n        this.container.appendChild(controlsContainer);\n        \n        // Move existing end call button to call-controls-container if it exists\n        if (existingEndCallButton) {\n          // Update the button styling and class\n          existingEndCallButton.className = 'call-control-button end-call';\n          existingEndCallButton.style.backgroundColor = '#f44336';\n          existingEndCallButton.style.color = 'white';\n          // Move it to call-controls-container (before metrics span)\n          const metricsSpan = controlsContainer.querySelector('#call-metrics');\n          if (metricsSpan) {\n            controlsContainer.insertBefore(existingEndCallButton, metricsSpan);\n          } else {\n            controlsContainer.appendChild(existingEndCallButton);\n          }\n        } else {\n          // Create new end call button if it doesn't exist\n          const endCallBtn = document.createElement('button');\n          endCallBtn.id = 'end-call-button';\n          endCallBtn.className = 'call-control-button end-call';\n          endCallBtn.title = 'End call';\n          endCallBtn.textContent = 'End';\n          endCallBtn.style.backgroundColor = '#f44336';\n          endCallBtn.style.color = 'white';\n          const metricsSpan = controlsContainer.querySelector('#call-metrics');\n          if (metricsSpan) {\n            controlsContainer.insertBefore(endCallBtn, metricsSpan);\n          } else {\n            controlsContainer.appendChild(endCallBtn);\n          }\n        }\n      } else {\n        // call-controls-container already exists, but we still need to move the end call button\n        const controlsContainer = this.container.querySelector('#call-controls-container');\n        const existingEndCallInControls = controlsContainer.querySelector('#end-call-button');\n        \n        if (existingEndCallButton && !existingEndCallInControls) {\n          // Move end call button from call-buttons-container to call-controls-container\n          existingEndCallButton.className = 'call-control-button end-call';\n          existingEndCallButton.style.backgroundColor = '#f44336';\n          existingEndCallButton.style.color = 'white';\n          const metricsSpan = controlsContainer.querySelector('#call-metrics');\n          if (metricsSpan) {\n            controlsContainer.insertBefore(existingEndCallButton, metricsSpan);\n          } else {\n            controlsContainer.appendChild(existingEndCallButton);\n          }\n        } else if (!existingEndCallButton && !existingEndCallInControls) {\n          // Create new end call button if neither exists\n          const endCallBtn = document.createElement('button');\n          endCallBtn.id = 'end-call-button';\n          endCallBtn.className = 'call-control-button end-call';\n          endCallBtn.title = 'End call';\n          endCallBtn.textContent = 'End';\n          endCallBtn.style.backgroundColor = '#f44336';\n          endCallBtn.style.color = 'white';\n          const metricsSpan = controlsContainer.querySelector('#call-metrics');\n          if (metricsSpan) {\n            controlsContainer.insertBefore(endCallBtn, metricsSpan);\n          } else {\n            controlsContainer.appendChild(endCallBtn);\n          }\n        }\n      }\n    }\n    \n    this.buttonsContainer = this.container.querySelector('#call-buttons-container');\n    this.callInfoContainer = this.container.querySelector('#call-info-container');\n    this.callControlsContainer = this.container.querySelector('#call-controls-container');\n    this.muteMicBtn = this.container.querySelector('#call-mute-mic-btn');\n    this.muteSpeakersBtn = this.container.querySelector('#call-mute-speakers-btn');\n    this.videoToggleBtn = this.container.querySelector('#call-video-toggle-btn');\n    this.endCallButton = this.container.querySelector('#end-call-button');\n    this.metricsSpan = this.container.querySelector('#call-metrics');\n    \n    this.callInfoItems = new Map(); // Map<user, HTMLElement>\n    this.incomingCallPrompts = new Map(); // Map<user, {element: HTMLElement, resolve: Function}>\n    \n    // Ensure end call button is in the correct location (call-controls-container, not call-buttons-container)\n    this._ensureEndCallButtonInCorrectLocation();\n  }\n  \n  /**\n   * Ensure the end call button is in call-controls-container, not call-buttons-container\n   * @private\n   */\n  _ensureEndCallButtonInCorrectLocation() {\n    const buttonsContainer = this.container.querySelector('#call-buttons-container');\n    const controlsContainer = this.container.querySelector('#call-controls-container');\n    const endCallButton = this.container.querySelector('#end-call-button');\n    \n    if (!endCallButton || !controlsContainer) {\n      return;\n    }\n    \n    // If end call button is in call-buttons-container, move it to call-controls-container\n    if (buttonsContainer && buttonsContainer.contains(endCallButton)) {\n      endCallButton.className = 'call-control-button end-call';\n      endCallButton.style.backgroundColor = '#f44336';\n      endCallButton.style.color = 'white';\n      const metricsSpan = controlsContainer.querySelector('#call-metrics');\n      if (metricsSpan) {\n        controlsContainer.insertBefore(endCallButton, metricsSpan);\n      } else {\n        controlsContainer.appendChild(endCallButton);\n      }\n    }\n    \n    // Update reference\n    this.endCallButton = endCallButton;\n  }\n\n  /**\n   * Setup event listeners for control buttons\n   * @private\n   */\n  _setupEventListeners() {\n    if (this.muteMicBtn) {\n      this.muteMicBtn.addEventListener('click', () => {\n        const currentState = this.callManager.getMuteState();\n        this.callManager.setMicMuted(!currentState.mic);\n      });\n    }\n    \n    if (this.muteSpeakersBtn) {\n      this.muteSpeakersBtn.addEventListener('click', () => {\n        const currentState = this.callManager.getMuteState();\n        this.callManager.setSpeakersMuted(!currentState.speakers);\n      });\n    }\n    \n    if (this.videoToggleBtn) {\n      this.videoToggleBtn.addEventListener('click', () => {\n        const currentState = this.callManager.getMuteState();\n        this.callManager.setVideoHidden(!currentState.video);\n      });\n    }\n    \n    // End call button handler\n    if (this.endCallButton) {\n      this.endCallButton.addEventListener('click', () => {\n        console.log('End call button clicked from CallManagement');\n        // End all active calls\n        if (this.callManager && typeof this.callManager.endAllCalls === 'function') {\n          this.callManager.endAllCalls();\n        }\n      });\n    }\n  }\n\n  /**\n   * Setup listeners for CallManager events\n   * @private\n   */\n  _setupCallManagerListeners() {\n    // Listen to mute state changes\n    this.callManager.on('mutechanged', () => {\n      this._updateButtonStates();\n    });\n    \n    // Listen to call state changes\n    this.callManager.on('callconnected', () => {\n      this._updateFromCallManager();\n    });\n    \n    this.callManager.on('callended', () => {\n      this._updateFromCallManager();\n    });\n    \n    // Listen to metrics updates\n    this.callManager.on('metricsupdated', () => {\n      this._updateMetrics();\n    });\n  }\n\n  /**\n   * Update UI from CallManager state\n   * @private\n   */\n  _updateFromCallManager() {\n    const activeCalls = this.callManager.getActiveCalls();\n    const pendingCalls = this.callManager.getPendingCalls();\n    const hasActiveCalls = activeCalls.audio.size > 0 || activeCalls.video.size > 0;\n    const hasPendingCalls = pendingCalls.size > 0;\n    \n    // Determine current state and apply it\n    if (!hasActiveCalls && !hasPendingCalls) {\n      // State 1: No call (inactive)\n      this._setStateInactive();\n    } else if (hasPendingCalls && !hasActiveCalls) {\n      // State 2: Pending call\n      this._setStatePending();\n    } else if (hasActiveCalls) {\n      // State 3: Active call\n      this._setStateActive(activeCalls.audio, activeCalls.video);\n    }\n  }\n\n  /**\n   * Set UI to State 1: No call (inactive)\n   * @private\n   */\n  _setStateInactive() {\n    // Set to inactive state - container remains in DOM and visible for start call buttons\n    // The container should be visible so users can start new calls\n    this.container.classList.remove('active');\n    this.container.classList.remove('hidden');\n    // Ensure container is visible (buttons should be shown)\n    this.container.style.display = 'flex';\n    \n    // Show buttons container (for start call buttons)\n    if (this.buttonsContainer) {\n      this.buttonsContainer.style.display = 'flex';\n    }\n    \n    // Hide call controls and info containers (only show when active)\n    if (this.callControlsContainer) {\n      this.callControlsContainer.classList.remove('active');\n      this.callControlsContainer.style.display = 'none';\n    }\n    if (this.callInfoContainer) {\n      this.callInfoContainer.classList.remove('active');\n      this.callInfoContainer.style.display = 'none';\n    }\n    \n    // Clear call info items (these are dynamically created, so removing is OK)\n    for (const [user, item] of this.callInfoItems.entries()) {\n      if (item && item.parentNode) {\n        item.parentNode.removeChild(item);\n      }\n    }\n    this.callInfoItems.clear();\n    \n    // Clear metrics (non-destructive - just clear text)\n    if (this.metricsSpan) {\n      this.metricsSpan.textContent = '';\n    }\n    \n    // Reset button states (non-destructive)\n    this._updateButtonStates();\n    \n    // Container remains in DOM and visible with start call buttons ready\n    // All sub-containers remain in DOM, just hidden\n  }\n\n  /**\n   * Set UI to State 2: Pending call\n   * @private\n   */\n  _setStatePending() {\n    // Show call-management container (for incoming call prompt)\n    this.container.classList.add('active');\n    this.container.classList.remove('hidden');\n    this.container.style.display = 'flex';\n    \n    // Hide controls and info (only prompt should be visible)\n    // Non-destructive - just hide, containers remain in DOM\n    if (this.callControlsContainer) {\n      this.callControlsContainer.classList.remove('active');\n      this.callControlsContainer.style.display = 'none';\n    }\n    if (this.callInfoContainer) {\n      this.callInfoContainer.classList.remove('active');\n      this.callInfoContainer.style.display = 'none';\n    }\n    \n    // Clear call info items (prompt is shown separately)\n    for (const [user, item] of this.callInfoItems.entries()) {\n      if (item && item.parentNode) {\n        item.parentNode.removeChild(item);\n      }\n    }\n    this.callInfoItems.clear();\n    \n    // Clear metrics\n    if (this.metricsSpan) {\n      this.metricsSpan.textContent = '';\n    }\n  }\n\n  /**\n   * Set UI to State 3: Active call\n   * @private\n   */\n  _setStateActive(audioCalls, videoCalls) {\n    // Show call-management container\n    this.container.classList.add('active');\n    this.container.classList.remove('hidden');\n    this.container.style.display = 'flex';\n    \n    // Show controls and info (non-destructive - ensure they're visible)\n    if (this.callControlsContainer) {\n      this.callControlsContainer.classList.add('active');\n      this.callControlsContainer.style.display = '';\n    }\n    if (this.callInfoContainer) {\n      this.callInfoContainer.classList.add('active');\n      this.callInfoContainer.style.display = '';\n    }\n    \n    // Update call info, button states, and metrics\n    this._updateCallInfo(audioCalls, videoCalls);\n    this._updateButtonStates();\n    this._updateMetrics();\n  }\n\n  /**\n   * @deprecated Use CallManager directly. This method is kept for backward compatibility.\n   * Set active calls (reads from CallManager)\n   * @param {Set|Array} audioCalls - Set or array of users in audio calls\n   * @param {Set|Array} videoCalls - Set or array of users in video calls\n   */\n  setActiveCalls(audioCalls, videoCalls) {\n    // This is now a no-op - state comes from CallManager\n    // Kept for backward compatibility\n    this._updateFromCallManager();\n  }\n\n  /**\n   * @deprecated Use CallManager directly. This method is kept for backward compatibility.\n   * Set mute state (reads from CallManager)\n   * @param {Object} state - Mute state object {mic: boolean, speakers: boolean, video: boolean}\n   */\n  setMuteState(state) {\n    // This is now a no-op - state comes from CallManager\n    // Kept for backward compatibility\n    this._updateButtonStates();\n  }\n\n  /**\n   * @deprecated Use CallManager directly. This method is kept for backward compatibility.\n   * Set latency metrics for a user (reads from CallManager)\n   * @param {string} user - User name\n   * @param {Object} metrics - Metrics object {rtt: number, packetLoss: number, jitter: number}\n   */\n  setMetrics(user, metrics) {\n    // This is now a no-op - state comes from CallManager\n    // Kept for backward compatibility\n    this._updateMetrics();\n  }\n\n  /**\n   * @deprecated Use CallManager directly. This method is kept for backward compatibility.\n   * Clear metrics for a user\n   * @param {string} user - User name\n   */\n  clearMetrics(user) {\n    // This is now a no-op - state comes from CallManager\n    // Kept for backward compatibility\n    this._updateMetrics();\n  }\n\n  /**\n   * @deprecated Use CallManager directly. This method is kept for backward compatibility.\n   * Clear all metrics\n   */\n  clearAllMetrics() {\n    // This is now a no-op - state comes from CallManager\n    // Kept for backward compatibility\n    this._updateMetrics();\n  }\n\n\n  /**\n   * Show an incoming call prompt\n   * @param {string} peerName - Name of the caller\n   * @param {Object} callInfo - {video: boolean, audio: boolean}\n   * @returns {Promise<boolean>} Promise that resolves to true to accept, false to reject\n   */\n  showIncomingCallPrompt(peerName, callInfo) {\n    console.log('CallManagement.showIncomingCallPrompt called', { peerName, callInfo, container: this.container });\n    \n    // Remove any existing prompt for this user\n    this.hideIncomingCallPrompt(peerName);\n    \n    // Ensure call-management container is visible\n    if (this.container) {\n      this.container.style.display = 'flex';\n      this.container.classList.add('active');\n    }\n    \n    // Get the call-buttons-container\n    const buttonsContainer = this.container ? this.container.querySelector('#call-buttons-container') : null;\n    console.log('buttonsContainer found:', !!buttonsContainer, { container: this.container, buttonsContainer });\n    \n    if (!buttonsContainer) {\n      console.error('call-buttons-container not found in container:', this.container);\n      return Promise.resolve(false);\n    }\n    \n    // Create prompt element\n    const promptElement = document.createElement('div');\n    promptElement.className = 'incoming-call-prompt';\n    promptElement.style.cssText = `\n      padding: 12px;\n      margin: 8px 0;\n      background-color: #4CAF50;\n      color: white;\n      border-radius: 8px;\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n      align-items: center;\n      width: 100%;\n      box-sizing: border-box;\n    `;\n    \n    const callType = callInfo.video ? 'video' : 'audio';\n    const callTypeIcon = callInfo.video ? 'ðŸ“¹' : 'ðŸ”Š';\n    const isVideoCall = callInfo.video === true;\n    \n    // For video calls, show three options: Answer as Video, Answer as Audio, Decline\n    // For audio calls, show two options: Accept, Reject\n    let buttonsHTML = '';\n    if (isVideoCall) {\n      buttonsHTML = `\n        <button class=\"accept-video-btn\" style=\"\n          padding: 8px 16px;\n          background-color: white;\n          color: #4CAF50;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-weight: bold;\n        \">ðŸ“¹ Answer as Video</button>\n        <button class=\"accept-audio-btn\" style=\"\n          padding: 8px 16px;\n          background-color: #2196F3;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-weight: bold;\n        \">ðŸ”Š Answer as Audio</button>\n        <button class=\"reject-call-btn\" style=\"\n          padding: 8px 16px;\n          background-color: #f44336;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-weight: bold;\n        \">Decline</button>\n      `;\n    } else {\n      buttonsHTML = `\n        <button class=\"accept-call-btn\" style=\"\n          padding: 8px 16px;\n          background-color: white;\n          color: #4CAF50;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-weight: bold;\n        \">Accept</button>\n        <button class=\"reject-call-btn\" style=\"\n          padding: 8px 16px;\n          background-color: #f44336;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-weight: bold;\n        \">Reject</button>\n      `;\n    }\n    \n    promptElement.innerHTML = `\n      <div style=\"font-weight: bold; font-size: 1.1em;\">\n        ${callTypeIcon} Incoming ${callType} call from ${peerName}\n      </div>\n      <div style=\"display: flex; gap: 8px; flex-wrap: wrap; justify-content: center;\">\n        ${buttonsHTML}\n      </div>\n    `;\n    \n    // Create promise for accept/reject\n    // Promise can resolve to:\n    // - true: accept with original callInfo (for video calls, means accept as video)\n    // - {video: false, audio: true}: accept as audio only (for video calls)\n    // - false: reject\n    let resolvePrompt;\n    const promptPromise = new Promise((resolve) => {\n      resolvePrompt = resolve;\n    });\n    \n    // Set up button handlers\n    if (isVideoCall) {\n      // Video call: three buttons\n      const acceptVideoBtn = promptElement.querySelector('.accept-video-btn');\n      const acceptAudioBtn = promptElement.querySelector('.accept-audio-btn');\n      const rejectBtn = promptElement.querySelector('.reject-call-btn');\n      \n      acceptVideoBtn.addEventListener('click', () => {\n        this.hideIncomingCallPrompt(peerName);\n        // Return true to accept with original callInfo (video + audio)\n        resolvePrompt(true);\n      });\n      \n      acceptAudioBtn.addEventListener('click', () => {\n        this.hideIncomingCallPrompt(peerName);\n        // Return modified callInfo to accept as audio only\n        resolvePrompt({video: false, audio: true});\n      });\n      \n      rejectBtn.addEventListener('click', () => {\n        // Stop ringing immediately\n        if (this.callManager && this.callManager.ringer && typeof this.callManager.ringer.stop === 'function') {\n          this.callManager.ringer.stop();\n        }\n        \n        // Hide the prompt first\n        this.hideIncomingCallPrompt(peerName);\n        \n        // CRITICAL: End the call FIRST to send \"endcall\" message to caller\n        // This ensures the caller receives the message and their UI updates\n        if (this.callManager) {\n          this.callManager.endCall(peerName);\n        }\n        \n        // Then resolve promise to false to indicate rejection\n        // This will cause RTC client to reject the call (which also sends \"endcall\" via catch handler)\n        // But we've already sent it above, so this is just for cleanup\n        resolvePrompt(false);\n      });\n    } else {\n      // Audio call: two buttons (same as before)\n      const acceptBtn = promptElement.querySelector('.accept-call-btn');\n      const rejectBtn = promptElement.querySelector('.reject-call-btn');\n      \n      acceptBtn.addEventListener('click', () => {\n        this.hideIncomingCallPrompt(peerName);\n        resolvePrompt(true);\n      });\n      \n      rejectBtn.addEventListener('click', () => {\n        // Stop ringing immediately\n        if (this.callManager && this.callManager.ringer && typeof this.callManager.ringer.stop === 'function') {\n          this.callManager.ringer.stop();\n        }\n        \n        // Hide the prompt first\n        this.hideIncomingCallPrompt(peerName);\n        \n        // CRITICAL: End the call FIRST to send \"endcall\" message to caller\n        // This ensures the caller receives the message and their UI updates\n        if (this.callManager) {\n          this.callManager.endCall(peerName);\n        }\n        \n        // Then resolve promise to false to indicate rejection\n        // This will cause RTC client to reject the call (which also sends \"endcall\" via catch handler)\n        // But we've already sent it above, so this is just for cleanup\n        resolvePrompt(false);\n      });\n    }\n    \n    // Store prompt\n    this.incomingCallPrompts.set(peerName, {\n      element: promptElement,\n      resolve: resolvePrompt\n    });\n    \n    // Clear the buttons container and add the prompt\n    console.log('Clearing buttonsContainer and adding prompt', { buttonsContainer, promptElement });\n    buttonsContainer.innerHTML = '';\n    buttonsContainer.appendChild(promptElement);\n    console.log('Prompt added to buttonsContainer', { buttonsContainerHTML: buttonsContainer.innerHTML.substring(0, 100) });\n    \n    return promptPromise;\n  }\n  \n  /**\n   * Hide/remove an incoming call prompt\n   * @param {string} peerName - Name of the caller\n   */\n  hideIncomingCallPrompt(peerName) {\n    const prompt = this.incomingCallPrompts.get(peerName);\n    if (prompt) {\n      const buttonsContainer = this.container.querySelector('#call-buttons-container');\n      if (prompt.element && prompt.element.parentNode) {\n        prompt.element.parentNode.removeChild(prompt.element);\n      }\n      this.incomingCallPrompts.delete(peerName);\n      \n      // If no more prompts, restore buttons (ChatBox will handle showing the right ones)\n      if (this.incomingCallPrompts.size === 0 && buttonsContainer) {\n        // ChatBox will restore the buttons via _updateCallButtonVisibility\n        // We just need to clear the container so it can be repopulated\n        buttonsContainer.innerHTML = '';\n      }\n    }\n  }\n\n  /**\n   * Show a missed call notification\n   * @param {string} peerName - Name of the peer\n   * @param {string} direction - 'incoming' or 'outgoing'\n   */\n  showMissedCallNotification(peerName, direction) {\n    const buttonsContainer = this.container.querySelector('#call-buttons-container');\n    if (!buttonsContainer) {\n      return;\n    }\n    \n    const message = direction === 'incoming'\n      ? `Missed call from ${peerName}`\n      : `${peerName} missed your call`;\n    \n    const notificationEl = document.createElement('div');\n    notificationEl.className = 'missed-call-notification';\n    notificationEl.style.cssText = `\n      padding: 8px 12px;\n      margin: 4px 0;\n      background-color: #ff9800;\n      color: white;\n      border-radius: 4px;\n      font-size: 0.9em;\n      text-align: center;\n    `;\n    notificationEl.textContent = message;\n    \n    // Add to call-info-container (not buttons container, as that's for controls)\n    if (this.callInfoContainer) {\n      this.callInfoContainer.appendChild(notificationEl);\n      \n      // Auto-remove after 5 seconds\n      setTimeout(() => {\n        if (notificationEl.parentNode) {\n          notificationEl.parentNode.removeChild(notificationEl);\n        }\n      }, 5000);\n    }\n  }\n\n  /**\n   * Show a call declined notification\n   * @param {string} peerName - Name of the peer who declined\n   */\n  showCallDeclinedNotification(peerName) {\n    const buttonsContainer = this.container.querySelector('#call-buttons-container');\n    if (!buttonsContainer) {\n      return;\n    }\n    \n    const notificationEl = document.createElement('div');\n    notificationEl.className = 'call-declined-notification';\n    notificationEl.style.cssText = `\n      padding: 8px 12px;\n      margin: 4px 0;\n      background-color: #f44336;\n      color: white;\n      border-radius: 4px;\n      font-size: 0.9em;\n      text-align: center;\n    `;\n    notificationEl.textContent = `${peerName} declined your call`;\n    \n    // Add to call-info-container (not buttons container, as that's for controls)\n    if (this.callInfoContainer) {\n      this.callInfoContainer.appendChild(notificationEl);\n      \n      // Auto-remove after 5 seconds\n      setTimeout(() => {\n        if (notificationEl.parentNode) {\n          notificationEl.parentNode.removeChild(notificationEl);\n        }\n      }, 5000);\n    }\n  }\n\n  /**\n   * Update call info display (list of active calls)\n   * @private\n   */\n  _updateCallInfo(audioCalls, videoCalls) {\n    if (!this.callInfoContainer) {\n      return;\n    }\n    \n    // Remove existing call info items (but keep incoming call prompts)\n    for (const [user, item] of this.callInfoItems.entries()) {\n      if (item && item.parentNode) {\n        item.parentNode.removeChild(item);\n      }\n    }\n    this.callInfoItems.clear();\n    \n    // Add audio call info (only if not also a video call)\n    for (const user of audioCalls) {\n      if (!videoCalls.has(user)) {\n        const infoItem = document.createElement('div');\n        infoItem.className = 'call-info-item';\n        infoItem.textContent = `ðŸ”Š Audio call with ${user}`;\n        // Insert after incoming call prompts\n        const prompts = Array.from(this.incomingCallPrompts.values());\n        if (prompts.length > 0 && prompts[0].element && prompts[0].element.nextSibling) {\n          this.callInfoContainer.insertBefore(infoItem, prompts[0].element.nextSibling);\n        } else {\n          this.callInfoContainer.appendChild(infoItem);\n        }\n        this.callInfoItems.set(user, infoItem);\n      }\n    }\n    \n    // Add video call info\n    for (const user of videoCalls) {\n      const infoItem = document.createElement('div');\n      infoItem.className = 'call-info-item';\n      infoItem.textContent = `ðŸ“¹ Video call with ${user}`;\n      // Insert after incoming call prompts\n      const prompts = Array.from(this.incomingCallPrompts.values());\n      if (prompts.length > 0 && prompts[0].element && prompts[0].element.nextSibling) {\n        this.callInfoContainer.insertBefore(infoItem, prompts[0].element.nextSibling);\n      } else {\n        this.callInfoContainer.appendChild(infoItem);\n      }\n      this.callInfoItems.set(user, infoItem);\n    }\n  }\n\n  /**\n   * Update button states based on mute state from CallManager\n   * @private\n   */\n  _updateButtonStates() {\n    const muteState = this.callManager.getMuteState();\n    const activeCalls = this.callManager.getActiveCalls();\n    const hasVideoCalls = activeCalls.video.size > 0;\n    \n    if (this.muteMicBtn) {\n      // Toggle button: show \"Mic\" with active state and strikethrough when muted\n      this.muteMicBtn.textContent = 'Mic';\n      this.muteMicBtn.title = muteState.mic ? 'Microphone is muted - click to unmute' : 'Microphone is on - click to mute';\n      this.muteMicBtn.classList.toggle('active', muteState.mic);\n      this.muteMicBtn.style.textDecoration = muteState.mic ? 'line-through' : 'none';\n    }\n    \n    if (this.muteSpeakersBtn) {\n      // Toggle button: show \"Speakers\" with active state and strikethrough when muted\n      this.muteSpeakersBtn.textContent = 'Speakers';\n      this.muteSpeakersBtn.title = muteState.speakers ? 'Speakers are muted - click to unmute' : 'Speakers are on - click to mute';\n      this.muteSpeakersBtn.classList.toggle('active', muteState.speakers);\n      this.muteSpeakersBtn.style.textDecoration = muteState.speakers ? 'line-through' : 'none';\n    }\n    \n    if (this.videoToggleBtn) {\n      // Show camera button only for video calls\n      this.videoToggleBtn.style.display = hasVideoCalls ? 'inline-block' : 'none';\n      // Toggle button: show \"Camera\" with active state and strikethrough when hidden\n      this.videoToggleBtn.textContent = 'Camera';\n      this.videoToggleBtn.title = muteState.video ? 'Camera is hidden - click to show' : 'Camera is on - click to hide';\n      this.videoToggleBtn.classList.toggle('active', muteState.video);\n      this.videoToggleBtn.style.textDecoration = muteState.video ? 'line-through' : 'none';\n    }\n  }\n\n  /**\n   * Update metrics display from CallManager\n   * @private\n   */\n  _updateMetrics() {\n    if (!this.metricsSpan || !this.options.showMetrics) {\n      return;\n    }\n    \n    const activeCalls = this.callManager.getActiveCalls();\n    const activeCallUsers = new Set([...activeCalls.audio, ...activeCalls.video]);\n    const allMetrics = this.callManager.getAllMetrics();\n    \n    if (activeCallUsers.size === 0) {\n      this.metricsSpan.textContent = '';\n      return;\n    }\n    \n    // Collect metrics for all active calls\n    const metrics = [];\n    for (const user of activeCallUsers) {\n      const userMetrics = allMetrics.get(user);\n      if (userMetrics) {\n        const parts = [];\n        if (userMetrics.rtt !== null && userMetrics.rtt !== undefined) {\n          parts.push(`${Math.round(userMetrics.rtt)}ms`);\n        }\n        if (userMetrics.packetLoss !== null && userMetrics.packetLoss !== undefined && userMetrics.packetLoss > 0) {\n          parts.push(`Loss: ${userMetrics.packetLoss.toFixed(1)}%`);\n        }\n        if (userMetrics.jitter !== null && userMetrics.jitter !== undefined) {\n          parts.push(`Jitter: ${Math.round(userMetrics.jitter)}ms`);\n        }\n        \n        if (parts.length > 0) {\n          const displayName = activeCallUsers.size > 1 ? user : '';\n          metrics.push(`${displayName}${displayName ? ': ' : ''}${parts.join(', ')}`);\n        }\n      }\n    }\n    \n    if (metrics.length > 0) {\n      this.metricsSpan.textContent = `ðŸ“Š ${metrics.join(' | ')}`;\n    } else {\n      this.metricsSpan.textContent = 'ðŸ“Š Connecting...';\n    }\n  }\n}\n\nexport { CallManagement };\n\n\n","/**\n * CallState - Platform-agnostic, UI-agnostic call state management\n * \n * This module provides a structured way to track call state per user.\n * State can be: inactive, active, or pending\n * Each state can have audio and/or video capabilities.\n * \n * Usage:\n *   import { CallState } from './call-state.js';\n *   \n *   const callState = new CallState();\n *   callState.setUserState('user1', {status: 'active', audio: true, video: true});\n *   const state = callState.getUserState('user1');\n *   // {status: 'active', audio: true, video: true}\n * \n * @module call-state\n */\n\nclass CallState {\n  /**\n   * Create a new CallState instance\n   */\n  constructor() {\n    // Map<user, {status: 'inactive'|'active'|'pending', audio: boolean, video: boolean}>\n    this._userStates = new Map();\n  }\n\n  /**\n   * Set call state for a user\n   * @param {string} user - User name\n   * @param {Object} state - State object {status: string, audio: boolean, video: boolean}\n   */\n  setUserState(user, state) {\n    if (!user) {\n      throw new Error('User name is required');\n    }\n    \n    const normalizedState = {\n      status: state.status || 'inactive',\n      audio: state.audio === true,\n      video: state.video === true\n    };\n    \n    // Validate status\n    if (!['inactive', 'active', 'pending'].includes(normalizedState.status)) {\n      throw new Error(`Invalid status: ${normalizedState.status}. Must be 'inactive', 'active', or 'pending'`);\n    }\n    \n    this._userStates.set(user, normalizedState);\n  }\n\n  /**\n   * Get call state for a user\n   * @param {string} user - User name\n   * @returns {Object|null} State object {status: string, audio: boolean, video: boolean} or null if not found\n   */\n  getUserState(user) {\n    if (!user) {\n      return null;\n    }\n    const state = this._userStates.get(user);\n    return state ? { ...state } : null;\n  }\n\n  /**\n   * Get all users with a specific status\n   * @param {string} status - Status to filter by ('inactive', 'active', or 'pending')\n   * @returns {Array<string>} Array of user names\n   */\n  getUsersByStatus(status) {\n    if (!['inactive', 'active', 'pending'].includes(status)) {\n      throw new Error(`Invalid status: ${status}. Must be 'inactive', 'active', or 'pending'`);\n    }\n    \n    const users = [];\n    for (const [user, state] of this._userStates.entries()) {\n      if (state.status === status) {\n        users.push(user);\n      }\n    }\n    return users;\n  }\n\n  /**\n   * Get all active calls (grouped by audio/video)\n   * @returns {Object} {audio: Set<string>, video: Set<string>}\n   */\n  getActiveCalls() {\n    const audio = new Set();\n    const video = new Set();\n    \n    for (const [user, state] of this._userStates.entries()) {\n      if (state.status === 'active') {\n        if (state.audio) {\n          audio.add(user);\n        }\n        if (state.video) {\n          video.add(user);\n        }\n      }\n    }\n    \n    return { audio, video };\n  }\n\n  /**\n   * Get all pending calls\n   * @returns {Set<string>} Set of user names with pending calls\n   */\n  getPendingCalls() {\n    return new Set(this.getUsersByStatus('pending'));\n  }\n\n  /**\n   * Get all users with active or pending calls\n   * @returns {Set<string>} Set of user names\n   */\n  getActiveOrPendingCalls() {\n    const users = new Set();\n    for (const [user, state] of this._userStates.entries()) {\n      if (state.status === 'active' || state.status === 'pending') {\n        users.add(user);\n      }\n    }\n    return users;\n  }\n\n  /**\n   * Check if a user has an active call\n   * @param {string} user - User name\n   * @returns {boolean} True if user has an active call\n   */\n  hasActiveCall(user) {\n    const state = this.getUserState(user);\n    return state && state.status === 'active';\n  }\n\n  /**\n   * Check if a user has a pending call\n   * @param {string} user - User name\n   * @returns {boolean} True if user has a pending call\n   */\n  hasPendingCall(user) {\n    const state = this.getUserState(user);\n    return state && state.status === 'pending';\n  }\n\n  /**\n   * Remove state for a user\n   * @param {string} user - User name\n   */\n  removeUser(user) {\n    this._userStates.delete(user);\n  }\n\n  /**\n   * Clear all states\n   */\n  clear() {\n    this._userStates.clear();\n  }\n\n  /**\n   * Get all states (for debugging/inspection)\n   * @returns {Map} Map of user -> state\n   */\n  getAllStates() {\n    return new Map(this._userStates);\n  }\n}\n\nexport { CallState };\n\n","/**\n * CallManager - Platform-agnostic call state and business logic management\n * \n * This class manages all call-related business logic without any UI dependencies.\n * It tracks call state, manages mute states, handles timeouts, and collects statistics.\n * \n * Usage:\n *   import { CallManager } from './call-manager.js';\n *   import { EventEmitter } from './event-emitter.js';\n *   \n *   const callManager = new CallManager(rtcClient);\n *   callManager.on('callstarted', (user, type) => { ... });\n *   callManager.on('callended', (user) => { ... });\n *   callManager.on('mutechanged', ({mic, speakers, video}) => { ... });\n *   \n *   // Start a call\n *   await callManager.startCall(user, 'audio');\n *   \n *   // Mute/unmute\n *   callManager.setMicMuted(true);\n *   callManager.setSpeakersMuted(true);\n *   callManager.setVideoHidden(true);\n * \n * Features:\n * - Call state tracking (active calls, pending calls, outgoing calls)\n * - Mute state management (mic, speakers, video)\n * - Call timeout handling\n * - Connection statistics collection\n * - Event-driven architecture\n * \n * @module call-manager\n */\n\nimport { EventEmitter } from '../utils/event-emitter.js';\nimport { CallState } from './call-state.js';\n\nclass CallManager extends EventEmitter {\n  /**\n   * Create a new CallManager instance\n   * @param {Object} rtcClient - RTC client instance (MQTTRTCClient or similar)\n   * @param {Object} options - Configuration options\n   * @param {number} options.callTimeout - Call timeout in milliseconds (default: 15000)\n   * @param {number} options.statsPollInterval - Stats polling interval in milliseconds (default: 2000)\n   * @param {CallUIInterface} options.callUI - Optional call UI component implementing CallUIInterface\n   * @param {StreamDisplayInterface} options.videoDisplay - Optional video display component\n   * @param {StreamDisplayInterface} options.audioDisplay - Optional audio display component\n   * @param {AudioControllerInterface} options.audioController - Optional audio controller\n   * @param {VideoControllerInterface} options.videoController - Optional video controller\n   * @param {RingerInterface} options.ringer - Optional ringtone component\n   * @param {NotificationInterface} options.notifications - Optional notification component\n   * @param {Object} options.chatManager - Optional ChatManager instance for getting active users\n   */\n  constructor(rtcClient, options = {}) {\n    super();\n    \n    this.rtcClient = rtcClient;\n    this.options = {\n      callTimeout: options.callTimeout || 15000,\n      statsPollInterval: options.statsPollInterval || 2000,\n      ...options\n    };\n    \n    // Optional UI components\n    this.callUI = options.callUI || null;\n    this.videoDisplay = options.videoDisplay || null;\n    this.audioDisplay = options.audioDisplay || null;\n    this.audioController = options.audioController || null;\n    this.videoController = options.videoController || null;\n    this.ringer = options.ringer || null;\n    this.notifications = options.notifications || null;\n    this.chatManager = options.chatManager || null;\n    \n    // Unified call state tracking (platform-agnostic, UI-agnostic)\n    this.callState = new CallState();\n    \n    // Additional metadata tracking (not part of core state)\n    this.pendingCalls = new Map(); // Map<user, {callInfo, promises, timeoutId, promptElement}>\n    this.outgoingCalls = new Map(); // Map<user, {type, cancelFn, timeoutId}>\n    // NOTE: We do NOT track localStreams here - they are tracked in rtcClient.rtcConnections[user].localStream\n    // This is the single source of truth for streams\n    \n    // Group call mesh tracking - tracks which users are in the same group call\n    this.groupCallMesh = new Set(); // Set of users in the current group call mesh\n    this.groupCallType = null; // 'audio' or 'video' - type of the group call\n    \n    // Mute state\n    this.muteState = {\n      mic: false,\n      speakers: false,\n      video: false\n    };\n    \n    // Statistics\n    this.statsInterval = null;\n    this.latencyMetrics = new Map(); // Map<user, {rtt, packetLoss, jitter}>\n    \n    // Bind methods\n    this._handleIncomingCall = this._handleIncomingCall.bind(this);\n    this._handleCallConnected = this._handleCallConnected.bind(this);\n    this._handleCallEnded = this._handleCallEnded.bind(this);\n    \n    // Setup RTC client event listeners if available\n    if (rtcClient) {\n      this._setupRTCEventListeners();\n    }\n  }\n\n  /**\n   * Setup event listeners on RTC client\n   * @private\n   */\n  _setupRTCEventListeners() {\n    if (this.rtcClient.on) {\n      this.rtcClient.on('call', this._handleIncomingCall);\n      this.rtcClient.on('callconnected', this._handleCallConnected);\n      this.rtcClient.on('callended', (user) => {\n        console.log(\"CallManager: Received 'callended' event from RTC client for \" + user);\n        this._handleCallEnded(user);\n      });\n      this.rtcClient.on('disconnectedfrompeer', (user) => {\n        this._handleDisconnectedFromUser(user);\n      });\n    }\n  }\n\n  /**\n   * Handle incoming call from RTC client\n   * @param {string} peerName - Name of the peer calling\n   * @param {Object} callInfo - Call information {video: boolean, audio: boolean}\n   * @param {Object} promises - Call promises {start: Promise, end: Promise}\n   * @returns {Promise} Promise that resolves to acceptance result\n   * @private\n   */\n  _handleIncomingCall(peerName, callInfo, promises) {\n    console.log('CallManager._handleIncomingCall called', { peerName, callInfo, hasRinger: !!this.ringer });\n    \n    // Set up timeout for unanswered call\n    const timeoutId = setTimeout(() => {\n      this._handleCallTimeout(peerName, 'incoming');\n    }, this.options.callTimeout);\n    \n    // Track pending call (autoAccepted flag set after we determine preference)\n    this.pendingCalls.set(peerName, {\n      callInfo,\n      promises,\n      timeoutId,\n      promptElement: null,\n      autoAccepted: false\n    });\n    \n    // Update unified call state\n    this.callState.setUserState(peerName, {\n      status: 'pending',\n      audio: callInfo.audio !== false, // Default to true if not specified\n      video: callInfo.video === true\n    });\n    \n    const shouldAutoAccept = this._shouldAutoAcceptIncomingCall(peerName, callInfo);\n    const pendingEntry = this.pendingCalls.get(peerName);\n    if (pendingEntry) {\n      pendingEntry.autoAccepted = shouldAutoAccept;\n    }\n    \n    if (!shouldAutoAccept) {\n      // Start ringing if ringer is provided\n      if (this.ringer && typeof this.ringer.start === 'function') {\n        console.log('Starting ringtone...');\n        this.ringer.start().catch(err => {\n          console.error('Could not start ringtone:', err);\n        });\n      } else {\n        console.warn('No ringer available or ringer.start is not a function', { \n          hasRinger: !!this.ringer, \n          ringerType: this.ringer ? typeof this.ringer : 'undefined',\n          hasStart: this.ringer ? typeof this.ringer.start : 'N/A'\n        });\n      }\n    } else {\n      // Stop any ringing ASAP since we're auto-accepting\n      if (this.ringer && typeof this.ringer.stop === 'function') {\n        this.ringer.stop();\n      }\n    }\n    \n    // Emit event for UI to handle (even if auto-accepting, so UI can update state)\n    this.emit('incomingcall', {\n      peerName,\n      callInfo,\n      promises,\n      timeoutId,\n      autoAccepted: shouldAutoAccept\n    });\n    \n    if (shouldAutoAccept) {\n      console.log(`Auto-accepting incoming call from ${peerName} (already in group call)`);\n      const autoPending = this.pendingCalls.get(peerName);\n      if (autoPending && autoPending.timeoutId) {\n        clearTimeout(autoPending.timeoutId);\n        autoPending.timeoutId = null;\n      }\n      return Promise.resolve(true);\n    }\n    \n    // Use callUI if provided, otherwise auto-accept\n    if (this.callUI && typeof this.callUI.showIncomingCallPrompt === 'function') {\n      return this.callUI.showIncomingCallPrompt(peerName, callInfo);\n    }\n    \n    // Default: auto-accept\n    return Promise.resolve(true);\n  }\n\n  /**\n   * Determine whether we should auto-accept an incoming call\n   * Auto-accept when we're already in a group call (mesh) or already have an active call,\n   * so additional mesh connections don't re-prompt the user.\n   * @param {string} peerName\n   * @param {Object} callInfo\n   * @returns {boolean}\n   * @private\n   */\n  _shouldAutoAcceptIncomingCall(peerName, callInfo) {\n    const activeCalls = this.callState.getActiveCalls();\n    const totalActiveCalls = activeCalls.audio.size + activeCalls.video.size;\n    const isAlreadyInGroupCall = this.groupCallMesh.size > 0;\n    \n    // Auto-accept if we already have at least one active call or if the group mesh is active.\n    if (isAlreadyInGroupCall) {\n      return true;\n    }\n    \n    if (totalActiveCalls > 0) {\n      return true;\n    }\n    \n    // Default: require explicit acceptance\n    return false;\n  }\n\n  /**\n   * Handle call connected event\n   * @param {string} sender - Name of the peer\n   * @param {Object} streams - Stream objects {localStream, remoteStream}\n   * @private\n   */\n  _handleCallConnected(sender, {localStream, remoteStream}) {\n    // Clear pending-call timeout (incoming)\n    const pendingCall = this.pendingCalls.get(sender);\n    if (pendingCall && pendingCall.timeoutId) {\n      clearTimeout(pendingCall.timeoutId);\n      pendingCall.timeoutId = null;\n    }\n    this.pendingCalls.delete(sender);\n\n    // Clear outgoing-call timeout (our dial)\n    const outgoingCall = this.outgoingCalls.get(sender);\n    if (outgoingCall && outgoingCall.timeoutId) {\n      clearTimeout(outgoingCall.timeoutId);\n    }\n    this.outgoingCalls.delete(sender);\n    \n    // Stop ringing if ringer is provided\n    if (this.ringer && typeof this.ringer.stop === 'function') {\n      this.ringer.stop();\n    }\n    \n    // Determine call type\n    const hasVideo = localStream?.getVideoTracks().length > 0 || \n                     remoteStream?.getVideoTracks().length > 0;\n    const hasAudio = localStream?.getAudioTracks().length > 0 || \n                     remoteStream?.getAudioTracks().length > 0;\n    \n    // NOTE: localStream is already stored in rtcClient.rtcConnections[sender].localStream\n    // We don't need to store it again in CallManager\n    \n    // Update unified call state\n    this.callState.setUserState(sender, {\n      status: 'active',\n      audio: hasAudio,\n      video: hasVideo\n    });\n    \n    // Check if we should add to group call mesh\n    // If we're already in a group call, add them\n    // OR if we now have 2+ active calls, start a group call mesh\n    // OR if there are 2+ other users in the room, treat this as a group call\n    const currentActiveCalls = this.callState.getActiveCalls();\n    const totalActiveCalls = currentActiveCalls.audio.size + currentActiveCalls.video.size;\n    const activeUsers = this._getActiveUsers();\n    const hasMultipleUsers = activeUsers.length >= 2; // 2+ other users in room\n    \n    // Determine call type from the current call (hasVideo already determined above)\n    const callType = hasVideo ? 'video' : 'audio';\n    \n    if (this.groupCallMesh.size > 0) {\n      // Already in a group call - add new participant\n      this.groupCallMesh.add(sender);\n      console.log(`Added ${sender} to existing group call mesh. Current mesh:`, Array.from(this.groupCallMesh));\n      \n      // CRITICAL: Automatically connect to all other participants in the mesh\n      // This creates the full mesh network - when B joins, B automatically calls C, D, etc.\n      this._connectToOtherMeshParticipants(sender);\n    } else if (totalActiveCalls >= 2 || hasMultipleUsers) {\n      // We now have 2+ active calls OR 2+ users in room - this is a group call!\n      // Initialize the mesh with all current participants and all active users\n      this.groupCallMesh.clear();\n      this.groupCallMesh.add(this.rtcClient.name); // Add ourselves\n      this.groupCallMesh.add(sender); // Add the person who just connected\n      \n      // Add all active call participants\n      currentActiveCalls.audio.forEach(user => this.groupCallMesh.add(user));\n      currentActiveCalls.video.forEach(user => this.groupCallMesh.add(user));\n      \n      // Also add all other active users in the room (they might not be connected yet)\n      activeUsers.forEach(user => {\n        if (user !== this.rtcClient.name) {\n          this.groupCallMesh.add(user);\n        }\n      });\n      \n      // Set group call type\n      this.groupCallType = callType;\n      \n      console.log(`Detected group call! Initialized mesh with ${this.groupCallMesh.size} participants:`, Array.from(this.groupCallMesh));\n      console.log(`Active users in room: ${activeUsers.length}, Active calls: ${totalActiveCalls}, Call type: ${callType}`);\n      \n      // CRITICAL: Connect ourselves to all other participants in the room\n      // This ensures that when B accepts A's call, B automatically calls C\n      // When C accepts A's call, C automatically calls B\n      // This creates the full mesh network\n      // Pass null as newParticipant since we're the one initiating the mesh connections\n      this._connectToOtherMeshParticipants(null);\n    }\n    \n    // Start stats polling if not already started\n    const activeCalls = this.callState.getActiveCalls();\n    if (!this.statsInterval && (activeCalls.video.size > 0 || activeCalls.audio.size > 0)) {\n      this._startStatsPolling();\n    }\n    \n    // Get shared local stream from RTC client (single source of truth)\n    const sharedLocalStream = this.rtcClient?.sharedLocalStream || localStream;\n    \n    // Emit event\n    this.emit('callconnected', {\n      sender,\n      localStream: sharedLocalStream,\n      remoteStream,\n      type: hasVideo ? 'video' : 'audio'\n    });\n    \n    // Use stream displays if provided\n    if (hasVideo && this.videoDisplay && typeof this.videoDisplay.setStreams === 'function') {\n      this.videoDisplay.setStreams(sender, { localStream: sharedLocalStream, remoteStream });\n    } else if (hasAudio && this.audioDisplay && typeof this.audioDisplay.setStreams === 'function') {\n      this.audioDisplay.setStreams(sender, { localStream: sharedLocalStream, remoteStream });\n    }\n  }\n  \n  /**\n   * Connect to all other participants in the group call mesh\n   * This creates the full mesh network - everyone connects to everyone\n   * @param {string} newParticipant - The participant who just joined (or null if we're initiating)\n   * @private\n   */\n  async _connectToOtherMeshParticipants(newParticipant) {\n    if (!this.groupCallType) {\n      console.warn('_connectToOtherMeshParticipants called but no groupCallType set');\n      return;\n    }\n    \n    const activeCalls = this.callState.getActiveCalls();\n    const allActiveParticipants = new Set([\n      ...activeCalls.audio,\n      ...activeCalls.video\n    ]);\n    \n    // Build list of users we should connect to: anyone in the mesh OR currently active in the room\n    const roomParticipants = this._getActiveUsers();\n    const meshParticipants = Array.from(this.groupCallMesh || []);\n    const potentialParticipants = new Set([\n      ...roomParticipants,\n      ...meshParticipants\n    ]);\n    \n    const otherParticipants = Array.from(potentialParticipants).filter(user => {\n      if (!user) return false;\n      if (user === this.rtcClient?.name) return false; // Never call ourselves\n      if (newParticipant && user === newParticipant) return false; // Skip the participant we just connected with\n      return !allActiveParticipants.has(user); // Skip if we already have an active connection\n    });\n    \n    if (otherParticipants.length === 0) {\n      console.log('No other participants to connect to in mesh');\n      return;\n    }\n    \n    console.log(`${newParticipant || 'We'} joining group call. Connecting to other participants:`, otherParticipants);\n    console.log(`Current active participants:`, Array.from(allActiveParticipants));\n    console.log(`Group call mesh:`, Array.from(this.groupCallMesh));\n    \n    // Call all other participants in parallel\n    const callInfo = this.groupCallType === 'audio' \n      ? { video: false, audio: true }\n      : { video: true, audio: true };\n    \n    const connectionPromises = otherParticipants.map(async (participant) => {\n      // Check current state for this participant\n      const isAlreadyConnected = allActiveParticipants.has(participant);\n      const isPending = this.pendingCalls.has(participant);\n      const isOutgoing = this.outgoingCalls.has(participant);\n      \n      if (isAlreadyConnected) {\n        console.log(`Skipping ${participant} - already connected`);\n        return { participant, skipped: true };\n      }\n      \n      // If we have stale pending/outgoing entries (for example from a previous attempt),\n      // clear them so we can safely retry the connection.\n      if (isPending) {\n        console.log(`Clearing stale pending call for ${participant} before reconnecting`);\n        const pending = this.pendingCalls.get(participant);\n        if (pending?.timeoutId) {\n          clearTimeout(pending.timeoutId);\n        }\n        this.pendingCalls.delete(participant);\n      }\n      \n      if (isOutgoing) {\n        console.log(`Cancelling stale outgoing call for ${participant} before reconnecting`);\n        const outgoing = this.outgoingCalls.get(participant);\n        if (outgoing?.timeoutId) {\n          clearTimeout(outgoing.timeoutId);\n        }\n        this.outgoingCalls.delete(participant);\n      }\n      \n      try {\n        console.log(`Auto-connecting to ${participant} in mesh (from ${newParticipant || 'initiator'})`);\n        const { start, end } = this.rtcClient.callUser(participant, callInfo);\n        \n        // Track as automatic mesh connection\n        this.outgoingCalls.set(participant, {\n          type: this.groupCallType,\n          cancelFn: null,\n          timeoutId: null,\n          isMeshConnection: true\n        });\n        \n        // Wait for connection\n        const streamResult = await start;\n        if (streamResult && (streamResult.localStream || streamResult.remoteStream)) {\n          this._handleCallConnected(participant, streamResult);\n        }\n        return { participant, success: true };\n      } catch (err) {\n        console.warn(`Failed to auto-connect to ${participant}:`, err);\n        this.outgoingCalls.delete(participant);\n        return { participant, success: false, error: err };\n      }\n    });\n    \n    // Wait for all connections (but don't fail if some fail)\n    const results = await Promise.allSettled(connectionPromises);\n    const successful = results.filter(r => r.status === 'fulfilled' && r.value.success).length;\n    console.log(`Mesh connection: ${successful}/${otherParticipants.length} successful`);\n  }\n\n  /**\n   * Handle call ended event from receiving \"callended\" message\n   * Only ends the specific call, keeps other connections active\n   * @param {string} peerName - Name of the peer\n   * @private\n   */\n  _handleCallEnded(peerName) {\n    console.log(\"CallManager._handleCallEnded: Called for \" + peerName + \" (receiver side - only end this call)\");\n    // Check if call is already ended (idempotent)\n    const currentState = this.callState.getUserState(peerName);\n    if (currentState && currentState.status === 'inactive') {\n      // Already ended, skip\n      console.log(\"CallManager._handleCallEnded: Call already ended for \" + peerName + \", skipping\");\n      return;\n    }\n    \n    // Only finalize THIS specific call (receiver side)\n    this._finalizeCallClosure(peerName);\n    \n    // Check if there are any remaining active calls after closing this one\n    const remainingActiveCalls = this.callState.getActiveCalls();\n    const hasRemainingCalls = remainingActiveCalls.audio.size > 0 || remainingActiveCalls.video.size > 0;\n    \n    console.log(\"CallManager._handleCallEnded: After ending \" + peerName + \", remaining calls:\", {\n      audio: Array.from(remainingActiveCalls.audio),\n      video: Array.from(remainingActiveCalls.video),\n      hasRemainingCalls\n    });\n    \n    // Only stop stats polling if no calls remain\n    // Note: RTC layer handles closing streams/stopping tracks\n    if (!hasRemainingCalls) {\n      this._stopStatsPolling();\n      this.groupCallMesh.clear();\n      this.groupCallType = null;\n      console.log(\"CallManager._handleCallEnded: No remaining calls, released all resources\");\n    } else {\n      console.log(\"CallManager._handleCallEnded: Other calls still active, keeping resources\");\n    }\n  }\n\n  /**\n   * Handle call timeout\n   * @param {string} peerName - Name of the peer\n   * @param {string} direction - 'incoming' or 'outgoing'\n   * @private\n   */\n  _handleCallTimeout(peerName, direction) {\n    const pendingCall = this.pendingCalls.get(peerName);\n    const wasAutoAccepted = pendingCall?.autoAccepted;\n    \n    // Stop ringing if ringer is provided\n    if (this.ringer && typeof this.ringer.stop === 'function') {\n      this.ringer.stop();\n    }\n    \n    // End call with RTC client to send message\n    if (this.rtcClient && this.rtcClient.endCallWithUser) {\n      try {\n        this.rtcClient.endCallWithUser(peerName);\n      } catch (err) {\n        console.warn(`Error ending timed out call:`, err);\n      }\n    }\n    \n    // Finalize only this specific call\n    this._finalizeCallClosure(peerName);\n    \n    // Check if there are any remaining active calls\n    const remainingActiveCalls = this.callState.getActiveCalls();\n    const hasRemainingCalls = remainingActiveCalls.audio.size > 0 || remainingActiveCalls.video.size > 0;\n    \n    // Only release resources if no calls remain\n    // Note: RTC layer handles closing streams/stopping tracks\n    if (!hasRemainingCalls) {\n      this._stopStatsPolling();\n      this.groupCallMesh.clear();\n      this.groupCallType = null;\n    }\n    \n    // Emit timeout event for UI notifications\n    this.emit('calltimeout', { peerName, direction });\n    \n    // Use callUI if provided (skip notifications for auto-accepted mesh calls)\n    if (!wasAutoAccepted && this.callUI && typeof this.callUI.showMissedCallNotification === 'function') {\n      this.callUI.showMissedCallNotification(peerName, direction);\n    }\n    \n    // Clean up stream displays\n    if (this.videoDisplay && typeof this.videoDisplay.removeStreams === 'function') {\n      this.videoDisplay.removeStreams(peerName);\n    }\n    if (this.audioDisplay && typeof this.audioDisplay.removeStreams === 'function') {\n      this.audioDisplay.removeStreams(peerName);\n    }\n  }\n\n  /**\n   * Handle user disconnection\n   * @param {string} user - Name of the user\n   * @private\n   */\n  _handleDisconnectedFromUser(user) {\n    const userState = this.callState.getUserState(user);\n    const hasActiveOrPendingCall = userState && (userState.status === 'active' || userState.status === 'pending');\n    const hasOutgoingCall = this.outgoingCalls.has(user);\n    \n    if (hasActiveOrPendingCall || hasOutgoingCall) {\n      // End call with disconnected user\n      if (this.rtcClient && this.rtcClient.endCallWithUser) {\n        try {\n          this.rtcClient.endCallWithUser(user);\n        } catch (err) {\n          console.warn(`Error ending call with disconnected user:`, err);\n        }\n      }\n      \n      // Finalize only this specific call\n      this._finalizeCallClosure(user);\n      \n      // Check if there are any remaining active calls\n      const remainingActiveCalls = this.callState.getActiveCalls();\n      const hasRemainingCalls = remainingActiveCalls.audio.size > 0 || remainingActiveCalls.video.size > 0;\n      \n      // Only release resources if no calls remain\n      // Note: RTC layer handles closing streams/stopping tracks\n      if (!hasRemainingCalls) {\n        this._stopStatsPolling();\n        this.groupCallMesh.clear();\n        this.groupCallType = null;\n      }\n    }\n  }\n\n  /**\n   * Log all active tracks and their dependent streams\n   * Single source of truth: rtcClient.rtcConnections\n   * @private\n   */\n  _logActiveTracksAndStreams() {\n    console.log(\"=== ACTIVE TRACKS AND STREAMS (Single Source: rtcConnections) ===\");\n    \n    const allTracks = new Map(); // track.id -> {track, owners: []}\n    \n    // Collect from rtcConnections ONLY (single source of truth)\n    if (this.rtcClient && this.rtcClient.rtcConnections) {\n      for (const [user, conn] of Object.entries(this.rtcClient.rtcConnections)) {\n        if (conn && conn.localStream && conn.localStream.getTracks) {\n          conn.localStream.getTracks().forEach(track => {\n            if (!allTracks.has(track.id)) {\n              allTracks.set(track.id, { track, owners: [] });\n            }\n            allTracks.get(track.id).owners.push(user);\n          });\n        }\n      }\n    }\n    \n    console.log(`Total unique tracks: ${allTracks.size}`);\n    for (const [trackId, {track, owners}] of allTracks.entries()) {\n      console.log(`  Track ${track.kind} ${trackId.substring(0, 8)}... (readyState: ${track.readyState})`);\n      console.log(`    - Used by rtcConnections: [${owners.join(', ')}]`);\n    }\n    console.log(\"==================================================================\");\n  }\n\n  /**\n   * Close a stream properly: stop its tracks only if not shared by other streams\n   * CRITICAL: This is the ONLY method that should stop tracks\n   * Single source of truth: rtcClient.rtcConnections\n   * @param {MediaStream} stream - Stream to close\n   * @param {string} streamOwner - Owner identifier (for checking if track is shared)\n   * @private\n   */\n  _closeStream(stream, streamOwner) {\n    if (!stream || typeof stream.getTracks !== 'function') {\n      console.warn(`_closeStream: Invalid stream for ${streamOwner}`);\n      return;\n    }\n    \n    const tracks = stream.getTracks();\n    console.log(`_closeStream: Closing stream for ${streamOwner} with ${tracks.length} track(s)`);\n    \n    tracks.forEach(track => {\n      // Check if ANY other RTC connection uses this track (single source of truth)\n      let trackShared = false;\n      \n      if (this.rtcClient && this.rtcClient.rtcConnections) {\n        for (const [user, conn] of Object.entries(this.rtcClient.rtcConnections)) {\n          if (user === streamOwner) continue; // Skip the connection we're closing\n          if (conn && conn.localStream && conn.localStream.getTracks) {\n            if (conn.localStream.getTracks().some(t => t.id === track.id)) {\n              trackShared = true;\n              console.log(`_closeStream: Track ${track.kind} ${track.id.substring(0,8)}... is shared with rtcConnection[${user}]`);\n              break;\n            }\n          }\n        }\n      }\n      \n      // Only stop track if NOT shared\n      if (!trackShared) {\n        console.log(`_closeStream: Stopping ${track.kind} track ${track.id.substring(0,8)}... (readyState: ${track.readyState})`);\n        try {\n          track.stop();\n          console.log(`_closeStream: Stopped track (new readyState: ${track.readyState})`);\n        } catch (err) {\n          console.warn(`_closeStream: Failed to stop track:`, err);\n        }\n      } else {\n        console.log(`_closeStream: Keeping ${track.kind} track ${track.id.substring(0,8)}... alive (shared)`);\n      }\n    });\n    \n    // Log state after closing\n    this._logActiveTracksAndStreams();\n  }\n\n  /**\n   * Close the stream for a specific RTC connection\n   * Single source of truth: rtcClient.rtcConnections[user].localStream\n   * @param {string} user - User identifier\n   * @private\n   */\n  _releaseLocalStreamForUser(user) {\n    console.log(`_releaseLocalStreamForUser: Closing stream for ${user}`);\n    this._logActiveTracksAndStreams();\n    \n    if (!this.rtcClient || !this.rtcClient.rtcConnections || !this.rtcClient.rtcConnections[user]) {\n      console.log(`_releaseLocalStreamForUser: No RTC connection for ${user}`);\n      return;\n    }\n    \n    const conn = this.rtcClient.rtcConnections[user];\n    const stream = conn.localStream;\n    \n    if (!stream) {\n      console.log(`_releaseLocalStreamForUser: No localStream in connection for ${user}`);\n      return;\n    }\n    \n    // Remove from connection BEFORE closing (so _closeStream doesn't see it when checking)\n    conn.localStream = null;\n    \n    // Close the stream (will check if tracks are shared and stop accordingly)\n    this._closeStream(stream, user);\n  }\n\n  /**\n   * Fully tear down local bookkeeping for a peer that has ended\n   * @param {string} user\n   * @private\n   */\n  _finalizeCallClosure(user) {\n    if (!user) {\n      return;\n    }\n    \n    // Clear pending call timeouts\n    const pendingCall = this.pendingCalls.get(user);\n    if (pendingCall && pendingCall.timeoutId) {\n      clearTimeout(pendingCall.timeoutId);\n    }\n    this.pendingCalls.delete(user);\n    \n    // Clear outgoing call timeouts\n    const outgoingCall = this.outgoingCalls.get(user);\n    if (outgoingCall && outgoingCall.timeoutId) {\n      clearTimeout(outgoingCall.timeoutId);\n    }\n    this.outgoingCalls.delete(user);\n    \n    // Reset unified call state\n    this.callState.setUserState(user, {\n      status: 'inactive',\n      audio: false,\n      video: false\n    });\n    \n    // Note: RTC layer handles closing streams/stopping tracks via endCallWithUser\n    this.latencyMetrics.delete(user);\n    \n    // Remove from group call mesh (and clear when empty)\n    if (this.groupCallMesh.has(user)) {\n      this.groupCallMesh.delete(user);\n      console.log(`Removed ${user} from group call mesh. Remaining:`, Array.from(this.groupCallMesh));\n      if (this.groupCallMesh.size <= 1) {\n        this.groupCallMesh.clear();\n        this.groupCallType = null;\n        console.log('Group call mesh cleared - no more participants');\n      }\n    }\n    \n    // Notify UI layers that this peer is gone\n    this.emit('callended', { peerName: user });\n  }\n\n  /**\n   * Close all streams from RTC connections\n   * Single source of truth: rtcClient.rtcConnections\n   * @private\n   */\n  _releaseAllLocalStreams() {\n    console.log(`_releaseAllLocalStreams: Closing all RTC connection streams`);\n    \n    if (!this.rtcClient || !this.rtcClient.rtcConnections) {\n      console.log(`_releaseAllLocalStreams: No RTC connections`);\n      return;\n    }\n    \n    // Get all users with connections\n    const users = Object.keys(this.rtcClient.rtcConnections);\n    console.log(`_releaseAllLocalStreams: Found ${users.length} connections`);\n    \n    // Close each stream individually\n    for (const user of users) {\n      this._releaseLocalStreamForUser(user);\n    }\n  }\n\n  /**\n   * Get list of active users (connected peers)\n   * @returns {Array<string>} Array of user names\n   * @private\n   */\n  _getActiveUsers() {\n    let users = [];\n    \n    // Try to get from chatManager first\n    if (this.chatManager && typeof this.chatManager.getActiveUsers === 'function') {\n      users = this.chatManager.getActiveUsers();\n      console.log('Got active users from chatManager:', users);\n      return users;\n    }\n    \n    // Fallback to rtcClient connectedUsers\n    if (this.rtcClient && this.rtcClient.connectedUsers) {\n      const connected = this.rtcClient.connectedUsers;\n      users = Array.isArray(connected) ? connected : [];\n      console.log('Got active users from rtcClient.connectedUsers:', users);\n      return users;\n    }\n    \n    // Last resort: get from rtcConnections\n    if (this.rtcClient && this.rtcClient.rtcConnections) {\n      users = Object.keys(this.rtcClient.rtcConnections).filter(user => {\n        const conn = this.rtcClient.rtcConnections[user];\n        return conn && conn.peerConnection && \n               (conn.peerConnection.connectionState === 'connected' || \n                conn.peerConnection.connectionState === 'completed');\n      });\n      console.log('Got active users from rtcConnections:', users);\n      return users;\n    }\n    \n    console.warn('No active users found!');\n    return [];\n  }\n\n  /**\n   * Start a group call with multiple users - creates a full mesh network\n   * @param {string|Array<string>} users - 'all' to call all active users, or array of user names\n   * @param {string} type - 'audio' or 'video'\n   * @returns {Promise} Promise that resolves with results for all calls\n   */\n  async startGroupCall(users, type) {\n    if (!this.rtcClient || !this.rtcClient.callUser) {\n      throw new Error('RTC client not available or does not support callUser');\n    }\n    \n    // Get target users\n    let targetUsers;\n    if (users === 'all') {\n      targetUsers = this._getActiveUsers();\n      console.log('startGroupCall: Got active users for \"all\":', targetUsers);\n    } else if (Array.isArray(users)) {\n      targetUsers = users;\n      console.log('startGroupCall: Using provided user array:', targetUsers);\n    } else {\n      // Single user - convert to array\n      targetUsers = [users];\n      console.log('startGroupCall: Single user converted to array:', targetUsers);\n    }\n    \n    if (targetUsers.length === 0) {\n      console.error('startGroupCall: No users to call!');\n      throw new Error('No users to call');\n    }\n    \n    console.log(`startGroupCall: Will call ${targetUsers.length} users:`, targetUsers);\n    \n    // Filter out users we're already calling\n    const activeCalls = this.callState.getActiveCalls();\n    const pendingCalls = this.callState.getPendingCalls();\n    const alreadyInCall = new Set([\n      ...activeCalls.audio,\n      ...activeCalls.video,\n      ...pendingCalls,\n      ...this.outgoingCalls.keys()\n    ]);\n    \n    targetUsers = targetUsers.filter(user => !alreadyInCall.has(user));\n    \n    if (targetUsers.length === 0) {\n      throw new Error('All selected users are already in a call');\n    }\n    \n    // Initialize group call mesh - add ourselves and all target users\n    this.groupCallMesh.clear();\n    this.groupCallMesh.add(this.rtcClient.name); // Add ourselves\n    targetUsers.forEach(user => this.groupCallMesh.add(user));\n    this.groupCallType = type;\n    \n    console.log(`Starting group ${type} call mesh with ${targetUsers.length} users:`, targetUsers);\n    console.log('Group call mesh participants:', Array.from(this.groupCallMesh));\n    \n    const callInfo = type === 'audio' \n      ? { video: false, audio: true }\n      : { video: true, audio: true };\n    \n    console.log(`Calling ${targetUsers.length} users simultaneously:`, targetUsers);\n    \n    // Start calls to all users in parallel - call RTC client directly\n    // When each user accepts, they will automatically connect to all other participants\n    const callPromises = targetUsers.map(async (user) => {\n      try {\n        console.log(`Initiating call to ${user}...`);\n        \n        // Track as outgoing call\n        const timeoutId = setTimeout(() => {\n          this._handleCallTimeout(user, 'outgoing');\n        }, this.options.callTimeout);\n        \n        this.outgoingCalls.set(user, {\n          type,\n          cancelFn: null,\n          timeoutId,\n          isMeshConnection: false\n        });\n        \n        // Call RTC client directly (bypass startCall to avoid single-call assumptions)\n        const { start, end } = this.rtcClient.callUser(user, callInfo);\n        \n        // Await the start promise to get the streams\n        const streamResult = await start;\n        \n        // Clear timeout if call started successfully\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n        }\n        \n        // If streamResult contains streams, handle them\n        if (streamResult && (streamResult.localStream || streamResult.remoteStream)) {\n          this._handleCallConnected(user, streamResult);\n        }\n        \n        // Emit event\n        this.emit('callstarted', { user, type });\n        \n        console.log(`Successfully called ${user}`);\n        return { user, success: true, result: { ...streamResult, end } };\n      } catch (err) {\n        console.error(`Failed to call ${user}:`, err);\n        \n        // Clear timeout\n        const outgoingCall = this.outgoingCalls.get(user);\n        if (outgoingCall && outgoingCall.timeoutId) {\n          clearTimeout(outgoingCall.timeoutId);\n        }\n        this.outgoingCalls.delete(user);\n        \n        // Remove from mesh if call failed\n        this.groupCallMesh.delete(user);\n        \n        // Check if call was rejected\n        if (err === \"Call rejected\" || err?.message === \"Call rejected\") {\n          this._handleCallEnded(user);\n          this.emit('callrejected', { user });\n        } else {\n          this._handleCallEnded(user);\n          this.emit('callerror', { user, error: err });\n        }\n        \n        // Don't end other calls if one fails\n        return { user, success: false, error: err };\n      }\n    });\n    \n    const results = await Promise.allSettled(callPromises);\n    \n    // Process results\n    const successful = [];\n    const failed = [];\n    \n    results.forEach((result, index) => {\n      if (result.status === 'fulfilled' && result.value.success) {\n        successful.push(result.value.user);\n      } else {\n        failed.push({\n          user: targetUsers[index],\n          error: result.status === 'fulfilled' ? result.value.error : result.reason\n        });\n        this.groupCallMesh.delete(targetUsers[index]);\n      }\n    });\n    \n    // Emit group call event\n    this.emit('groupcallstarted', { \n      users: targetUsers, \n      type, \n      successful,\n      failed,\n      results \n    });\n    \n    return {\n      successful,\n      failed,\n      total: targetUsers.length\n    };\n  }\n\n  /**\n   * Start a call with a user\n   * @param {string} user - Name of the user to call\n   * @param {string} type - 'audio' or 'video'\n   * @returns {Promise} Promise that resolves when call starts\n   */\n  async startCall(user, type) {\n    if (!this.rtcClient || !this.rtcClient.callUser) {\n      throw new Error('RTC client not available or does not support callUser');\n    }\n    \n    const callInfo = type === 'audio' \n      ? { video: false, audio: true }\n      : { video: true, audio: true };\n    \n    // Create cancel function\n    let timeoutId = null;\n    const cancelCall = (reason = 'cancelled') => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n        timeoutId = null;\n      }\n      this.outgoingCalls.delete(user);\n      if (this.rtcClient && this.rtcClient.endCallWithUser) {\n        try {\n          this.rtcClient.endCallWithUser(user);\n        } catch (err) {\n          console.error(`Error canceling call:`, err);\n        }\n      }\n      this.emit('callcancelled', { user, reason });\n    };\n    \n    // Set up timeout\n    timeoutId = setTimeout(() => {\n      this._handleCallTimeout(user, 'outgoing');\n    }, this.options.callTimeout);\n    \n    // Track outgoing call\n    this.outgoingCalls.set(user, {\n      type,\n      cancelFn: cancelCall,\n      timeoutId\n    });\n    \n    try {\n      // Start the call - callUser returns {start, end} promises\n      const { start, end } = this.rtcClient.callUser(user, callInfo);\n      \n      // Await the start promise to get the streams\n      const streamResult = await start;\n      \n      // Clear timeout if call started successfully\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n        timeoutId = null;\n      }\n      \n      // If streamResult contains streams, handle them\n      if (streamResult && (streamResult.localStream || streamResult.remoteStream)) {\n        this._handleCallConnected(user, streamResult);\n      }\n      \n      // Emit event\n      this.emit('callstarted', { user, type });\n      \n      // Return the stream result and end promise\n      return { ...streamResult, end };\n    } catch (err) {\n      // Clear timeout\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      this.outgoingCalls.delete(user);\n      \n      // Check if call was rejected\n      if (err === \"Call rejected\" || err?.message === \"Call rejected\") {\n        // Only end this specific call, not all calls\n        this._handleCallEnded(user);\n        this.emit('callrejected', { user });\n      } else {\n        // For other errors, only end this specific call\n        this._handleCallEnded(user);\n        this.emit('callerror', { user, error: err });\n      }\n      \n      throw err;\n    }\n  }\n\n  /**\n   * End a call with a user\n   * This ends the specific call and sends \"endcall\" message to peer\n   * Note: For ending all calls (button click), use endAllCalls() instead\n   * @param {string} user - Name of the user\n   */\n  endCall(user) {\n    console.log(\"CallManager.endCall: Ending call with \" + user);\n    \n    // Tell RTC client to end the call and send \"endcall\" message to peer\n    if (this.rtcClient && this.rtcClient.endCallWithUser) {\n      try {\n        this.rtcClient.endCallWithUser(user);\n      } catch (err) {\n        console.error(`Error ending call:`, err);\n      }\n    }\n    \n    // Finalize this specific call locally\n    this._finalizeCallClosure(user);\n    \n    // Check if there are any remaining active calls\n    const remainingActiveCalls = this.callState.getActiveCalls();\n    const hasRemainingCalls = remainingActiveCalls.audio.size > 0 || remainingActiveCalls.video.size > 0;\n    \n    // Only stop stats polling if no calls remain\n    // Note: RTC layer handles closing streams/stopping tracks\n    if (!hasRemainingCalls) {\n      this._stopStatsPolling();\n      this.groupCallMesh.clear();\n      this.groupCallType = null;\n      console.log(\"CallManager.endCall: No remaining calls, released all resources\");\n    } else {\n      console.log(\"CallManager.endCall: Other calls still active, keeping resources\");\n    }\n  }\n\n  /**\n   * End all active calls (initiator side - button click)\n   * Delegates to RTC layer which handles streams and tracks\n   */\n  endAllCalls() {\n    console.log(\"CallManager.endAllCalls: Ending ALL calls\");\n    \n    // Get users from call state\n    const activeCalls = this.callState.getActiveCalls();\n    const pendingCalls = this.callState.getPendingCalls();\n    const allUsers = new Set([...activeCalls.video, ...activeCalls.audio, ...pendingCalls, ...this.outgoingCalls.keys()]);\n    \n    // ALSO get users from rtcConnections (source of truth for actual connections)\n    if (this.rtcClient && this.rtcClient.rtcConnections) {\n      for (const user of Object.keys(this.rtcClient.rtcConnections)) {\n        allUsers.add(user);\n      }\n    }\n    \n    console.log(\"CallManager.endAllCalls: All users to end:\", Array.from(allUsers));\n    \n    // Delegate to RTC client to end calls (it handles streams/tracks)\n    for (const user of allUsers) {\n      this.endCall(user);\n    }\n    \n    console.log(\"CallManager.endAllCalls: Complete\");\n  }\n\n  /**\n   * Set microphone mute state\n   * @param {boolean} muted - Whether microphone is muted\n   */\n  setMicMuted(muted) {\n    this.muteState.mic = muted;\n    \n    // Update all local streams\n    for (const [user, stream] of this.localStreams.entries()) {\n      if (stream && stream instanceof MediaStream) {\n        const audioTracks = stream.getAudioTracks();\n        audioTracks.forEach(track => {\n          track.enabled = !muted;\n        });\n      }\n    }\n    \n    this.emit('mutechanged', { ...this.muteState });\n  }\n\n  /**\n   * Set speakers mute state\n   * @param {boolean} muted - Whether speakers are muted\n   */\n  setSpeakersMuted(muted) {\n    this.muteState.speakers = muted;\n    \n    // Note: Speakers muting requires UI to handle remote audio/video elements\n    // This just tracks the state and emits event\n    this.emit('mutechanged', { ...this.muteState });\n    this.emit('speakersmutechanged', { muted });\n  }\n\n  /**\n   * Set video hidden state\n   * @param {boolean} hidden - Whether video is hidden\n   */\n  setVideoHidden(hidden) {\n    this.muteState.video = hidden;\n    \n    // Update all local streams\n    for (const [user, stream] of this.localStreams.entries()) {\n      if (stream && stream instanceof MediaStream) {\n        const videoTracks = stream.getVideoTracks();\n        videoTracks.forEach(track => {\n          track.enabled = !hidden;\n        });\n      }\n    }\n    \n    // Use videoController if provided\n    if (this.videoController && typeof this.videoController.setVideoHidden === 'function') {\n      this.videoController.setVideoHidden(hidden, this.localStreams);\n    }\n    \n    this.emit('mutechanged', { ...this.muteState });\n  }\n\n  /**\n   * Get current mute state\n   * @returns {Object} Mute state {mic: boolean, speakers: boolean, video: boolean}\n   */\n  getMuteState() {\n    return { ...this.muteState };\n  }\n\n  /**\n   * Get active calls\n   * @returns {Object} {audio: Set, video: Set}\n   */\n  getActiveCalls() {\n    // Use unified call state as source of truth\n    return this.callState.getActiveCalls();\n  }\n\n  /**\n   * Get pending incoming calls\n   * @returns {Set} Set of user names with pending incoming calls\n   */\n  getPendingCalls() {\n    // Use unified call state as source of truth\n    return this.callState.getPendingCalls();\n  }\n\n  /**\n   * Get call state for a user\n   * @param {string} user - User name\n   * @returns {Object|null} State object {status: string, audio: boolean, video: boolean} or null\n   */\n  getUserCallState(user) {\n    return this.callState.getUserState(user);\n  }\n\n  /**\n   * Get all call states\n   * @returns {Map} Map of user -> state\n   */\n  getAllCallStates() {\n    return this.callState.getAllStates();\n  }\n\n  /**\n   * Get latency metrics for a user\n   * @param {string} user - User name\n   * @returns {Object|null} Metrics {rtt, packetLoss, jitter} or null\n   */\n  getMetrics(user) {\n    return this.latencyMetrics.get(user) || null;\n  }\n\n  /**\n   * Get all latency metrics\n   * @returns {Map} Map of user -> metrics\n   */\n  getAllMetrics() {\n    return new Map(this.latencyMetrics);\n  }\n\n  /**\n   * Start polling connection statistics\n   * @private\n   */\n  _startStatsPolling() {\n    if (this.statsInterval) {\n      return;\n    }\n    \n    this.statsInterval = setInterval(() => {\n      this._collectConnectionStats();\n    }, this.options.statsPollInterval);\n    \n    // Collect initial stats\n    this._collectConnectionStats();\n  }\n\n  /**\n   * Stop polling connection statistics\n   * @private\n   */\n  _stopStatsPolling() {\n    if (this.statsInterval) {\n      clearInterval(this.statsInterval);\n      this.statsInterval = null;\n    }\n  }\n\n  /**\n   * Collect connection statistics from active calls\n   * @private\n   */\n  async _collectConnectionStats() {\n    if (!this.rtcClient || !this.rtcClient.rtcConnections) {\n      return;\n    }\n    \n    const activeCalls = this.callState.getActiveCalls();\n    const activeCallUsers = new Set([...activeCalls.video, ...activeCalls.audio]);\n    \n    for (const user of activeCallUsers) {\n      const connection = this.rtcClient.rtcConnections[user];\n      if (!connection) {\n        continue;\n      }\n      \n      try {\n        const streamConnection = connection.streamConnection;\n        // Check if stream connection exists and is in a connected state\n        if (streamConnection && (streamConnection.iceConnectionState === 'connected' || streamConnection.iceConnectionState === 'completed')) {\n          const stats = await streamConnection.getStats();\n          \n          let rtt = null;\n          let packetLoss = null;\n          let jitter = null;\n          \n          // Parse stats - WebRTC stats API structure\n          for (const [id, report] of stats.entries()) {\n            // Try multiple ways to get RTT\n            if (report.type === 'candidate-pair' && report.state === 'succeeded') {\n              // currentRoundTripTime is in seconds, convert to ms\n              if (report.currentRoundTripTime !== undefined && report.currentRoundTripTime > 0) {\n                rtt = report.currentRoundTripTime * 1000;\n              } else if (report.roundTripTime !== undefined && report.roundTripTime > 0) {\n                rtt = report.roundTripTime * 1000;\n              }\n            }\n            \n            // Also check transport stats for RTT\n            if (report.type === 'transport') {\n              if (report.currentRoundTripTime !== undefined && report.currentRoundTripTime > 0) {\n                rtt = report.currentRoundTripTime * 1000;\n              } else if (report.rtt !== undefined && report.rtt > 0) {\n                rtt = report.rtt * 1000;\n              }\n            }\n            \n            // Get audio stats\n            if (report.type === 'inbound-rtp' && report.mediaType === 'audio') {\n              if (report.packetsLost !== undefined && report.packetsReceived !== undefined) {\n                const totalPackets = report.packetsLost + report.packetsReceived;\n                if (totalPackets > 0) {\n                  packetLoss = (report.packetsLost / totalPackets) * 100;\n                }\n              }\n              // jitter is already in seconds, convert to ms\n              if (report.jitter !== undefined && report.jitter > 0) {\n                jitter = report.jitter * 1000;\n              }\n            }\n            \n            // Get video stats (for packet loss if audio didn't have it)\n            if (report.type === 'inbound-rtp' && report.mediaType === 'video') {\n              if (report.packetsLost !== undefined && report.packetsReceived !== undefined) {\n                const totalPackets = report.packetsLost + report.packetsReceived;\n                if (totalPackets > 0) {\n                  const videoPacketLoss = (report.packetsLost / totalPackets) * 100;\n                  if (packetLoss === null) {\n                    packetLoss = videoPacketLoss;\n                  }\n                }\n              }\n            }\n          }\n          \n          // Only update metrics if we got at least one valid value\n          // This prevents overwriting with null values\n          const currentMetrics = this.latencyMetrics.get(user) || { rtt: null, packetLoss: null, jitter: null };\n          const updatedMetrics = {\n            rtt: rtt !== null ? rtt : currentMetrics.rtt,\n            packetLoss: packetLoss !== null ? packetLoss : currentMetrics.packetLoss,\n            jitter: jitter !== null ? jitter : currentMetrics.jitter\n          };\n          \n          // Store metrics\n          this.latencyMetrics.set(user, updatedMetrics);\n          \n          // Emit event\n          this.emit('metricsupdated', { user, metrics: updatedMetrics });\n        }\n      } catch (err) {\n        console.warn(`Error collecting stats for ${user}:`, err);\n      }\n    }\n  }\n\n  /**\n   * Cleanup and destroy the manager\n   */\n  destroy() {\n    // Stop stats polling\n    this._stopStatsPolling();\n    \n    // End all calls\n    this.endAllCalls();\n    \n    // Clear all state\n    // Note: RTC layer handles closing streams/stopping tracks\n    this.pendingCalls.clear();\n    this.outgoingCalls.clear();\n    this.latencyMetrics.clear();\n    \n    // Clear unified call state\n    this.callState.clear();\n    \n    // Remove event listeners\n    if (this.rtcClient && this.rtcClient.off) {\n      this.rtcClient.off('call', this._handleIncomingCall);\n      this.rtcClient.off('callconnected', this._handleCallConnected);\n      this.rtcClient.off('callended', this._handleCallEnded);\n    }\n    \n    // Remove all event listeners\n    this.removeAllListeners();\n  }\n}\n\nexport { CallManager };\n\n\n","/**\n * ChatManager - Platform-agnostic chat message and state management\n * \n * This class manages chat-related business logic without any UI dependencies.\n * It tracks messages, active users, and provides a clean API for chat operations.\n * \n * Usage:\n *   import { ChatManager } from './chat-manager.js';\n *   import { EventEmitter } from './event-emitter.js';\n *   \n *   const chatManager = new ChatManager(rtcClient);\n *   chatManager.on('message', ({data, sender, timestamp}) => { ... });\n *   chatManager.on('userconnected', (user) => { ... });\n *   chatManager.on('userdisconnected', (user) => { ... });\n *   \n *   // Send a message\n *   chatManager.sendMessage('Hello!');\n * \n * Features:\n * - Message history tracking\n * - Active user management\n * - User color assignment\n * - Event-driven architecture\n * \n * @module chat-manager\n */\n\nimport { EventEmitter } from '../utils/event-emitter.js';\n\nclass ChatManager extends EventEmitter {\n  /**\n   * Create a new ChatManager instance\n   * @param {Object} rtcClient - RTC client instance (MQTTRTCClient or similar)\n   * @param {Object} options - Configuration options\n   * @param {string} options.primaryUserColor - Color for primary user messages (default: 'lightblue')\n   * @param {Array<string>} options.userColors - Array of colors for other users\n   * @param {ChatUIInterface} options.chatUI - Optional chat UI component implementing ChatUIInterface\n   * @param {NotificationInterface} options.notifications - Optional notification component\n   */\n  constructor(rtcClient, options = {}) {\n    super();\n    \n    this.rtcClient = rtcClient;\n    this.options = {\n      primaryUserColor: options.primaryUserColor || 'lightblue',\n      userColors: options.userColors || [\n        'lightcoral',\n        'lightseagreen',\n        'lightsalmon',\n        'lightgreen',\n      ],\n      ...options\n    };\n    \n    // Optional UI components\n    this.chatUI = options.chatUI || null;\n    this.notifications = options.notifications || null;\n    \n    // State tracking\n    this.history = [];\n    this.activeUsers = [];\n    this.userColors = [...this.options.userColors];\n    this.name = options.name || '?';\n    \n    // Bind methods\n    this._handleChatMessage = this._handleChatMessage.bind(this);\n    this._handleUserConnected = this._handleUserConnected.bind(this);\n    this._handleUserDisconnected = this._handleUserDisconnected.bind(this);\n    \n    // Setup RTC client event listeners if available\n    if (rtcClient) {\n      this._setupRTCEventListeners();\n      this._hydrateActiveUsersFromClient();\n    }\n  }\n\n  /**\n   * Setup event listeners on RTC client\n   * @private\n   */\n  _setupRTCEventListeners() {\n    if (this.rtcClient.on) {\n      this.rtcClient.on('chat', this._handleChatMessage);\n      \n      // Check if this is a SignedMQTTRTCClient (has validation events)\n      // For SignedMQTTRTCClient, we should wait for validation before adding users\n      // For regular MQTTRTCClient, we can add users immediately on connectedtopeer\n      // Detection: check if validatedPeers property exists (more reliable than constructor.name)\n      const isSignedClient = this.rtcClient && Array.isArray(this.rtcClient.validatedPeers);\n      \n      // Also check if validation event is available by trying to listen\n      // For now, we'll listen to both events and handle appropriately\n      \n      // Always listen to validation event if available (for SignedMQTTRTCClient)\n      // This won't cause issues for regular clients that don't emit it\n      this.rtcClient.on('validation', (peerName, trusted) => {\n        console.log('ChatManager: Received validation event for', peerName, 'trusted:', trusted);\n        // Add user after validation if not already added\n        if (!this.activeUsers.includes(peerName)) {\n          console.log('ChatManager: Adding validated user', peerName);\n          this._handleUserConnected(peerName);\n        } else {\n          console.log('ChatManager: User', peerName, 'already in activeUsers');\n        }\n      });\n      \n      // For connectedtopeer: only add users if NOT using SignedMQTTRTCClient\n      // (SignedMQTTRTCClient will add via validation event instead)\n      this.rtcClient.on('connectedtopeer', (peerName) => {\n        // Only add immediately if this is NOT a signed client\n        // For signed clients, wait for validation event\n        if (!isSignedClient) {\n          console.log('ChatManager: Adding user on connectedtopeer (non-signed client)', peerName);\n          this._handleUserConnected(peerName);\n        } else {\n          console.log('ChatManager: Received connectedtopeer for', peerName, '(waiting for validation)');\n        }\n      });\n      \n      this.rtcClient.on('disconnectedfrompeer', this._handleUserDisconnected);\n    }\n  }\n\n  /**\n   * Ensure previously validated/connected peers are reflected in activeUsers.\n   * Without this, users validated before ChatManager initializes would never appear active.\n   * @private\n   */\n  _hydrateActiveUsersFromClient() {\n    if (!this.rtcClient) {\n      return;\n    }\n    \n    // Signed clients expose validatedPeers\n    if (Array.isArray(this.rtcClient.validatedPeers)) {\n      this.rtcClient.validatedPeers.forEach((peerName) => {\n        if (peerName && !this.activeUsers.includes(peerName)) {\n          console.log('ChatManager: Hydrating validated peer', peerName);\n          this._handleUserConnected(peerName);\n        }\n      });\n    } else {\n      // Fallback for non-signed clients\n      let connected = null;\n      if (typeof this.rtcClient.connectedUsers === 'function') {\n        connected = this.rtcClient.connectedUsers();\n      } else if (Array.isArray(this.rtcClient.connectedUsers)) {\n        connected = this.rtcClient.connectedUsers;\n      }\n      \n      if (Array.isArray(connected) && connected.length) {\n        connected.forEach((peerName) => {\n          if (peerName && !this.activeUsers.includes(peerName)) {\n            console.log('ChatManager: Hydrating connected peer', peerName);\n            this._handleUserConnected(peerName);\n          }\n        });\n      }\n    }\n  }\n\n  /**\n   * Handle chat message from RTC client\n   * @param {string} message - Message content\n   * @param {string} sender - Sender name\n   * @private\n   */\n  _handleChatMessage(message, sender) {\n    const timestamp = Date.now();\n    const messageData = {\n      data: message,\n      sender,\n      timestamp\n    };\n    \n    // Add to history\n    this.history.push(messageData);\n    \n    // Emit event - UI should listen to this event, not use direct displayMessage call\n    this.emit('message', messageData);\n    \n    // Don't call chatUI.displayMessage directly - let the event listener handle it\n    // This prevents duplicate message display\n  }\n\n  /**\n   * Handle user connected event\n   * @param {string} user - User name\n   * @private\n   */\n  _handleUserConnected(user) {\n    if (!this.activeUsers.includes(user)) {\n      this.activeUsers.push(user);\n      \n      // Emit event\n      this.emit('userconnected', { user });\n      \n      // Play connection sound if notifications provided\n      if (this.notifications && typeof this.notifications.ping === 'function') {\n        this.notifications.ping().catch(err => {\n          console.debug('Could not play connection ping:', err);\n        });\n      }\n      \n      // Use chatUI if provided\n      if (this.chatUI && typeof this.chatUI.updateActiveUsers === 'function') {\n        this.chatUI.updateActiveUsers([...this.activeUsers]);\n      }\n    }\n  }\n\n  /**\n   * Handle user disconnected event\n   * @param {string} user - User name\n   * @private\n   */\n  _handleUserDisconnected(user) {\n    const index = this.activeUsers.indexOf(user);\n    if (index !== -1) {\n      // Get user's color before removing\n      const oldColor = this.userColors[index % this.userColors.length];\n      \n      // Remove user\n      this.activeUsers.splice(index, 1);\n      \n      // Recycle color\n      this.userColors = this.userColors.filter((color) => color !== oldColor).concat([oldColor]);\n      \n      // Emit event\n      this.emit('userdisconnected', { user });\n      \n      // Use chatUI if provided\n      if (this.chatUI && typeof this.chatUI.updateActiveUsers === 'function') {\n        this.chatUI.updateActiveUsers([...this.activeUsers]);\n      }\n    }\n  }\n\n  /**\n   * Send a chat message\n   * @param {string} message - Message to send (optional if chatUI provides input)\n   */\n  sendMessage(message) {\n    // Get message from chatUI if not provided\n    if (!message && this.chatUI && typeof this.chatUI.getMessageInput === 'function') {\n      message = this.chatUI.getMessageInput();\n    }\n    \n    if (!message) {\n      throw new Error('Message is required');\n    }\n    \n    if (!this.rtcClient) {\n      throw new Error('RTC client not available');\n    }\n    \n    if (this.rtcClient.sendRTCChat) {\n      this.rtcClient.sendRTCChat(message);\n      \n      // Clear input if chatUI provides it\n      if (this.chatUI && typeof this.chatUI.clearMessageInput === 'function') {\n        this.chatUI.clearMessageInput();\n      }\n    } else {\n      throw new Error('RTC client does not support sendRTCChat');\n    }\n  }\n\n  /**\n   * Get user color for a user\n   * @param {string} user - User name\n   * @returns {string} Color string\n   */\n  getUserColor(user) {\n    if (user === this.name + \"( You )\") {\n      return this.options.primaryUserColor;\n    }\n    const index = this.activeUsers.indexOf(user);\n    if (index !== -1) {\n      return this.userColors[index % this.userColors.length];\n    }\n    return this.options.primaryUserColor;\n  }\n\n  /**\n   * Get message history\n   * @returns {Array} Array of message objects\n   */\n  getHistory() {\n    return [...this.history];\n  }\n\n  /**\n   * Set message history\n   * @param {Array} history - Array of message objects\n   */\n  setHistory(history) {\n    this.history = [...history];\n    this.emit('historyupdated', { history: this.history });\n  }\n\n  /**\n   * Get active users\n   * @returns {Array} Array of user names\n   */\n  getActiveUsers() {\n    return [...this.activeUsers];\n  }\n\n  /**\n   * Set user name\n   * @param {string} name - User name\n   */\n  setName(name) {\n    this.name = name;\n    this.emit('namechanged', { name });\n  }\n\n  /**\n   * Get user name\n   * @returns {string} User name\n   */\n  getName() {\n    return this.name;\n  }\n\n  /**\n   * Cleanup and destroy the manager\n   */\n  destroy() {\n    // Clear state\n    this.history = [];\n    this.activeUsers = [];\n    this.userColors = [...this.options.userColors];\n    \n    // Remove event listeners\n    if (this.rtcClient && this.rtcClient.off) {\n      this.rtcClient.off('chat', this._handleChatMessage);\n      this.rtcClient.off('connectedtopeer', this._handleUserConnected);\n      this.rtcClient.off('disconnectedfrompeer', this._handleUserDisconnected);\n    }\n    \n    // Remove all event listeners\n    this.removeAllListeners();\n  }\n}\n\nexport { ChatManager };\n\n\n","/**\n * UIConfigInterface - Configuration options for UI components\n * \n * This interface defines standard configuration options that all UI implementations\n * should support. This ensures consistency across different UI implementations.\n * \n * @interface UIConfigInterface\n */\nexport class UIConfigInterface {\n  /**\n   * Get the default configuration\n   * @returns {Object} Default configuration object\n   */\n  static getDefaultConfig() {\n    return {\n      // Room/Name configuration\n      allowRoomChange: true,\n      showRoom: true,\n      baseTopic: '',\n      currentRoom: '',\n      \n      // Call configuration\n      callModes: 'both', // 'audio' | 'video' | 'both'\n      callTimeout: 15000, // milliseconds\n      \n      // Component configuration\n      videoDisplayComponent: null, // Optional custom video display component class\n      \n      // User configuration\n      primaryUserColor: 'lightblue',\n      userColors: [\n        'lightcoral',\n        'lightseagreen',\n        'lightsalmon',\n        'lightgreen',\n      ],\n      \n      // Audio configuration\n      ringerVolume: 0.3,\n      notificationVolume: 0.2,\n    };\n  }\n\n  /**\n   * Validate configuration\n   * @param {Object} config - Configuration to validate\n   * @returns {Object} Validated configuration with defaults applied\n   */\n  static validateConfig(config = {}) {\n    const defaults = this.getDefaultConfig();\n    const validated = { ...defaults };\n    \n    // Validate and apply provided config\n    if (typeof config.allowRoomChange === 'boolean') {\n      validated.allowRoomChange = config.allowRoomChange;\n    }\n    \n    if (typeof config.showRoom === 'boolean') {\n      validated.showRoom = config.showRoom;\n    }\n    \n    if (typeof config.baseTopic === 'string') {\n      validated.baseTopic = config.baseTopic;\n    }\n    \n    if (typeof config.currentRoom === 'string') {\n      validated.currentRoom = config.currentRoom;\n    }\n    \n    if (['audio', 'video', 'both'].includes(config.callModes)) {\n      validated.callModes = config.callModes;\n    }\n    \n    if (typeof config.callTimeout === 'number' && config.callTimeout > 0) {\n      validated.callTimeout = config.callTimeout;\n    }\n    \n    if (config.videoDisplayComponent !== undefined) {\n      validated.videoDisplayComponent = config.videoDisplayComponent;\n    }\n    \n    if (typeof config.primaryUserColor === 'string') {\n      validated.primaryUserColor = config.primaryUserColor;\n    }\n    \n    if (Array.isArray(config.userColors)) {\n      validated.userColors = config.userColors;\n    }\n    \n    if (typeof config.ringerVolume === 'number' && config.ringerVolume >= 0 && config.ringerVolume <= 1) {\n      validated.ringerVolume = config.ringerVolume;\n    }\n    \n    if (typeof config.notificationVolume === 'number' && config.notificationVolume >= 0 && config.notificationVolume <= 1) {\n      validated.notificationVolume = config.notificationVolume;\n    }\n    \n    return validated;\n  }\n}\n\n","/**\n * StateManager - Simple state management for UI components\n * \n * Manages mutable state separate from configuration.\n * Configuration is immutable, state can change.\n * \n * Usage:\n *   import { StateManager } from './state-manager.js';\n *   \n *   const state = new StateManager({\n *     currentRoom: '',\n *     name: '?'\n *   });\n *   \n *   state.set('currentRoom', 'newRoom');\n *   const room = state.get('currentRoom');\n *   state.on('change', (key, value) => { ... });\n * \n * @class StateManager\n */\n\nimport { EventEmitter } from '../utils/event-emitter.js';\n\nclass StateManager extends EventEmitter {\n  /**\n   * Create a new StateManager instance\n   * @param {Object} initialState - Initial state values\n   */\n  constructor(initialState = {}) {\n    super();\n    this._state = { ...initialState };\n  }\n\n  /**\n   * Get a state value\n   * @param {string} key - State key\n   * @returns {*} State value\n   */\n  get(key) {\n    return this._state[key];\n  }\n\n  /**\n   * Set a state value\n   * @param {string} key - State key\n   * @param {*} value - State value\n   */\n  set(key, value) {\n    const oldValue = this._state[key];\n    if (oldValue !== value) {\n      this._state[key] = value;\n      this.emit('change', { key, value, oldValue });\n      this.emit(`change:${key}`, { value, oldValue });\n    }\n  }\n\n  /**\n   * Get all state\n   * @returns {Object} Copy of all state\n   */\n  getAll() {\n    return { ...this._state };\n  }\n\n  /**\n   * Set multiple state values at once\n   * @param {Object} updates - Object with key-value pairs\n   */\n  setMultiple(updates) {\n    Object.keys(updates).forEach(key => {\n      this.set(key, updates[key]);\n    });\n  }\n\n  /**\n   * Reset state to initial values\n   * @param {Object} newInitialState - Optional new initial state\n   */\n  reset(newInitialState = null) {\n    if (newInitialState) {\n      this._state = { ...newInitialState };\n    } else {\n      // Reset to constructor initial state (would need to store it)\n      this._state = {};\n    }\n    this.emit('reset', { state: this.getAll() });\n  }\n}\n\nexport { StateManager };\n\n","/**\n * UIComponentBase - Abstract base class for UI components that extend HTMLElement\n * \n * This base class provides common functionality for all UI components:\n * - Shadow DOM setup\n * - Configuration management\n * - Lifecycle hooks\n * - Event handling utilities\n * \n * All UI components that extend HTMLElement should extend this class.\n * \n * @abstract\n */\nexport class UIComponentBase extends HTMLElement {\n  /**\n   * Create a new UIComponentBase instance\n   * @param {Object} config - Configuration object\n   */\n  constructor(config = {}) {\n    super();\n    \n    // Store configuration\n    this.config = { ...config };\n    \n    // Initialize shadow DOM (can be overridden)\n    this._initShadowDOM();\n    \n    // Setup lifecycle\n    this._initialized = false;\n  }\n\n  /**\n   * Initialize shadow DOM (can be overridden by subclasses)\n   * @protected\n   */\n  _initShadowDOM() {\n    // Default: open shadow DOM\n    // Subclasses can override to use closed shadow DOM or no shadow DOM\n    this.attachShadow({ mode: 'open' });\n  }\n\n  /**\n   * Called when element is connected to DOM\n   * Subclasses should override connectedCallback() and call super.connectedCallback()\n   */\n  connectedCallback() {\n    if (!this._initialized) {\n      this._initialize();\n      this._initialized = true;\n    }\n  }\n\n  /**\n   * Called when element is disconnected from DOM\n   * Subclasses should override disconnectedCallback() and call super.disconnectedCallback()\n   */\n  disconnectedCallback() {\n    // Cleanup can be done here\n  }\n\n  /**\n   * Initialize the component\n   * Subclasses should override this method\n   * @protected\n   */\n  _initialize() {\n    // Override in subclasses\n  }\n\n  /**\n   * Get configuration value\n   * @param {string} key - Configuration key\n   * @param {*} defaultValue - Default value if key not found\n   * @returns {*} Configuration value\n   */\n  getConfig(key, defaultValue = undefined) {\n    return this.config[key] !== undefined ? this.config[key] : defaultValue;\n  }\n\n  /**\n   * Set configuration value\n   * @param {string} key - Configuration key\n   * @param {*} value - Configuration value\n   */\n  setConfig(key, value) {\n    this.config[key] = value;\n  }\n\n  /**\n   * Dispatch a custom event\n   * @param {string} eventName - Event name\n   * @param {Object} detail - Event detail object\n   * @param {boolean} bubbles - Whether event bubbles (default: true)\n   * @param {boolean} composed - Whether event crosses shadow DOM boundary (default: true)\n   */\n  dispatchCustomEvent(eventName, detail = {}, bubbles = true, composed = true) {\n    this.dispatchEvent(new CustomEvent(eventName, {\n      detail,\n      bubbles,\n      composed\n    }));\n  }\n\n  /**\n   * Get the root element (shadow root or this)\n   * @returns {ShadowRoot|HTMLElement} Root element\n   */\n  getRoot() {\n    return this.shadowRoot || this;\n  }\n\n  /**\n   * Query selector in root\n   * @param {string} selector - CSS selector\n   * @returns {HTMLElement|null} Element or null\n   */\n  queryRoot(selector) {\n    const root = this.getRoot();\n    return root.querySelector ? root.querySelector(selector) : null;\n  }\n\n  /**\n   * Query selector all in root\n   * @param {string} selector - CSS selector\n   * @returns {NodeList} Elements\n   */\n  queryRootAll(selector) {\n    const root = this.getRoot();\n    return root.querySelectorAll ? root.querySelectorAll(selector) : [];\n  }\n}\n\n","/**\n * ChatHeader - Component for chat header with room and name inputs\n * \n * @class ChatHeader\n * @extends UIComponentBase\n */\n\nimport { UIComponentBase } from '../../core/interfaces/ui-component-base.js';\n\nclass ChatHeader extends UIComponentBase {\n  constructor(config = {}) {\n    super({\n      allowRoomChange: config.allowRoomChange !== false,\n      showRoom: config.showRoom !== false,\n      baseTopic: config.baseTopic || '',\n      currentRoom: config.currentRoom || '',\n      primaryUserColor: config.primaryUserColor || 'lightblue',\n      ...config\n    });\n    \n    this.shadowRoot.innerHTML = `\n      <style>\n        :host {\n          --primary-user-color: ${this.config.primaryUserColor};\n        }\n        .chat-header {\n          cursor: pointer;\n          background-color: var(--primary-user-color);\n          padding: 10px;\n          font-weight: bold;\n          border-top-left-radius: 10px;\n          display: flex;\n          flex-direction: column;\n          gap: 5px;\n        }\n        .room-display {\n          display: flex;\n          align-items: center;\n          gap: 2px;\n        }\n        .room-display > span:first-child {\n          margin-right: 5px;\n        }\n        .room-display.hidden {\n          display: none;\n        }\n        .chat-room-box {\n          display: none;\n        }\n        .chat-room-box.hidden {\n          display: none;\n        }\n        .rounded {\n          border-radius: 5px;\n        }\n        input.rounded {\n          border: 1px solid #333;\n          padding: 2px 5px;\n        }\n        #room-name {\n          font-weight: normal;\n          padding: 2px 5px;\n          border-radius: 3px;\n          width: 160px;\n          border: 1px solid #333;\n          background-color: white;\n        }\n        #chat-room {\n          width: 200px;\n        }\n        #chat-name {\n          width: 200px;\n        }\n      </style>\n      <div class=\"chat-header\">\n        <div class=\"room-display\">\n          <span>Room:</span>\n          <span id=\"room-prefix\"></span>\n          <input id=\"room-name\" type=\"text\" class=\"rounded\">\n        </div>\n        <div id=\"chat-room-box\" class=\"chat-room-box hidden\">\n          room: <input id=\"chat-room\" class=\"rounded\">\n        </div>\n        <div>\n          Your name: <input id=\"chat-name\" class=\"rounded\">\n        </div>\n      </div>\n    `;\n    \n    this._cacheElements();\n    this._setupEventListeners();\n  }\n  \n  /**\n   * Initialize the component\n   * @protected\n   */\n  _initialize() {\n    // Set initial room visibility\n    if (this.roomDisplay) {\n      if (this.getConfig('showRoom')) {\n        this.roomDisplay.classList.remove('hidden');\n      } else {\n        this.roomDisplay.classList.add('hidden');\n      }\n    }\n    \n    // Set initial room name\n    if (this.roomName) {\n      this.roomName.value = this.getConfig('currentRoom') || '';\n    }\n    \n    // Set room prefix\n    if (this.roomPrefix) {\n      this.roomPrefix.textContent = this.getConfig('baseTopic') || '';\n    }\n  }\n  \n  _cacheElements() {\n    this.roomDisplay = this.queryRoot('.room-display');\n    this.roomPrefix = this.queryRoot('#room-prefix');\n    this.roomName = this.queryRoot('#room-name');\n    this.chatRoomBox = this.queryRoot('#chat-room-box');\n    this.chatRoom = this.queryRoot('#chat-room');\n    this.chatName = this.queryRoot('#chat-name');\n  }\n  \n  _setupEventListeners() {\n    // Header click to toggle collapse/expand\n    const chatHeader = this.queryRoot('.chat-header');\n    if (chatHeader) {\n      chatHeader.addEventListener('click', (e) => {\n        // Only trigger toggle if clicking the header itself, not its interactive children\n        this.dispatchCustomEvent('togglecollapse');\n      });\n    }\n    \n    // Room name editing\n    if (this.roomName) {\n      if (this.getConfig('allowRoomChange')) {\n        this.roomName.addEventListener('blur', () => this._onRoomChange());\n        this.roomName.addEventListener('keydown', (e) => {\n          if (e.key === 'Enter') {\n            this._onRoomChange();\n          } else if (e.key === 'Escape') {\n            this._cancelRoomEdit();\n          }\n        });\n      } else {\n        this.roomName.readOnly = true;\n      }\n      \n      // Stop propagation to prevent collapsing when clicking to edit\n      const stopPropagation = (e) => e.stopPropagation();\n      this.roomName.addEventListener('click', stopPropagation);\n      this.roomName.addEventListener('mousedown', stopPropagation);\n    }\n    \n    // Name input\n    if (this.chatName) {\n      this.chatName.addEventListener('change', () => this._onNameChange());\n      \n      // Stop propagation to prevent collapsing when clicking to edit\n      const stopPropagation = (e) => e.stopPropagation();\n      this.chatName.addEventListener('click', stopPropagation);\n      this.chatName.addEventListener('mousedown', stopPropagation);\n    }\n    \n    // Stop propagation on containers\n    const stopPropagation = (e) => e.stopPropagation();\n    if (this.roomDisplay) {\n      this.roomDisplay.addEventListener('click', stopPropagation);\n      this.roomDisplay.addEventListener('mousedown', stopPropagation);\n    }\n  }\n  \n  _initialize() {\n    // Set initial room visibility\n    if (this.roomDisplay) {\n      if (this.config.showRoom) {\n        this.roomDisplay.classList.remove('hidden');\n      } else {\n        this.roomDisplay.classList.add('hidden');\n      }\n    }\n    \n    // Set initial room name\n    if (this.roomName) {\n      this.roomName.value = this.config.currentRoom || '';\n    }\n    \n    // Set room prefix\n    if (this.roomPrefix) {\n      this.roomPrefix.textContent = this.config.baseTopic || '';\n    }\n  }\n  \n  _onRoomChange() {\n    const newRoom = this.roomName.value.trim();\n    this.dispatchCustomEvent('roomchange', { room: newRoom });\n  }\n  \n  _cancelRoomEdit() {\n    // Restore previous value\n    if (this.roomName) {\n      this.roomName.value = this.getConfig('currentRoom') || '';\n    }\n  }\n  \n  _onNameChange() {\n    const newName = this.chatName.value.trim();\n    this.dispatchCustomEvent('namechange', { name: newName });\n  }\n  \n  // Public API\n  setRoom(room) {\n    if (this.roomName) {\n      this.roomName.value = room;\n    }\n    this.setConfig('currentRoom', room);\n  }\n  \n  setName(name) {\n    if (this.chatName) {\n      this.chatName.value = name;\n    }\n  }\n  \n  setRoomPrefix(prefix) {\n    if (this.roomPrefix) {\n      this.roomPrefix.textContent = prefix;\n    }\n    this.setConfig('baseTopic', prefix);\n  }\n  \n  setCollapsible(collapsible) {\n    const header = this.queryRoot('.chat-header');\n    if (header) {\n      header.style.cursor = collapsible ? 'pointer' : 'default';\n    }\n  }\n}\n\nif (!customElements.get('chat-header')) {\n  customElements.define('chat-header', ChatHeader);\n}\nexport { ChatHeader };\n\n","/**\n * ActiveUsersListHTMLElementBase - HTMLElement-based base for active users list\n * \n * This class extends UIComponentBase (which extends HTMLElement) and implements\n * the ActiveUsersListBase contract. This allows concrete implementations to\n * extend this class and get both HTMLElement functionality and the abstract contract.\n * \n * @extends UIComponentBase\n * @implements ActiveUsersListBase\n */\n\nimport { UIComponentBase } from '../../core/interfaces/ui-component-base.js';\nimport { ActiveUsersListBase } from '../../core/interfaces/active-users-list-base.js';\n\nexport class ActiveUsersListHTMLElementBase extends UIComponentBase {\n  /**\n   * Create a new ActiveUsersListHTMLElementBase instance\n   * @param {Object} config - Configuration options\n   */\n  constructor(config = {}) {\n    super(config);\n    \n    // Initialize abstract base functionality\n    // Initialize properties from ActiveUsersListBase\n    this.userColorMap = new Map(); // Map<user, color>\n  }\n\n  /**\n   * Update the list of active users\n   * Must be implemented by subclasses\n   * @param {Array<string>} users - List of active user names\n   * @param {Function} getUserColor - Optional function to get color for a user\n   * @abstract\n   */\n  updateUsers(users, getUserColor = null) {\n    throw new Error('updateUsers must be implemented by subclass');\n  }\n\n  /**\n   * Get color for a user (for consistency)\n   * Default implementation from ActiveUsersListBase\n   * @param {string} user - User name\n   * @returns {string} Color\n   */\n  getUserColor(user) {\n    if (!this.userColorMap) {\n      this.userColorMap = new Map();\n    }\n    if (!this.userColorMap.has(user)) {\n      const index = this.userColorMap.size;\n      const userColors = this.getConfig('userColors') || [];\n      const color = userColors[index % userColors.length];\n      this.userColorMap.set(user, color);\n    }\n    return this.userColorMap.get(user);\n  }\n\n  /**\n   * Set user color explicitly\n   * @param {string} user - User name\n   * @param {string} color - Color\n   */\n  setUserColor(user, color) {\n    if (!this.userColorMap) {\n      this.userColorMap = new Map();\n    }\n    this.userColorMap.set(user, color);\n  }\n\n  /**\n   * Clear the user list\n   * Must be implemented by subclasses\n   * @abstract\n   */\n  clear() {\n    throw new Error('clear must be implemented by subclass');\n  }\n\n  /**\n   * Notify that a user was clicked\n   * Default implementation dispatches custom event\n   * @param {string} user - User name\n   * @protected\n   */\n  _onUserClick(user) {\n    this.dispatchCustomEvent('userclick', { user });\n  }\n}\n\n","/**\n * ActiveUsersList - Component for displaying active users with colored chips\n * \n * HTMLElement-based implementation that extends ActiveUsersListHTMLElementBase,\n * which provides both HTMLElement functionality and ActiveUsersListBase contract.\n * \n * @class ActiveUsersList\n * @extends ActiveUsersListHTMLElementBase\n */\n\nimport { ActiveUsersListHTMLElementBase } from '../base-html/active-users-list-html-base.js';\n\nclass ActiveUsersList extends ActiveUsersListHTMLElementBase {\n  constructor(config = {}) {\n    super({\n      userColors: config.userColors || ['lightcoral', 'lightseagreen', 'lightsalmon', 'lightgreen'],\n      ...config\n    });\n    \n    this.shadowRoot.innerHTML = `\n      <style>\n        .active-users {\n          padding: 0px 0px 0px 0px;\n          margin: 0px 0px 8px 0px;\n          display: flex;\n          flex-wrap: wrap;\n          align-items: center;\n        }\n        .user-bubble {\n          display: inline-block;\n          padding: 4px 4px;\n          border-radius: 12px;\n          font-size: 0.85em;\n          cursor: pointer;\n          color: #333;\n          font-weight: 500;\n          margin: 0;\n          margin-block-start: 0;\n          margin-block-end: 0;\n          margin-inline-start: 0;\n          margin-inline-end: 0;\n        }\n        .user-bubble:hover {\n          opacity: 0.8;\n        }\n        .waiting-message {\n          color: #666;\n          font-size: 0.9em;\n          font-style: italic;\n          padding: 8px;\n        }\n      </style>\n      <div class=\"active-users\">\n        <div class=\"waiting-message\">Waiting for others to join...</div>\n      </div>\n    `;\n    \n    this.activeUsersEl = this.queryRoot('.active-users');\n  }\n  \n  /**\n   * Initialize the component\n   * @protected\n   */\n  _initialize() {\n    // Component is ready after shadow DOM is set up\n  }\n  \n  /**\n   * Update the list of active users\n   * Implements ActiveUsersListBase.updateUsers\n   * @param {Array<string>} users - List of active user names\n   * @param {Function} getUserColor - Optional function to get color for a user\n   */\n  updateUsers(users, getUserColor = null) {\n    if (!this.activeUsersEl) return;\n    \n    // Clear existing bubbles\n    this.activeUsersEl.innerHTML = '';\n    \n    // Show message if no users\n    if (users.length === 0) {\n      const waitingMsg = document.createElement('div');\n      waitingMsg.className = 'waiting-message';\n      waitingMsg.textContent = 'Waiting for others to join...';\n      this.activeUsersEl.appendChild(waitingMsg);\n      return;\n    }\n    \n    // Create bubbles for each user\n    users.forEach((user) => {\n      const bubble = document.createElement('p');\n      bubble.className = 'user-bubble';\n      \n      // Get color for user\n      let userColor;\n      if (getUserColor) {\n        userColor = getUserColor(user);\n      } else {\n        // Use index-based color assignment\n        const index = users.indexOf(user);\n        const userColors = this.getConfig('userColors') || [];\n        userColor = userColors[index % userColors.length];\n      }\n      \n      bubble.style.backgroundColor = userColor;\n      bubble.textContent = user;\n      bubble.title = user;\n      \n      bubble.addEventListener('click', () => {\n        // Call base class method which dispatches event\n        this._onUserClick(user);\n      });\n      \n      this.activeUsersEl.appendChild(bubble);\n    });\n  }\n  \n  // getUserColor is inherited from ActiveUsersListHTMLElementBase\n  \n  /**\n   * Clear the user list\n   * Implements ActiveUsersListBase.clear\n   */\n  clear() {\n    if (this.activeUsersEl) {\n      this.activeUsersEl.innerHTML = '';\n      const waitingMsg = document.createElement('div');\n      waitingMsg.className = 'waiting-message';\n      waitingMsg.textContent = 'Waiting for others to join...';\n      this.activeUsersEl.appendChild(waitingMsg);\n    }\n  }\n}\n\nif (!customElements.get('active-users-list')) {\n  customElements.define('active-users-list', ActiveUsersList);\n}\nexport { ActiveUsersList };\n\n","/**\n * MessagesComponent - Component for displaying chat messages\n * \n * Supports:\n * - Messages from sender (own messages)\n * - Messages from others\n * - Custom message components\n * \n * @class MessagesComponent\n * @extends UIComponentBase\n */\n\nimport { UIComponentBase } from '../../core/interfaces/ui-component-base.js';\n\nclass MessagesComponent extends UIComponentBase {\n  constructor(config = {}) {\n    super({\n      primaryUserColor: config.primaryUserColor || 'lightblue',\n      userColors: config.userColors || ['lightcoral', 'lightseagreen', 'lightsalmon', 'lightgreen'],\n      ...config\n    });\n    \n    this.shadowRoot.innerHTML = `\n      <style>\n        .messages {\n          max-height: 400px;\n          overflow-y: auto;\n          padding: 5px;\n          margin-bottom: 8px;\n          display: flex;\n          flex-direction: column;\n          gap: 6px;\n        }\n        .message {\n          padding: 4px 8px;\n          border-radius: 8px;\n          max-width: 80%;\n          word-wrap: break-word;\n          position: relative;\n          font-size: 0.85em;\n        }\n        .message.own-message {\n          align-self: flex-end;\n          color: #333;\n        }\n        .message.other-message {\n          align-self: flex-start;\n          color: #333;\n        }\n        .message.custom {\n          align-self: stretch;\n          max-width: 100%;\n        }\n      </style>\n      <div class=\"messages\"></div>\n    `;\n    \n    this.messagesEl = this.queryRoot('.messages');\n    this.userColorMap = new Map(); // Map<user, color>\n  }\n  \n  /**\n   * Initialize the component\n   * @protected\n   */\n  _initialize() {\n    // Component is ready after shadow DOM is set up\n  }\n  \n  /**\n   * Append a message to the display\n   * @param {Object} messageData - {data: string|HTMLElement, sender: string, timestamp: number, isOwn: boolean}\n   */\n  appendMessage(messageData) {\n    if (!this.messagesEl) return;\n    \n    const { data, sender, timestamp, isOwn } = messageData;\n    \n    // Check if data is a custom component (HTMLElement)\n    if (data instanceof HTMLElement) {\n      const container = document.createElement('div');\n      container.className = 'message custom';\n      container.appendChild(data);\n      this.messagesEl.appendChild(container);\n      this._scrollToBottom();\n      return;\n    }\n    \n    // Create a message element with a chat bubble style\n    const messageEl = document.createElement('div');\n    messageEl.className = 'message';\n    messageEl.textContent = data;\n    \n    // Check if it's own message or from others\n    if (isOwn || sender && sender.includes('( You )')) {\n      messageEl.classList.add('own-message');\n      messageEl.style.backgroundColor = this.getConfig('primaryUserColor');\n    } else {\n      messageEl.classList.add('other-message');\n      // Get user color\n      const userColor = this.getUserColor(sender);\n      messageEl.style.backgroundColor = userColor;\n    }\n    \n    // Hover effect to show timestamp\n    if (timestamp) {\n      messageEl.title = new Date(timestamp).toLocaleString();\n    }\n    \n    this.messagesEl.appendChild(messageEl);\n    this._scrollToBottom();\n  }\n  \n  /**\n   * Display a message (alias for appendMessage)\n   * @param {Object} messageData - Message data\n   */\n  displayMessage(messageData) {\n    this.appendMessage(messageData);\n  }\n  \n  /**\n   * Get color for a user (for consistency)\n   * @param {string} user - User name\n   * @returns {string} Color\n   */\n  getUserColor(user) {\n    if (!user) return this.getConfig('userColors')[0];\n    \n    if (!this.userColorMap.has(user)) {\n      const index = this.userColorMap.size;\n      const userColors = this.getConfig('userColors');\n      const color = userColors[index % userColors.length];\n      this.userColorMap.set(user, color);\n    }\n    return this.userColorMap.get(user);\n  }\n  \n  /**\n   * Set user color (for consistency with external color management)\n   * @param {string} user - User name\n   * @param {string} color - Color\n   */\n  setUserColor(user, color) {\n    this.userColorMap.set(user, color);\n  }\n  \n  /**\n   * Clear all messages\n   */\n  clear() {\n    if (this.messagesEl) {\n      this.messagesEl.innerHTML = '';\n    }\n  }\n  \n  /**\n   * Load message history\n   * @param {Array<Object>} history - Array of message objects\n   */\n  loadHistory(history) {\n    if (!Array.isArray(history)) return;\n    \n    history.forEach((entry) => {\n      this.appendMessage(entry);\n    });\n  }\n  \n  /**\n   * Set the current user's name (for determining own messages)\n   * @param {string} name - Current user's name\n   */\n  setCurrentUserName(name) {\n    this.currentUserName = name;\n  }\n  \n  /**\n   * Scroll to bottom of messages\n   * @private\n   */\n  _scrollToBottom() {\n    if (this.messagesEl) {\n      this.messagesEl.scrollTop = this.messagesEl.scrollHeight;\n    }\n  }\n}\n\nif (!customElements.get('messages-component')) {\n  customElements.define('messages-component', MessagesComponent);\n}\nexport { MessagesComponent };\n\n","/**\n * MessageInput - Component for message input and controls\n * \n * Includes:\n * - Message input field\n * - Send button (via Enter key)\n * - Emoji button\n * - Clear button\n * \n * Note: Call buttons (Audio/Video/End) are now in the call-management section\n * \n * @class MessageInput\n * @extends UIComponentBase\n */\n\nimport { UIComponentBase } from '../../core/interfaces/ui-component-base.js';\n\nclass MessageInput extends UIComponentBase {\n  constructor(config = {}) {\n    super({\n      callModes: config.callModes || 'both', // 'audio' | 'video' | 'both'\n      ...config\n    });\n    \n    this.shadowRoot.innerHTML = `\n      <style>\n        .input-container {\n          display: flex;\n          align-items: center;\n          gap: 5px;\n          padding: 8px;\n          border-top: 1px solid #ddd;\n          background-color: #f9f9f9;\n        }\n        #input-message {\n          flex: 1;\n          padding: 6px 10px;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n          font-size: 0.9em;\n        }\n        #input-message:disabled {\n          background-color: #e0e0e0;\n          cursor: not-allowed;\n        }\n        button {\n          padding: 6px 12px;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n          cursor: pointer;\n          background-color: white;\n          font-size: 0.9em;\n        }\n        button:hover {\n          background-color: #f0f0f0;\n        }\n        button:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n      </style>\n      <div class=\"input-container\">\n        <input id=\"input-message\" type=\"text\" placeholder=\"Type a message...\">\n        <button id=\"emoji-button\">ðŸ‘‹</button>\n        <button id=\"clear-button\" title=\"Clear chat view (only clears your side, doesn't delete messages)\">ðŸ—‘ï¸</button>\n      </div>\n    `;\n    \n    this._cacheElements();\n    this._setupEventListeners();\n  }\n  \n  _cacheElements() {\n    this.inputContainer = this.queryRoot('.input-container');\n    this.inputMessage = this.queryRoot('#input-message');\n    this.emojiButton = this.queryRoot('#emoji-button');\n    this.clearButton = this.queryRoot('#clear-button');\n  }\n  \n  /**\n   * Initialize the component\n   * @protected\n   */\n  _initialize() {\n    // Component is ready after shadow DOM is set up\n  }\n  \n  _setupEventListeners() {\n    // Message input - Enter to send\n    if (this.inputMessage) {\n      this.inputMessage.addEventListener('keydown', (e) => {\n        if (e.key === 'Enter' && !e.ctrlKey) {\n          e.preventDefault();\n          this._onSend();\n        }\n        e.stopPropagation();\n      });\n    }\n    \n    // Emoji button\n    if (this.emojiButton) {\n      this.emojiButton.addEventListener('click', () => {\n        this.dispatchCustomEvent('emojiclick');\n      });\n    }\n    \n    // Clear button\n    if (this.clearButton) {\n      this.clearButton.addEventListener('click', () => {\n        this.dispatchCustomEvent('clearclick');\n      });\n    }\n    \n    // Call buttons are now in the call-management section, not here\n  }\n  \n  _onSend() {\n    const message = this.inputMessage.value.trim();\n    if (message) {\n      this.dispatchCustomEvent('sendmessage', { message });\n      this.clear();\n    }\n  }\n  \n  // Call buttons are now in the call-management section, not in MessageInput\n  \n  /**\n   * Get the message input value\n   * @returns {string} Message text\n   */\n  getValue() {\n    return this.inputMessage ? this.inputMessage.value : '';\n  }\n  \n  /**\n   * Clear the message input\n   */\n  clear() {\n    if (this.inputMessage) {\n      this.inputMessage.value = '';\n    }\n  }\n  \n  /**\n   * Enable or disable the input\n   * @param {boolean} enabled - Whether input should be enabled\n   */\n  setEnabled(enabled) {\n    if (this.inputMessage) {\n      this.inputMessage.disabled = !enabled;\n      this.inputMessage.placeholder = enabled \n        ? \"Type a message...\" \n        : \"Waiting for others to join...\";\n    }\n    \n    if (this.emojiButton) {\n      this.emojiButton.disabled = !enabled;\n    }\n    \n    if (this.clearButton) {\n      this.clearButton.disabled = !enabled;\n    }\n  }\n  \n  // Call buttons are now in the call-management section, not in MessageInput\n}\n\nif (!customElements.get('message-input')) {\n  customElements.define('message-input', MessageInput);\n}\nexport { MessageInput };\n\n","/**\n * ChatBox - A Web Component for displaying and managing chat messages\n * \n * This custom HTML element provides a complete chat interface with:\n * - Message display with chat bubbles (color-coded by user)\n * - Active user list with visual indicators\n * - Message input with keyboard shortcuts (Enter to send)\n * - Room and name configuration\n * - Integration with RTC clients for peer-to-peer messaging\n * - Audio and video calling support with configurable call modes\n * \n * Usage:\n *   <chat-box></chat-box>\n *   <script>\n *     import { LocalStorageAdapter } from './storage/local-storage-adapter.js';\n *     import { CustomVideoDisplay } from './custom-video.js';\n *     const chatBox = document.querySelector('chat-box');\n *     chatBox.storage = new LocalStorageAdapter(); // Optional: inject storage\n *     chatBox.callModes = 'both'; // 'audio' | 'video' | 'both'\n *     chatBox.videoDisplayComponent = CustomVideoDisplay; // Optional: custom video component\n *     chatBox.rtc = myRTCClient; // Set the RTC client to enable messaging\n *   </script>\n * \n * Features:\n * - Automatically connects to RTC client when assigned via `rtc` property\n * - Displays messages with timestamps (hover to see)\n * - Shows active users with colored bubbles\n * - Saves name to storage for persistence (uses StorageAdapter)\n * - Supports room-based chat (configure via room input)\n * - Responsive design with mobile-friendly sizing\n * - Audio and video calling with automatic stream management\n * - Configurable call modes (audio only, video only, or both)\n * - Optional custom video display component\n * \n * Properties:\n * - callModes: 'audio' | 'video' | 'both' - Which call types to expose (default: 'both')\n * - videoDisplayComponent: Component class - Optional custom video display component\n * \n * Events:\n * - Receives 'chat' events from RTC client\n * - Receives 'connectedtopeer' and 'disconnectedfrompeer' events\n * - Receives 'callconnected' events for audio/video calls\n * - Receives 'call' events for incoming calls (auto-accepted)\n * \n * @class ChatBox\n * @extends HTMLElement\n */\n\nimport { VideoStreamDisplay } from './video-stream-display.js';\nimport { AudioStreamDisplay } from './audio-stream-display.js';\nimport { CallRinger } from './call-ringer.js';\nimport { NotificationSound } from './notification-sound.js';\nimport { CallManagement } from './call-management.js';\nimport { CallManager } from '../core/call-manager.js';\nimport { ChatManager } from '../core/chat-manager.js';\nimport { UIConfigInterface } from '../core/interfaces/ui-config-interface.js';\nimport { StateManager } from '../core/state-manager.js';\nimport { PluginAdapter } from '../core/plugin-adapter.js';\nimport { ChatUIInterface } from '../core/interfaces/chat-ui-interface.js';\nimport { CallUIInterface } from '../core/interfaces/call-ui-interface.js';\nimport { StreamDisplayInterface } from '../core/interfaces/stream-display-interface.js';\nimport { RingerInterface } from '../core/interfaces/ringer-interface.js';\nimport { NotificationInterface } from '../core/interfaces/notification-interface.js';\nimport { ChatHeader } from './components/chat-header.js';\nimport { ActiveUsersList } from './components/active-users-list.js';\nimport { MessagesComponent } from './components/messages-component.js';\nimport { MessageInput } from './components/message-input.js';\n\n/**\n * ChatBox - Web Component implementing ChatUIInterface, CallUIInterface, and related interfaces\n * \n * This component implements multiple interfaces to work with CallManager and ChatManager:\n * - ChatUIInterface: Chat message display and input handling\n * - CallUIInterface: Call prompts and notifications\n * - StreamDisplayInterface: Video/audio stream display (via VideoStreamDisplay/AudioStreamDisplay)\n * - RingerInterface: Ringtone for incoming calls (via CallRinger)\n * - NotificationInterface: Connection sounds (via NotificationSound)\n */\nclass ChatBox extends HTMLElement {\n  constructor(config = {}) {\n    super();\n    \n    // Validate and store configuration from interface (immutable)\n    this.config = UIConfigInterface.validateConfig(config);\n    \n    // Initialize state manager for mutable state\n    this.state = new StateManager({\n      currentRoom: this.config.currentRoom,\n      baseTopic: this.config.baseTopic,\n      name: '?'\n    });\n    \n    this._rtc = null;\n    this._storage = null; // Storage adapter (injected)\n    // All state is now in managers - ChatBox is a pure UI component\n\n    this.attachShadow({ mode: 'open' });\n    \n    // Don't set CSS custom property during construction - move to connectedCallback\n    // Setting style properties during construction can cause \"result must not have attributes\" error\n    \n    // Include full CSS inline - async loading doesn't work well in bundles\n    // Import the CSS as a string at build time or inline it here\n    this.shadowRoot.innerHTML = `\n      <style id=\"chat-box-styles\">\n        ${this._getFullCSS()}\n      </style>\n      <div id=\"chat-container\">\n        <chat-header id=\"chat-header-component\"></chat-header>\n        <div id=\"call-management\">\n          <div id=\"call-buttons-container\">\n            <button id=\"audio-call-button\" class=\"call-button audio-call\" title=\"Start audio call\">Start Audio Call</button>\n            <button id=\"video-call-button\" class=\"call-button video-call\" title=\"Start video call\">Start Video Call</button>\n          </div>\n          <div id=\"call-info-container\"></div>\n          <div id=\"call-controls-container\">\n            <span id=\"call-controls-label\">Call Controls:</span>\n            <button id=\"call-mute-mic-btn\" class=\"call-control-button\" title=\"Toggle microphone on/off\">Mic</button>\n            <button id=\"call-mute-speakers-btn\" class=\"call-control-button\" title=\"Toggle speakers on/off\">Speakers</button>\n            <button id=\"call-video-toggle-btn\" class=\"call-control-button\" title=\"Toggle camera on/off\">Camera</button>\n            <button id=\"end-call-button\" class=\"call-control-button end-call\" title=\"End call\" style=\"background-color: #f44336; color: white;\">End</button>\n            <span id=\"call-metrics\"></span>\n          </div>\n        </div>\n        <div id=\"chat-video\"></div>\n        <div id=\"chat-audio\"></div>\n        <div id=\"chat-body\">\n          <active-users-list id=\"active-users-component\"></active-users-list>\n          <messages-component id=\"messages-component\"></messages-component>\n          <message-input id=\"message-input-component\"></message-input>\n        </div>\n      </div>\n    `;\n\n    // Cache element references\n    this._cacheElements();\n    \n    // Initialize components\n    this._initializeComponents();\n    \n    // Setup event listeners\n    this._setupEventListeners();\n    \n    // Initialize UI state\n    this._initializeUI();\n    \n    // Update call button visibility based on callModes\n    this._updateCallButtonVisibility();\n  }\n\n  /**\n   * Called when the element is connected to the DOM\n   * Safe to set style properties here\n   */\n  connectedCallback() {\n    // Set CSS custom property for primary user color\n    // This is safe to do after construction\n    this.style.setProperty('--primary-user-color', this.config.primaryUserColor);\n    \n    // Call parent's connectedCallback if it exists\n    if (super.connectedCallback) {\n      super.connectedCallback();\n    }\n  }\n\n  /**\n   * Load CSS styles from separate file\n   * @private\n   */\n  async _loadStyles() {\n    try {\n      // Fetch CSS file content\n      const cssUrl = new URL('./chat-box.css', import.meta.url).href;\n      const response = await fetch(cssUrl);\n      \n      if (response.ok) {\n        const cssText = await response.text();\n        // Replace placeholder style tag with actual CSS\n        const styleEl = this.shadowRoot.getElementById('chat-box-styles');\n        if (styleEl) {\n          styleEl.textContent = cssText;\n        } else {\n          // Fallback: create new style tag\n          const style = document.createElement('style');\n          style.textContent = cssText;\n          this.shadowRoot.insertBefore(style, this.shadowRoot.firstChild);\n        }\n      } else {\n        throw new Error('CSS file not found');\n      }\n    } catch (error) {\n      console.warn('Could not load chat-box.css, using inline styles fallback:', error);\n      // Fallback: update placeholder with minimal styles\n      const styleEl = this.shadowRoot.getElementById('chat-box-styles');\n      if (styleEl) {\n        styleEl.textContent = this._getInlineStylesFallback();\n      }\n    }\n  }\n\n  /**\n   * Get full CSS styles (inlined for bundle compatibility)\n   * @private\n   */\n  _getFullCSS() {\n    // Return full CSS with dynamic primary user color\n    // This matches chat-box.css but with the primary color injected\n    return `\n      :host {\n        --primary-user-color: ${this.config.primaryUserColor};\n        --user-colors: lightcoral, lightseagreen, lightsalmon, lightgreen;\n      }\n      .rounded { border-radius: 5px; }\n      .hidden { display: none !important; }\n      .visible { display: block !important; }\n        #chat-container {\n          position: fixed;\n          bottom: 0.5em;\n          right: 0.5em;\n          border: 1px solid #ccc;\n          background-color: #f9f9f9;\n          border-radius: 10px;\n          min-width: 350px;\n          z-index: 9999;\n        }\n        #chat-header {\n          cursor: pointer;\n        background-color: var(--primary-user-color);\n          padding: 10px;\n          font-weight: bold;\n          border-top-left-radius: 10px;\n          display: flex;\n          flex-direction: column;\n          gap: 5px;\n        }\n      #call-management {\n        display: flex;\n        background-color: #f5f5f5;\n        border-top: 2px solid #ddd;\n        border-bottom: 2px solid #ddd;\n        padding: 10px;\n        flex-direction: column;\n        gap: 8px;\n      }\n      #call-management.hidden { display: none; }\n      #call-buttons-container {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        flex-wrap: wrap;\n      }\n      .call-button {\n        padding: 6px 12px;\n        border: 1px solid #ccc;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 0.9em;\n        display: none;\n        background-color: white;\n      }\n      .call-button.visible {\n        display: inline-block;\n      }\n      .call-button.audio-call,\n      .call-button.video-call {\n        color: green;\n      }\n      .call-button.end-call,\n      .call-button.cancel {\n        color: red;\n      }\n      .call-button:hover {\n        background-color: #f0f0f0;\n      }\n      #call-controls-container {\n        display: none;\n        align-items: center;\n        gap: 8px;\n        flex-wrap: wrap;\n      }\n      #call-controls-container.active {\n        display: flex;\n      }\n      #call-info-container {\n        display: none;\n      }\n      #call-info-container.active {\n        display: flex;\n      }\n      #call-controls-label {\n        font-weight: bold;\n        margin-right: 8px;\n      }\n      #call-info-container {\n        display: flex;\n        flex-direction: column;\n        gap: 5px;\n      }\n      .call-info-item {\n        font-size: 0.85em;\n        padding: 5px 8px;\n        border-radius: 4px;\n        background-color: #e8f5e9;\n        border-left: 3px solid #4caf50;\n      }\n      .call-control-button {\n        padding: 6px 12px;\n        border: 1px solid #ccc;\n        border-radius: 4px;\n        cursor: pointer;\n        background-color: white;\n        color: orange;\n        font-size: 0.9em;\n      }\n      .call-control-button:hover { background-color: #f0f0f0; }\n      .call-control-button.active {\n        background-color: #ff6b6b;\n        color: white;\n      }\n      .call-control-button.hidden { display: none; }\n      #call-metrics {\n        margin-left: auto;\n        font-size: 0.85em;\n        color: #666;\n      }\n        #room-display {\n          display: flex;\n          align-items: center;\n          gap: 2px;\n        }\n      #room-display > span:first-child { margin-right: 5px; }\n      #room-display.hidden { display: none; }\n        #room-prefix {\n          color: gray;\n          font-weight: normal;\n        }\n      #chat-header > div:last-child { margin-left: 5px; }\n        #room-name {\n          font-weight: normal;\n          padding: 2px 5px;\n          border-radius: 3px;\n          width: 160px;\n          border: 1px solid #333;\n          background-color: white;\n        }\n      #chat-room-box { display: none; }\n      #chat-room { width: 200px; }\n      #chat-name { width: 200px; }\n      #chat-video {\n        max-height: 40vh;\n        overflow: auto;\n        display: none;\n        padding: 10px;\n      }\n      #chat-video.visible {\n        display: grid;\n      }\n      #chat-audio {\n        max-height: 20vh;\n        overflow: auto;\n        display: none;\n        padding: 10px;\n      }\n      #chat-audio.visible { display: block; }\n      .audio-stream-container {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n        padding: 8px;\n        margin-bottom: 5px;\n        background: rgba(0, 0, 0, 0.05);\n        border-radius: 5px;\n        border-left: 3px solid #4CAF50;\n      }\n      .audio-stream-indicator {\n        width: 12px;\n        height: 12px;\n        border-radius: 50%;\n        background: #4CAF50;\n        animation: pulse 2s infinite;\n      }\n      @keyframes pulse {\n        0%, 100% { opacity: 1; }\n        50% { opacity: 0.5; }\n      }\n      .audio-stream-label {\n        font-size: 0.9em;\n        color: #333;\n        flex: 1;\n      }\n      .audio-stream-controls {\n        display: flex;\n        gap: 5px;\n      }\n      .audio-stream-mute-btn {\n        padding: 4px 8px;\n        border: 1px solid #ccc;\n        border-radius: 3px;\n        background: white;\n        cursor: pointer;\n          font-size: 0.8em;\n        }\n      .audio-stream-mute-btn:hover { background: #f0f0f0; }\n      .audio-stream-mute-btn.muted {\n        background: #ffebee;\n        border-color: #f44336;\n      }\n      .audio-stream-element { display: none; }\n      .video-stream-container {\n        position: relative;\n        width: 100%;\n        max-width: 100%;\n          margin-bottom: 10px;\n        background: #000;\n        border-radius: 5px;\n        overflow: hidden;\n      }\n      .video-stream-container video {\n        width: 100%;\n        height: auto;\n        display: block;\n      }\n      .video-stream-remote { width: 100%; }\n      #chat-body {\n        max-height: 40vh;\n        overflow: auto;\n        display: none;\n        padding: 10px;\n      }\n      #chat-body.visible { display: block; }\n      #active-users { font-size: 0.8em; }\n      #messages { margin-bottom: 10px; }\n        #input-container {\n          margin-top: 30px;\n        display: flex;\n        align-items: center;\n        gap: 5px;\n      }\n      .call-button {\n        display: none;\n        cursor: pointer;\n        padding: 5px 10px;\n        border: 1px solid #ccc;\n        border-radius: 4px;\n        background-color: white;\n        font-size: 0.9em;\n      }\n      .call-button.visible { display: inline-block; }\n      .call-button.audio-call,\n      .call-button.video-call { color: green; }\n      .call-button.end-call,\n      .call-button.cancel { color: red; }\n      #input-message {\n        flex: 1;\n        padding: 5px;\n        border: 1px solid #ccc;\n        border-radius: 4px;\n      }\n      #input-message:disabled {\n        background-color: #f5f5f5;\n        cursor: not-allowed;\n      }\n      #emoji-button {\n        display: inline-block;\n        cursor: pointer;\n        padding: 5px 10px;\n        border: 1px solid #ccc;\n        border-radius: 4px;\n        background-color: white;\n      }\n      #emoji-button:disabled {\n        background-color: #f5f5f5;\n        cursor: not-allowed;\n      }\n      #clear-button {\n        cursor: pointer;\n        padding: 5px 10px;\n        border: 1px solid #ccc;\n        border-radius: 4px;\n        background-color: white;\n      }\n      #clear-button:disabled {\n        background-color: #f5f5f5;\n        cursor: not-allowed;\n      }\n      .message {\n        padding: 5px 10px;\n        margin: 5px;\n        border-radius: 10px;\n        max-width: 60%;\n      }\n      .message.own-message {\n        background-color: var(--primary-user-color);\n        color: white;\n        margin-left: auto;\n      }\n      .message.other-message {\n        color: black;\n        margin-right: auto;\n      }\n      .user-bubble {\n        height: 20px;\n        border-radius: 5px;\n        padding: 0px 5px;\n        display: inline-block;\n        text-align: center;\n        line-height: 20px;\n        color: white;\n        font-size: 12px;\n        cursor: pointer;\n        overflow: hidden;\n        white-space: nowrap;\n      }\n      .notification-message {\n        color: #666;\n        font-size: 0.85em;\n        font-style: italic;\n        margin-bottom: 5px;\n        padding: 5px;\n        border-radius: 3px;\n      }\n      .notification-message.missed-call {\n        background-color: #fff3cd;\n        border-left: 3px solid #ffc107;\n      }\n      .notification-message.declined-call {\n        background-color: #f8d7da;\n        border-left: 3px solid #dc3545;\n      }\n      @media only screen and (max-width: 1000px) {\n          #chat-container {\n            min-width: 50vw !important;\n          }\n      }\n    `;\n  }\n\n  /**\n   * Cache all DOM element references\n   * @private\n   */\n  _cacheElements() {\n    // Cache component references\n    this.chatHeaderComponent = this.shadowRoot.getElementById('chat-header-component');\n    this.activeUsersComponent = this.shadowRoot.getElementById('active-users-component');\n    this.messagesComponent = this.shadowRoot.getElementById('messages-component');\n    this.messageInputComponent = this.shadowRoot.getElementById('message-input-component');\n    \n    // Cache container elements\n    this.chatVideo = this.shadowRoot.getElementById('chat-video');\n    this.chatAudio = this.shadowRoot.getElementById('chat-audio');\n    this.chatBody = this.shadowRoot.getElementById('chat-body');\n    this.callManagement = this.shadowRoot.getElementById('call-management');\n    this.callManagementContainer = this.callManagement;\n    \n    // Cache call button elements (now in call-management section)\n    this.audioCallButton = this.shadowRoot.getElementById('audio-call-button');\n    this.videoCallButton = this.shadowRoot.getElementById('video-call-button');\n    this.endCallButton = this.shadowRoot.getElementById('end-call-button');\n    \n    // For backward compatibility, expose messages and activeUsers as properties\n    // that point to the component's internal elements\n    this.messages = this.messagesComponent ? this.messagesComponent.shadowRoot.querySelector('.messages') : null;\n    this.activeUsers = this.activeUsersComponent ? this.activeUsersComponent.shadowRoot.querySelector('.active-users') : null;\n  }\n\n  /**\n   * Initialize all components\n   * @private\n   */\n  _initializeComponents() {\n    // Initialize sub-components with config\n    if (this.chatHeaderComponent) {\n      // ChatHeader will be initialized as a custom element automatically\n      // We just need to configure it\n      this.chatHeaderComponent.config = {\n        allowRoomChange: this.config.allowRoomChange,\n        showRoom: this.config.showRoom,\n        baseTopic: this.config.baseTopic,\n        currentRoom: this.config.currentRoom,\n        primaryUserColor: this.config.primaryUserColor\n      };\n    }\n    \n    if (this.activeUsersComponent) {\n      this.activeUsersComponent.config = {\n        userColors: this.config.userColors\n      };\n    }\n    \n    if (this.messagesComponent) {\n      this.messagesComponent.config = {\n        primaryUserColor: this.config.primaryUserColor,\n        userColors: this.config.userColors\n      };\n    }\n    \n    if (this.messageInputComponent) {\n      this.messageInputComponent.config = {\n        callModes: this.config.callModes\n      };\n    }\n    \n    // Initialize call management component (will be set when rtc is assigned)\n    this.callManagement = null;\n    \n    // Initialize video stream display component (use custom from config or default)\n    const VideoComponent = this.config.videoDisplayComponent || VideoStreamDisplay;\n    this.videoDisplay = new VideoComponent(this.chatVideo, {\n      localVideoSize: '25%',\n      localVideoPosition: 'top-right'\n    });\n    \n    // Initialize audio stream display component\n    this.audioDisplay = new AudioStreamDisplay(this.chatAudio);\n    \n    // Initialize call ringer for incoming calls (using config)\n    this.ringer = new CallRinger({ volume: this.config.ringerVolume });\n    \n    // Initialize notification sound for connection events (using config)\n    this.notificationSound = new NotificationSound({ volume: this.config.notificationVolume });\n    \n    // Initialize business logic managers (will be set when rtc is assigned)\n    this.callManager = null;\n    this.chatManager = null;\n    \n    // UI state (minimal - most state is in managers)\n    this.activeCallType = null;\n    this.outgoingCalls = new Map(); // Track outgoing calls for cancellation\n    this.activeVideoCalls = new Set(); // Track active video calls\n    this.activeAudioCalls = new Set(); // Track active audio calls\n    this.localStreams = new Map(); // Track local streams for mute control\n    this.pendingCalls = new Map(); // Track pending incoming calls\n    this.pinnedAudioCallMessage = null; // Reference to pinned audio call message element\n  }\n\n  /**\n   * Setup all event listeners\n   * @private\n   */\n  _setupEventListeners() {\n    // Call button handlers\n    this._setupCallButtons();\n    this._setupCallControls();\n    \n    // Setup component event listeners\n    this._setupComponentEventListeners();\n    \n    // Listen to state changes\n    this.state.on('change:currentRoom', ({value}) => {\n      if (this.chatHeaderComponent) {\n        this.chatHeaderComponent.setRoom(value);\n      }\n    });\n  }\n  \n  /**\n   * Setup event listeners for sub-components\n   * @private\n   */\n  _setupComponentEventListeners() {\n    // ChatHeader events\n    if (this.chatHeaderComponent) {\n      this.chatHeaderComponent.addEventListener('roomchange', (e) => {\n        this.finishRoomEdit(e.detail.room);\n      });\n      \n      this.chatHeaderComponent.addEventListener('namechange', (e) => {\n        const newName = e.detail.name;\n        console.log(\"Name changed to \" + newName);\n        if (this.rtc) {\n          this.rtc.changeName(newName);\n          this.name = this.rtc.name;\n          this.chatHeaderComponent.setName(this.name);\n        } else {\n          this.name = newName;\n        }\n      });\n      \n      this.chatHeaderComponent.addEventListener('togglecollapse', () => {\n        this._toggleCollapse();\n      });\n    }\n    \n    // MessageInput events\n    if (this.messageInputComponent) {\n      this.messageInputComponent.addEventListener('sendmessage', (e) => {\n        this.sendMessage(e.detail.message);\n      });\n      \n      this.messageInputComponent.addEventListener('emojiclick', () => {\n        this.sendMessage(\"ðŸ‘‹\");\n      });\n      \n      this.messageInputComponent.addEventListener('clearclick', () => {\n        if (this.messagesComponent) {\n          this.messagesComponent.clear();\n        }\n      });\n      \n      this.messageInputComponent.addEventListener('audiocallclick', () => {\n        const buttonText = this.messageInputComponent.audioCallButton?.textContent;\n        if (buttonText === 'End' || buttonText === 'Cancel') {\n          if (buttonText === 'Cancel') {\n            // Cancel outgoing call - handled by _startCall\n            this._cancelOutgoingCall('audio');\n          } else {\n            this._endAllCalls();\n          }\n        } else {\n          this._startCall('audio');\n        }\n      });\n      \n      this.messageInputComponent.addEventListener('videocallclick', () => {\n        const buttonText = this.messageInputComponent.videoCallButton?.textContent;\n        if (buttonText === 'End' || buttonText === 'Cancel') {\n          if (buttonText === 'Cancel') {\n            this._cancelOutgoingCall('video');\n          } else {\n            this._endAllCalls();\n          }\n        } else {\n          this._startCall('video');\n        }\n      });\n      \n      this.messageInputComponent.addEventListener('endcallclick', () => {\n        this._endAllCalls();\n      });\n    }\n    \n    // Call button events (buttons are now in call-management section)\n    if (this.audioCallButton) {\n      this.audioCallButton.addEventListener('click', () => {\n        console.log('Audio call button clicked');\n        const buttonText = this.audioCallButton.textContent;\n        if (buttonText === 'End' || buttonText === 'Cancel') {\n          if (buttonText === 'Cancel') {\n            // Cancel outgoing call\n            this._endAllCalls();\n          } else {\n            this._endAllCalls();\n          }\n        } else {\n          this._startCall('audio');\n        }\n      });\n    }\n    \n    if (this.videoCallButton) {\n      this.videoCallButton.addEventListener('click', () => {\n        console.log('Video call button clicked');\n        const buttonText = this.videoCallButton.textContent;\n        if (buttonText === 'End' || buttonText === 'Cancel') {\n          if (buttonText === 'Cancel') {\n            this._endAllCalls();\n          } else {\n            this._endAllCalls();\n          }\n        } else {\n          this._startCall('video');\n        }\n      });\n    }\n    \n    if (this.endCallButton) {\n      this.endCallButton.addEventListener('click', () => {\n        console.log('End call button clicked');\n        this._endAllCalls();\n      });\n    }\n    \n    // ActiveUsersList events\n    if (this.activeUsersComponent) {\n      this.activeUsersComponent.addEventListener('userclick', (e) => {\n        alert('User: ' + e.detail.user);\n      });\n    }\n  }\n\n  /**\n   * Cancel an outgoing call\n   * @private\n   */\n  _cancelOutgoingCall(type) {\n    // This will be handled by the call button state management\n    // The actual cancellation is done in _startCall\n  }\n\n  /**\n   * Initialize UI state\n   * @private\n   */\n  _initializeUI() {\n    // Set initial room visibility\n    const roomDisplay = this.shadowRoot.getElementById('room-display');\n    if (roomDisplay) {\n      if (this.config.showRoom) {\n        roomDisplay.classList.remove('hidden');\n      } else {\n        roomDisplay.classList.add('hidden');\n      }\n    }\n    \n    // Initially hide call management (will show when users connect)\n    if (this.callManagement) {\n      this.callManagement.classList.add('hidden');\n    }\n    \n    // Initially disable inputs (no one else in room yet)\n    this.updateInputState();\n    \n    // Show chat body\n    if (this.chatBody) {\n      this.chatBody.classList.add('visible');\n    }\n  }\n\n  /**\n   * Setup call button event handlers\n   * @private\n   * Note: Call buttons are now handled by MessageInput component via event listeners\n   */\n  _setupCallButtons() {\n    // Call buttons are now handled by MessageInput component\n    // Event listeners are set up in _setupComponentEventListeners()\n  }\n\n  /**\n   * Toggle the chat body collapsed/expanded state\n   * @private\n   */\n  _toggleCollapse() {\n    if (this.chatBody) {\n      const isCurrentlyVisible = this.chatBody.classList.contains('visible');\n      \n      if (isCurrentlyVisible) {\n        // Collapse: hide chat body, call management, video, and audio\n        this.chatBody.classList.remove('visible');\n        if (this.callManagementContainer) {\n          this.callManagementContainer.style.display = 'none';\n        }\n        if (this.chatVideo) {\n          this.chatVideo.style.display = 'none';\n        }\n        if (this.chatAudio) {\n          this.chatAudio.style.display = 'none';\n        }\n      } else {\n        // Expand: show chat body and restore call management/media visibility\n        this.chatBody.classList.add('visible');\n        if (this.callManagementContainer) {\n          // Restore call management visibility based on whether it should be active\n          const hasActiveCalls = this.callManagementContainer.classList.contains('active');\n          this.callManagementContainer.style.display = hasActiveCalls ? 'flex' : 'none';\n        }\n        if (this.chatVideo) {\n          // Restore video display (it manages its own visibility based on active streams)\n          this.chatVideo.style.display = '';\n        }\n        if (this.chatAudio) {\n          // Restore audio display (it manages its own visibility based on active streams)\n          this.chatAudio.style.display = '';\n        }\n      }\n    }\n  }\n\n  /**\n   * Setup call control buttons (mute, video toggle)\n   * @private\n   */\n  _setupCallControls() {\n    // Controls are created dynamically in the call controls message component\n    // Event listeners are attached when the message is created in _updateCallControlsMessage\n  }\n\n  /**\n   * Toggle microphone mute state for all active calls\n   * @private\n   */\n  _toggleMicMute() {\n    if (!this.callManager) {\n      return;\n    }\n    \n    const currentState = this.callManager.getMuteState();\n    this.callManager.setMicMuted(!currentState.mic);\n    // State update will come via 'mutechanged' event\n  }\n\n  /**\n   * Toggle speakers mute state for all active calls\n   * @private\n   */\n  _toggleSpeakersMute() {\n    this.isSpeakersMuted = !this.isSpeakersMuted;\n    \n    // Mute/unmute all remote audio elements (speakers)\n    if (this.audioDisplay && this.audioDisplay.activeStreams) {\n      for (const [peerName, streamData] of Object.entries(this.audioDisplay.activeStreams)) {\n        if (streamData && streamData.container) {\n          const remoteAudio = streamData.container.querySelector('.audio-stream-element[data-type=\"remote\"]');\n          if (remoteAudio) {\n            remoteAudio.muted = this.isSpeakersMuted;\n          }\n        }\n      }\n    }\n    \n    // Also handle video calls which may have audio\n    if (this.videoDisplay && this.videoDisplay.activeStreams) {\n      for (const [peerName, streamData] of Object.entries(this.videoDisplay.activeStreams)) {\n        if (streamData && streamData.container) {\n          const remoteVideo = streamData.container.querySelector('.video-stream-remote');\n          if (remoteVideo) {\n            remoteVideo.muted = this.isSpeakersMuted;\n          }\n        }\n      }\n    }\n    \n    // Update call management component\n    if (this.callManagement) {\n      this.callManagement.setMuteState({ mic: this.isMicMuted });\n    }\n    this._updateCallControlsMessage();\n  }\n\n  /**\n   * Toggle video visibility for all active video calls\n   * @private\n   */\n  _toggleVideo() {\n    if (!this.callManager) {\n      return;\n    }\n    \n    const currentState = this.callManager.getMuteState();\n    this.callManager.setVideoHidden(!currentState.video);\n    // State update will come via 'mutechanged' event\n  }\n\n  /**\n   * Update the call management section (separate from messages)\n   * @private\n   */\n  _updateCallControlsMessage() {\n    if (!this.callManagement || !this.callManager) {\n      return;\n    }\n    \n    // Get state from CallManager\n    const activeCalls = this.callManager.getActiveCalls();\n    const muteState = this.callManager.getMuteState();\n    \n    // Update active calls in CallManagement component\n    this.callManagement.setActiveCalls(activeCalls.audio, activeCalls.video);\n    \n    // Update mute state\n    this.callManagement.setMuteState({\n      mic: muteState.mic,\n      speakers: muteState.speakers,\n      video: muteState.video\n    });\n    \n    // Update metrics\n    for (const user of activeCalls.audio) {\n      const metrics = this.callManager.getMetrics(user);\n      if (metrics) {\n        this.callManagement.setMetrics(user, metrics);\n      }\n    }\n    for (const user of activeCalls.video) {\n      const metrics = this.callManager.getMetrics(user);\n      if (metrics) {\n        this.callManagement.setMetrics(user, metrics);\n      }\n    }\n    \n    // Show/hide call management container and its sub-sections\n    const hasActiveCalls = activeCalls.video.size > 0 || activeCalls.audio.size > 0;\n    const activeUsers = this.chatManager ? this.chatManager.getActiveUsers() : [];\n    const hasUsers = activeUsers.length > 0;\n    \n    // Show/hide the entire call-management section\n    if (this.callManagementContainer) {\n      // Show call management if there are active calls OR active users OR pending calls\n      const pendingCalls = this.callManager && typeof this.callManager.getPendingCalls === 'function'\n        ? this.callManager.getPendingCalls()\n        : new Set();\n      const hasPendingCalls = pendingCalls.size > 0;\n      \n      if (hasActiveCalls || hasUsers || hasPendingCalls) {\n        this.callManagementContainer.classList.remove('hidden');\n        this.callManagementContainer.style.display = 'flex';\n      } else {\n        // Only hide if there are no calls and no users\n        this.callManagementContainer.classList.add('hidden');\n      }\n    }\n    \n    // Show/hide call controls (mute buttons, etc.) - only during active calls\n    const callControlsContainer = this.shadowRoot.getElementById('call-controls-container');\n    const callInfoContainer = this.shadowRoot.getElementById('call-info-container');\n    if (callControlsContainer) {\n      if (hasActiveCalls) {\n        callControlsContainer.classList.add('active');\n      } else {\n        callControlsContainer.classList.remove('active');\n      }\n    }\n    if (callInfoContainer) {\n      if (hasActiveCalls) {\n        callInfoContainer.classList.add('active');\n      } else {\n        callInfoContainer.classList.remove('active');\n      }\n    }\n  }\n\n  /**\n   * Handle call timeout (from CallManager event)\n   * @param {string} peerName - Name of the peer\n   * @param {string} direction - 'incoming' or 'outgoing'\n   * @private\n   */\n  _handleCallTimeout(peerName, direction) {\n    // Show missed call message\n    this._showMissedCallMessage(peerName, direction);\n    \n    // Also show a chat message when the call is missed\n    // For incoming calls: show \"You missed ${peerName}'s call\"\n    // For outgoing calls: the notification already shows \"${peerName} missed your call\"\n    if (direction === 'incoming' && this.messagesComponent) {\n      const missedCallMessage = `You missed ${peerName}'s call`;\n      this.appendMessage({\n        data: missedCallMessage,\n        sender: 'System',\n        timestamp: Date.now(),\n        isOwn: false\n      });\n    }\n    \n    // Clean up UI streams\n    this.videoDisplay.removeStreams(peerName);\n    this.audioDisplay.removeStreams(peerName);\n    \n    // Get current state from CallManager (state is already updated when event fires)\n    const activeCalls = this.callManager ? this.callManager.getActiveCalls() : {audio: new Set(), video: new Set()};\n    const hasActiveCalls = activeCalls.video.size > 0 || activeCalls.audio.size > 0;\n    \n    // Reset call type\n    this.activeCallType = null;\n    \n    // Update call controls\n    this._updateCallControlsVisibility();\n    \n    // Update button states to reset cancel button back to inactive state\n    this._updateCallButtonStates(hasActiveCalls);\n    \n    // Update button visibility to restore start call buttons if no active calls\n    this._updateCallButtonVisibility();\n  }\n\n  /**\n   * Update visibility of call control buttons (mute, video toggle)\n   * @private\n   */\n  _updateCallControlsVisibility() {\n    // Now uses the call controls message component\n    this._updateCallControlsMessage();\n  }\n\n  /**\n   * Update call button visibility based on callModes\n   * @private\n   */\n  _updateCallButtonVisibility() {\n    // Get active users from ChatManager, not from a local property\n    // Note: chatManager may not be initialized yet (called from constructor)\n    const activeUsers = (this.chatManager && typeof this.chatManager.getActiveUsers === 'function') \n      ? this.chatManager.getActiveUsers() \n      : [];\n    const hasUsers = activeUsers.length > 0;\n    const modes = this.config.callModes;\n    \n    // Check if there are active calls - if so, don't show start call buttons\n    const activeCalls = this.callManager ? this.callManager.getActiveCalls() : {audio: new Set(), video: new Set()};\n    const hasActiveCalls = activeCalls.video.size > 0 || activeCalls.audio.size > 0;\n    \n    // Check if there are pending incoming calls - if so, don't show start call buttons\n    const pendingCalls = this.callManager && typeof this.callManager.getPendingCalls === 'function'\n      ? this.callManager.getPendingCalls()\n      : new Set();\n    const hasPendingCalls = pendingCalls.size > 0;\n    \n    // Debug logging\n    const callManagementVisible = this.callManagementContainer ? !this.callManagementContainer.classList.contains('hidden') : false;\n    const audioButtonVisible = this.audioCallButton ? this.audioCallButton.classList.contains('visible') : false;\n    const videoButtonVisible = this.videoCallButton ? this.videoCallButton.classList.contains('visible') : false;\n    \n    if (this.audioCallButton) {\n      const computedStyle = window.getComputedStyle(this.audioCallButton);\n      console.log('Audio button state:', {\n        element: this.audioCallButton,\n        hasVisibleClass: this.audioCallButton.classList.contains('visible'),\n        computedDisplay: computedStyle.display,\n        computedVisibility: computedStyle.visibility,\n        parentDisplay: this.audioCallButton.parentElement ? window.getComputedStyle(this.audioCallButton.parentElement).display : 'N/A',\n        callManagementVisible: callManagementVisible,\n        callManagementDisplay: this.callManagementContainer ? window.getComputedStyle(this.callManagementContainer).display : 'N/A'\n      });\n    }\n    \n    // Get the buttons container\n    const buttonsContainer = this.shadowRoot.getElementById('call-buttons-container');\n    \n    // If there's a pending incoming call, the prompt is already shown in the container\n    // Don't show start call buttons\n    if (hasPendingCalls) {\n      // Hide all buttons - the incoming call prompt is already in the container\n      if (this.audioCallButton) {\n        this.audioCallButton.classList.remove('visible');\n      }\n      if (this.videoCallButton) {\n        this.videoCallButton.classList.remove('visible');\n      }\n      return;\n    }\n    \n    // Restore buttons container if it was cleared by incoming call prompt\n    // Note: end call button should always be in call-controls-container, not call-buttons-container\n    if (buttonsContainer && buttonsContainer.children.length === 0) {\n      // Recreate the buttons (but NOT the end call button - it belongs in call-controls-container)\n      if (this.audioCallButton && !buttonsContainer.contains(this.audioCallButton)) {\n        buttonsContainer.appendChild(this.audioCallButton);\n      }\n      if (this.videoCallButton && !buttonsContainer.contains(this.videoCallButton)) {\n        buttonsContainer.appendChild(this.videoCallButton);\n      }\n      // End call button should NOT be added here - it belongs in call-controls-container\n    }\n    \n    // Hide all buttons first\n    if (this.audioCallButton) {\n      this.audioCallButton.classList.remove('visible');\n      this.audioCallButton.style.display = '';\n    }\n    if (this.videoCallButton) {\n      this.videoCallButton.classList.remove('visible');\n      this.videoCallButton.style.display = '';\n    }\n    \n    // Always show simple button text (group calls happen automatically when 2+ users)\n    if (this.audioCallButton) {\n      this.audioCallButton.textContent = 'Start Audio Call';\n    }\n    if (this.videoCallButton) {\n      this.videoCallButton.textContent = 'Start Video Call';\n    }\n    \n    // Only show start call buttons if there are users AND no active calls AND no pending calls\n    if (hasUsers && !hasActiveCalls && !hasPendingCalls) {\n      if (modes === 'both') {\n        if (this.audioCallButton) {\n          this.audioCallButton.classList.add('visible');\n        }\n        if (this.videoCallButton) {\n          this.videoCallButton.classList.add('visible');\n        }\n      } else if (modes === 'audio') {\n        if (this.audioCallButton) {\n          this.audioCallButton.classList.add('visible');\n        }\n      } else if (modes === 'video') {\n        if (this.videoCallButton) {\n          this.videoCallButton.classList.add('visible');\n        }\n      }\n    }\n  }\n\n  /**\n   * Start a call (audio or video) - automatically uses group calls when 3+ people\n   * @param {string} type - 'audio' or 'video'\n   * @private\n   */\n  _startCall(type) {\n    console.log('_startCall called with type:', type);\n    if (!this.callManager || !this.chatManager) {\n      console.warn('_startCall: callManager or chatManager not initialized', {\n        callManager: !!this.callManager,\n        chatManager: !!this.chatManager\n      });\n      return;\n    }\n    \n    const activeUsers = this.chatManager.getActiveUsers();\n    if (activeUsers.length === 0) {\n      console.warn('_startCall: No active users to call');\n      return;\n    }\n\n    // Stop any ongoing ringing (in case we're calling while receiving)\n    if (this.ringer && typeof this.ringer.stop === 'function') {\n      this.ringer.stop();\n    }\n\n    // Track which button was clicked\n    this.activeCallType = type;\n    \n    // If there are 2+ other users, always use group call\n    // (1 other user = individual call, 2+ other users = group call)\n    const useGroupCall = activeUsers.length >= 2;\n    \n    if (useGroupCall) {\n      // Group call with all active users\n      console.log(`Starting group ${type} call with ${activeUsers.length} users:`, activeUsers);\n      \n      // Update button states to show cancel button\n      this._updateCallButtonStates(true, type, true); // true = isOutgoing\n      \n      // Use CallManager to start the group call\n      this.callManager.startGroupCall('all', type)\n        .then((result) => {\n          console.log('Group call started successfully:', result);\n          console.log(`Successfully called ${result.successful.length} users, ${result.failed.length} failed`);\n          if (result.failed.length > 0) {\n            console.warn('Some calls failed:', result.failed);\n          }\n          // CallManager will handle the rest via events (callconnected, etc.)\n        })\n        .catch((err) => {\n          console.error('Error starting group call:', err);\n          this.activeCallType = null;\n          alert(`Failed to start group call: ${err.message || err}`);\n        });\n    } else {\n      // Individual call with first active user\n      const targetUser = activeUsers[0];\n      console.log('Starting individual call to:', targetUser, 'type:', type);\n      \n      // Update button states to show cancel button\n      this._updateCallButtonStates(true, type, true); // true = isOutgoing\n      \n      // Use CallManager to start the call\n      // CallManager will handle timeouts, stream management, and emit events\n      this.callManager.startCall(targetUser, type)\n        .then((result) => {\n          console.log('Call started successfully:', result);\n          // CallManager will handle the rest via events (callconnected, etc.)\n        })\n        .catch((err) => {\n          console.error('Error starting call:', err);\n          this.activeCallType = null;\n          this._updateCallButtonStates(false);\n        });\n    }\n  }\n\n  /**\n   * End all active calls - delegates to CallManager\n   * @private\n   */\n  _endAllCalls() {\n    if (!this.callManager) {\n      return;\n    }\n\n    // Stop ringing\n    this.ringer.stop();\n\n    // Delegate to CallManager\n    this.callManager.endAllCalls();\n    \n    // Immediately update UI state (don't wait for events)\n    // Get current state after ending calls\n    const activeCalls = this.callManager.getActiveCalls();\n    const hasActiveCalls = activeCalls.video.size > 0 || activeCalls.audio.size > 0;\n    \n    // Reset call type\n    this.activeCallType = null;\n    \n    // Update button states\n    this._updateCallButtonStates(hasActiveCalls);\n    this._updateCallButtonVisibility();\n    \n    // Hide video container if no active calls\n    if (!hasActiveCalls) {\n      if (this.chatVideo) {\n        this.chatVideo.classList.remove('visible');\n      }\n      if (this.videoDisplay && this.videoDisplay.container) {\n        this.videoDisplay.hide();\n      }\n    }\n    \n    // Update CallManagement UI state immediately\n    if (this.callManagement && typeof this.callManagement._updateFromCallManager === 'function') {\n      this.callManagement._updateFromCallManager();\n    }\n    \n    // Also update call controls visibility\n    this._updateCallControlsVisibility();\n  }\n\n  /**\n   * Update call button visibility states\n   * @param {boolean} inCall - Whether currently in a call\n   * @param {string} callType - 'audio' or 'video' - which button to transform into end button\n   * @param {boolean} isOutgoing - Whether this is an outgoing call (not yet answered)\n   * @private\n   */\n  _updateCallButtonStates(inCall, callType = null, isOutgoing = false) {\n    // Read state from CallManager\n    const activeCalls = this.callManager ? this.callManager.getActiveCalls() : {audio: new Set(), video: new Set()};\n    const hasActiveCalls = activeCalls.video.size > 0 || activeCalls.audio.size > 0;\n    const pendingCalls = this.callManager && typeof this.callManager.getPendingCalls === 'function'\n      ? this.callManager.getPendingCalls()\n      : new Set();\n    const hasPendingCalls = pendingCalls.size > 0;\n    const isActive = inCall || hasActiveCalls;\n    const activeUsers = this.chatManager ? this.chatManager.getActiveUsers() : [];\n    const hasUsers = activeUsers.length > 0;\n    const modes = this.config.callModes;\n    \n    // Get the buttons container\n    const buttonsContainer = this.shadowRoot.getElementById('call-buttons-container');\n    \n    // If there's a pending incoming call, don't show any buttons (prompt is shown)\n    if (hasPendingCalls) {\n      if (this.audioCallButton) {\n        this.audioCallButton.classList.remove('visible');\n      }\n      if (this.videoCallButton) {\n        this.videoCallButton.classList.remove('visible');\n      }\n      if (this.endCallButton) {\n        this.endCallButton.classList.remove('visible');\n      }\n      return;\n    }\n    \n    // Restore buttons container if it was cleared by incoming call prompt\n    // Note: end call button should always be in call-controls-container, not call-buttons-container\n    if (buttonsContainer && buttonsContainer.children.length === 0) {\n      // Recreate the buttons (but NOT the end call button - it belongs in call-controls-container)\n      if (this.audioCallButton && !buttonsContainer.contains(this.audioCallButton)) {\n        buttonsContainer.appendChild(this.audioCallButton);\n      }\n      if (this.videoCallButton && !buttonsContainer.contains(this.videoCallButton)) {\n        buttonsContainer.appendChild(this.videoCallButton);\n      }\n      // End call button should NOT be added here - it belongs in call-controls-container\n    }\n    \n    if (isActive && callType) {\n      if (isOutgoing) {\n        // Outgoing call - show \"Cancel\" button\n        if (callType === 'audio' && this.audioCallButton) {\n          this.audioCallButton.textContent = 'Cancel';\n          this.audioCallButton.className = 'call-button cancel visible';\n          if (this.videoCallButton) {\n            this.videoCallButton.classList.remove('visible');\n          }\n          if (this.endCallButton) {\n            this.endCallButton.classList.remove('visible');\n          }\n        } else if (callType === 'video' && this.videoCallButton) {\n          this.videoCallButton.textContent = 'Cancel';\n          this.videoCallButton.className = 'call-button cancel visible';\n          if (this.audioCallButton) {\n            this.audioCallButton.classList.remove('visible');\n          }\n          if (this.endCallButton) {\n            this.endCallButton.classList.remove('visible');\n          }\n        }\n      } else {\n        // Active call - show \"End\" button\n        if (this.endCallButton) {\n          this.endCallButton.classList.add('visible');\n        }\n        if (this.audioCallButton) {\n          this.audioCallButton.classList.remove('visible');\n        }\n        if (this.videoCallButton) {\n          this.videoCallButton.classList.remove('visible');\n        }\n      }\n    } else if (isActive && !callType) {\n      // Use the separate end button if we don't know which button was clicked\n      if (this.endCallButton) {\n        this.endCallButton.classList.add('visible');\n      }\n      if (this.audioCallButton) {\n        this.audioCallButton.classList.remove('visible');\n      }\n      if (this.videoCallButton) {\n        this.videoCallButton.classList.remove('visible');\n      }\n    } else {\n      // Not in a call - restore button states\n      if (this.audioCallButton) {\n        this.audioCallButton.textContent = 'Audio';\n        this.audioCallButton.className = 'call-button audio-call';\n      }\n      if (this.videoCallButton) {\n        this.videoCallButton.textContent = 'Video';\n        this.videoCallButton.className = 'call-button video-call';\n      }\n      if (this.endCallButton) {\n        this.endCallButton.classList.remove('visible');\n      }\n      \n      // Show call buttons based on call modes and active users\n      if (hasUsers) {\n        if (modes === 'both') {\n          if (this.audioCallButton) {\n            this.audioCallButton.classList.add('visible');\n          }\n          if (this.videoCallButton) {\n            this.videoCallButton.classList.add('visible');\n          }\n        } else if (modes === 'audio') {\n          if (this.audioCallButton) {\n            this.audioCallButton.classList.add('visible');\n          }\n        } else if (modes === 'video') {\n          if (this.videoCallButton) {\n            this.videoCallButton.classList.add('visible');\n          }\n        }\n      }\n    }\n  }\n  /**\n   * ChatUIInterface implementation: Get configuration for this UI component\n   * @returns {Object} Configuration object\n   */\n  getConfig() {\n    return { ...this.config };\n  }\n  \n  /**\n   * Get or set the call timeout in milliseconds\n   * @param {number} timeout - Timeout in milliseconds (default: 15000)\n   * @returns {number} Current call timeout\n   */\n  get callTimeout() {\n    return this.config.callTimeout;\n  }\n  \n  set callTimeout(timeout) {\n    if (typeof timeout === 'number' && timeout > 0) {\n      this.config.callTimeout = timeout;\n      // Update manager if it exists\n      if (this.callManager) {\n        this.callManager.options.callTimeout = timeout;\n      }\n    } else {\n      console.warn('callTimeout must be a positive number');\n    }\n  }\n\n  /**\n   * Get or set the storage adapter for persistence\n   * @param {StorageAdapter} adapter - Storage adapter instance\n   * @returns {StorageAdapter} Current storage adapter (or fallback to localStorage)\n   */\n  get storage() {\n    // Return injected storage or create a fallback adapter\n    if (!this._storage && typeof window !== 'undefined' && window.localStorage) {\n      // Fall back to localStorage directly if adapter not injected\n      this._storage = {\n        getItem: (key) => {\n          try {\n            return localStorage.getItem(key);\n          } catch (e) {\n            return null;\n          }\n        },\n        setItem: (key, value) => {\n          try {\n            localStorage.setItem(key, value);\n          } catch (e) {\n            // Ignore storage errors\n          }\n        },\n        removeItem: (key) => {\n          try {\n            localStorage.removeItem(key);\n          } catch (e) {\n            // Ignore storage errors\n          }\n        }\n      };\n    }\n    return this._storage;\n  }\n  set storage(adapter) {\n    this._storage = adapter;\n  }\n\n  /**\n   * Get or set whether room name is visible\n   * @param {boolean} show - Whether to show the room name\n   * @returns {boolean} Current showRoom setting\n   */\n  get showRoom() {\n    return this.config.showRoom;\n  }\n  set showRoom(show) {\n    this.config.showRoom = show;\n    const roomDisplay = this.shadowRoot.getElementById('room-display');\n    if (roomDisplay) {\n      if (show) {\n        roomDisplay.classList.remove('hidden');\n      } else {\n        roomDisplay.classList.add('hidden');\n      }\n    }\n  }\n\n  /**\n   * Get or set whether room changes are allowed\n   * @param {boolean} allow - Whether to allow room changes\n   * @returns {boolean} Current allowRoomChange setting\n   */\n  get allowRoomChange() {\n    return this.config.allowRoomChange;\n  }\n  set allowRoomChange(allow) {\n    this.config.allowRoomChange = allow;\n    // Update ChatHeader component config\n    if (this.chatHeaderComponent) {\n      this.chatHeaderComponent.config.allowRoomChange = allow;\n      // Update the room input read-only state\n      const roomInput = this.chatHeaderComponent.shadowRoot.getElementById('room-name');\n      if (roomInput) {\n        roomInput.readOnly = !allow;\n      }\n    }\n  }\n\n  /**\n   * Get or set call modes ('audio' | 'video' | 'both')\n   * @param {string} modes - Call modes to expose\n   * @returns {string} Current call modes\n   */\n  get callModes() {\n    return this.config.callModes;\n  }\n  set callModes(modes) {\n    if (['audio', 'video', 'both'].includes(modes)) {\n      this.config.callModes = modes;\n      this._updateCallButtonVisibility();\n    } else {\n      console.warn('callModes must be \"audio\", \"video\", or \"both\"');\n    }\n  }\n\n  /**\n   * Get or set custom video display component class\n   * @param {Function} componentClass - Custom VideoStreamDisplay-compatible component class\n   * @returns {Function|null} Current video display component class\n   */\n  get videoDisplayComponent() {\n    return this.config.videoDisplayComponent;\n  }\n  set videoDisplayComponent(componentClass) {\n    this.config.videoDisplayComponent = componentClass;\n    // Reinitialize video display if RTC is already set\n    if (this._rtc && this.chatVideo) {\n      const VideoComponent = componentClass || VideoStreamDisplay;\n      this.videoDisplay = new VideoComponent(this.chatVideo, {\n        localVideoSize: '25%',\n        localVideoPosition: 'top-right'\n      });\n    }\n  }\n\n  get rtc(){return this._rtc}\n  set rtc(rtc){\n    this._rtc = rtc;\n    this.name = rtc.name;\n    \n    // Update name in ChatHeader component\n    if (this.chatHeaderComponent) {\n      this.chatHeaderComponent.setName(this.name);\n    }\n    \n    // Store base topic and extract room from full topic\n    const baseTopic = rtc.baseTopic || '';\n    const fullTopic = rtc.topic || '';\n    \n    // Update state\n    this.state.set('baseTopic', baseTopic);\n    \n    // Extract room name from full topic (baseTopic/room or just room)\n    let roomName = fullTopic;\n    if (baseTopic && fullTopic.startsWith(baseTopic)) {\n      // Remove base topic and separator (usually '/')\n      const separator = fullTopic[baseTopic.length] || '/';\n      roomName = fullTopic.substring(baseTopic.length + separator.length);\n    }\n    this.state.set('currentRoom', roomName);\n    \n    // Display prefix as text and room name in input box\n    const separator = baseTopic && fullTopic.startsWith(baseTopic) \n      ? fullTopic[baseTopic.length] || '/' \n      : '';\n    const prefix = baseTopic ? `${baseTopic}${separator}` : '';\n    \n    // Update room in ChatHeader component\n    if (this.chatHeaderComponent) {\n      this.chatHeaderComponent.setRoom(roomName);\n      this.chatHeaderComponent.setRoomPrefix(prefix);\n    }\n    \n    // Initialize ChatManager first (needed by CallManager)\n    this.chatManager = new ChatManager(rtc, {\n      name: this.name,\n      primaryUserColor: this.config.primaryUserColor,\n      userColors: [...this.config.userColors],\n      chatUI: this, // ChatBox implements ChatUIInterface\n      notifications: this.notificationSound // NotificationSound implements NotificationInterface\n    });\n    \n    // Initialize CallManager with chatManager reference for group calls\n    this.callManager = new CallManager(rtc, { \n      callTimeout: this.config.callTimeout,\n      callUI: this, // ChatBox implements CallUIInterface\n      videoDisplay: this.videoDisplay, // VideoStreamDisplay implements StreamDisplayInterface\n      audioDisplay: this.audioDisplay, // AudioStreamDisplay implements StreamDisplayInterface\n      ringer: this.ringer, // CallRinger implements RingerInterface\n      notifications: this.notificationSound, // NotificationSound implements NotificationInterface\n      chatManager: this.chatManager // Pass chatManager for getting active users\n    });\n    \n    // Initialize CallManagement with CallManager\n    if (this.callManagementContainer) {\n      this.callManagement = new CallManagement(this.callManagementContainer, this.callManager);\n    }\n    \n    // Subscribe to manager events (not RTC events directly)\n    this._setupManagerEventListeners();\n    \n    // Load history from ChatManager\n    const history = this.chatManager.getHistory();\n    history.forEach((entry) => this.appendMessage(entry));\n    \n    // Update active users display\n    this._updateActiveUsersDisplay();\n  }\n  \n  /**\n   * Setup event listeners for managers\n   * @private\n   */\n  _setupManagerEventListeners() {\n    // ChatManager events\n    this.chatManager.on('message', ({data, sender, timestamp}) => {\n      this.appendMessage({data, sender, timestamp});\n    });\n    \n    this.chatManager.on('userconnected', ({user}) => {\n      this._updateActiveUsersDisplay();\n      this._updateCallButtonVisibility();\n    });\n    \n    this.chatManager.on('userdisconnected', ({user}) => {\n      this._updateActiveUsersDisplay();\n      this._updateCallButtonVisibility();\n    });\n    \n    // CallManager events\n    this.callManager.on('incomingcall', ({peerName, callInfo, promises}) => {\n      this._handleIncomingCall(peerName, callInfo, promises);\n      // Hide start call buttons when incoming call appears\n      this._updateCallButtonVisibility();\n    });\n    \n    this.callManager.on('callconnected', ({sender, localStream, remoteStream, type}) => {\n      this._handleCallConnected(sender, localStream, remoteStream, type);\n    });\n    \n    this.callManager.on('callended', ({peerName}) => {\n      // Hide any incoming call prompt when call ends\n      this.hideIncomingCallPrompt(peerName);\n      this._handleCallEnded(peerName);\n    });\n    \n    this.callManager.on('calltimeout', ({peerName, direction}) => {\n      // Hide incoming call prompt on timeout\n      this.hideIncomingCallPrompt(peerName);\n      this._handleCallTimeout(peerName, direction);\n    });\n    \n    this.callManager.on('callrejected', ({user}) => {\n      this._showCallDeclinedMessage(user);\n    });\n    \n    this.callManager.on('mutechanged', () => {\n      // CallManagement handles this automatically\n    });\n    \n    // Listen to speakers mute changes to actually mute/unmute audio elements\n    this.callManager.on('speakersmutechanged', ({muted}) => {\n      this.isSpeakersMuted = muted;\n      \n      // Mute/unmute all remote audio elements (speakers)\n      if (this.audioDisplay && this.audioDisplay.activeStreams) {\n        for (const [peerName, streamData] of Object.entries(this.audioDisplay.activeStreams)) {\n          if (streamData && streamData.container) {\n            const remoteAudio = streamData.container.querySelector('.audio-stream-element[data-type=\"remote\"]');\n            if (remoteAudio) {\n              remoteAudio.muted = muted;\n            }\n          }\n        }\n      }\n      \n      // Also handle video calls which may have audio\n      if (this.videoDisplay && this.videoDisplay.activeStreams) {\n        for (const [peerName, streamData] of Object.entries(this.videoDisplay.activeStreams)) {\n          if (streamData && streamData.container) {\n            const remoteVideo = streamData.container.querySelector('.video-stream-remote');\n            if (remoteVideo) {\n              remoteVideo.muted = muted;\n            }\n          }\n        }\n      }\n    });\n  }\n  \n  finishRoomEdit(room = null) {\n    // If room is provided, use it (from ChatHeader event)\n    // Otherwise, get it from ChatHeader component\n    let newRoom = room;\n    if (!newRoom && this.chatHeaderComponent) {\n      // Get room from ChatHeader component's shadow DOM\n      const roomInput = this.chatHeaderComponent.shadowRoot.getElementById('room-name');\n      newRoom = roomInput ? roomInput.value.trim() : null;\n    }\n    \n    if (!newRoom) return;\n    \n    const currentRoom = this.state.get('currentRoom');\n    if (newRoom && newRoom !== currentRoom) {\n      this.state.set('currentRoom', newRoom);\n      // Update ChatHeader component\n      if (this.chatHeaderComponent) {\n        this.chatHeaderComponent.setRoom(newRoom);\n      }\n      // Dispatch event for parent to handle reconnection\n      this.dispatchEvent(new CustomEvent('roomchange', {\n        detail: { room: newRoom },\n        bubbles: true\n      }));\n    }\n  }\n  \n  cancelRoomEdit() {\n    // Restore original value from state\n    const currentRoom = this.state.get('currentRoom');\n    if (this.chatHeaderComponent) {\n      this.chatHeaderComponent.setRoom(currentRoom);\n    }\n  }\n  /**\n   * @deprecated Use ChatManager directly. Kept for backward compatibility.\n   */\n  receiveRTCChat(message, sender){\n    // This is now handled by ChatManager events\n  }\n  \n  /**\n   * Set message history (delegates to ChatManager)\n   */\n  setHistory(history){\n    if (this.chatManager) {\n      // ChatManager manages history internally\n      // Just render the messages\n      history.forEach((entry) => this.appendMessage(entry));\n    }\n  }\n\n  /**\n   * @deprecated Use ChatManager.sendMessage() directly\n   */\n  send(message){\n    if (this.chatManager) {\n      this.chatManager.sendMessage(message);\n    } else {\n      console.warn(\"No chat manager available\");\n  }\n  }\n\n  toggleChat() {\n    this.chatBody.classList.toggle('visible');\n  }\n\n  /**\n   * ChatUIInterface implementation: Get the current message input value\n   * @returns {string} Current input value\n   */\n  getMessageInput() {\n    return this.messageInputComponent ? this.messageInputComponent.getValue() : '';\n  }\n\n  /**\n   * ChatUIInterface implementation: Clear the message input\n   */\n  clearMessageInput() {\n    if (this.messageInputComponent) {\n      this.messageInputComponent.clear();\n    }\n  }\n\n  /**\n   * ChatUIInterface implementation: Enable or disable the message input\n   * @param {boolean} enabled - Whether input should be enabled\n   */\n  setInputEnabled(enabled) {\n    if (this.messageInputComponent) {\n      this.messageInputComponent.setEnabled(enabled);\n    }\n  }\n\n  sendMessage(data) {\n    data = data || this.getMessageInput();\n    if (this.chatManager) {\n      this.chatManager.sendMessage(data);\n      // Message will appear via ChatManager 'message' event\n      // But we also show it immediately for better UX\n      if (this.messagesComponent) {\n        this.messagesComponent.appendMessage({ \n          data, \n          sender: this.name + \"( You )\", \n          timestamp: Date.now(),\n          isOwn: true\n        });\n      }\n    }\n    this.clearMessageInput();\n  }\n\n  /**\n   * ChatUIInterface implementation: Display a chat message\n   * @param {Object} messageData - {data: string, sender: string, timestamp: number}\n   */\n  displayMessage(messageData) {\n    if (this.messagesComponent) {\n      const isOwn = messageData.sender && messageData.sender.includes('( You )');\n      this.messagesComponent.appendMessage({\n        ...messageData,\n        isOwn\n      });\n    }\n  }\n\n  appendMessage({ data, sender, timestamp }) {\n    // Delegate to MessagesComponent\n    if (this.messagesComponent) {\n      const isOwn = sender && sender.includes('( You )');\n      this.messagesComponent.appendMessage({ data, sender, timestamp, isOwn });\n    }\n  }\n\n  /**\n   * @deprecated Use ChatManager 'userconnected' event. Kept for backward compatibility.\n   */\n  onConnectedToUser(user) {\n    // This is now handled by ChatManager events\n    // But we still need to update UI\n    this._updateActiveUsersDisplay();\n  }\n  \n  /**\n   * ChatUIInterface implementation: Update the active users display\n   * @param {Array<string>} users - List of active user names\n   */\n  updateActiveUsers(users) {\n    if (this.activeUsersComponent) {\n      const getUserColor = this.chatManager \n        ? (user) => this.chatManager.getUserColor(user)\n        : null;\n      this.activeUsersComponent.updateUsers(users, getUserColor);\n    }\n    \n    // Enable inputs when someone connects\n    this.updateInputState();\n    \n    // Show call-management section when users connect\n    const hasUsers = users.length > 0;\n    const activeCalls = this.callManager ? this.callManager.getActiveCalls() : {audio: new Set(), video: new Set()};\n    const hasActiveCalls = activeCalls.video.size > 0 || activeCalls.audio.size > 0;\n    const pendingCalls = this.callManager && typeof this.callManager.getPendingCalls === 'function'\n      ? this.callManager.getPendingCalls()\n      : new Set();\n    const hasPendingCalls = pendingCalls.size > 0;\n    \n    if (this.callManagementContainer) {\n      if (hasUsers || hasActiveCalls || hasPendingCalls) {\n        this.callManagementContainer.classList.remove('hidden');\n        this.callManagementContainer.style.display = 'flex';\n        console.log('Call management section shown, hasUsers:', hasUsers, 'hasActiveCalls:', hasActiveCalls, 'hasPendingCalls:', hasPendingCalls);\n      } else {\n        this.callManagementContainer.classList.add('hidden');\n        console.log('Call management section hidden');\n      }\n    } else {\n      console.warn('callManagementContainer not found!');\n    }\n    \n    // Update call button visibility\n    this._updateCallButtonVisibility();\n  }\n\n  /**\n   * Update active users display from ChatManager\n   * @private\n   */\n  _updateActiveUsersDisplay() {\n    if (!this.chatManager) {\n      return;\n    }\n    \n    // Delegate to interface method\n    const activeUsers = this.chatManager ? this.chatManager.getActiveUsers() : [];\n    console.log('ChatBox: Updating active users display with', activeUsers);\n    this.updateActiveUsers(activeUsers);\n  }\n\n\n  /**\n   * @deprecated Use ChatManager 'userdisconnected' event. Kept for backward compatibility.\n   */\n  onDisconnectedFromUser(user) {\n    // This is now handled by ChatManager events\n    // But we still need to update UI\n    this._updateActiveUsersDisplay();\n    \n    // CallManager handles ending calls when users disconnect\n    // Just update UI\n    this._updateCallButtonStates(false);\n  }\n  \n  updateInputState() {\n    const activeUsers = this.chatManager ? this.chatManager.getActiveUsers() : [];\n    const hasOtherUsers = activeUsers.length > 0;\n    this.setInputEnabled(hasOtherUsers);\n  }\n\n  /**\n   * CallUIInterface implementation: Display an incoming call prompt\n   * @param {string} peerName - Name of the caller\n   * @param {Object} callInfo - {video: boolean, audio: boolean}\n   * @returns {Promise<boolean>} Promise that resolves to true to accept, false to reject\n   */\n  showIncomingCallPrompt(peerName, callInfo) {\n    console.log('Incoming call from', peerName, 'callInfo:', callInfo);\n    \n    // Display prompt in CallManagement component\n    if (this.callManagement && typeof this.callManagement.showIncomingCallPrompt === 'function') {\n      return this.callManagement.showIncomingCallPrompt(peerName, callInfo);\n    }\n    \n    // Fallback: auto-accept if CallManagement not available\n    return Promise.resolve(true);\n  }\n\n  /**\n   * CallUIInterface implementation: Hide/remove the incoming call prompt\n   * @param {string} peerName - Name of the caller\n   */\n  hideIncomingCallPrompt(peerName) {\n    // Hide prompt in CallManagement component\n    if (this.callManagement && typeof this.callManagement.hideIncomingCallPrompt === 'function') {\n      this.callManagement.hideIncomingCallPrompt(peerName);\n    }\n  }\n\n  /**\n   * CallUIInterface implementation: Display a missed call notification\n   * @param {string} peerName - Name of the peer\n   * @param {string} direction - 'incoming' or 'outgoing'\n   */\n  showMissedCallNotification(peerName, direction) {\n    // Show in call management, not messages\n    if (this.callManagement && typeof this.callManagement.showMissedCallNotification === 'function') {\n      this.callManagement.showMissedCallNotification(peerName, direction);\n    }\n  }\n\n  /**\n   * CallUIInterface implementation: Display a call declined notification\n   * @param {string} peerName - Name of the peer who declined\n   */\n  showCallDeclinedNotification(peerName) {\n    // Show in call management, not messages\n    if (this.callManagement && typeof this.callManagement.showCallDeclinedNotification === 'function') {\n      this.callManagement.showCallDeclinedNotification(peerName);\n    }\n  }\n\n  /**\n   * CallUIInterface implementation: Update call button states\n   * @param {Object} state - {inCall: boolean, callType: string|null, isOutgoing: boolean}\n   */\n  updateCallButtonStates(state) {\n    this._updateCallButtonStates(\n      state.inCall, \n      state.callType || null, \n      state.isOutgoing || false\n    );\n  }\n\n  /**\n   * Handle incoming call from CallManager\n   * @private\n   */\n  _handleIncomingCall(peerName, callInfo, promises) {\n    // Delegate to interface method\n    return this.showIncomingCallPrompt(peerName, callInfo);\n  }\n  \n  /**\n   * @deprecated Use _handleIncomingCall via CallManager events. Kept for backward compatibility.\n   */\n  onIncomingCall(peerName, callInfo, promises) {\n    // This is now handled by CallManager events\n    return this._handleIncomingCall(peerName, callInfo, promises);\n  }\n  \n  /**\n   * Handle call connected from CallManager\n   * @private\n   */\n  _handleCallConnected(sender, localStream, remoteStream, type) {\n    console.log(`${type} call connected with ${sender}`);\n    \n    // Stop ringing\n    this.ringer.stop();\n    \n    // Hide incoming call prompt if it exists\n    this.hideIncomingCallPrompt(sender);\n    \n    // Only set streams if they are valid MediaStream objects\n    if (type === 'audio') {\n      if (localStream instanceof MediaStream || remoteStream instanceof MediaStream) {\n        this.audioDisplay.setStreams(sender, { localStream, remoteStream });\n      }\n      // Audio call info is handled by CallManagement, not messages\n    } else {\n      // Video call\n      if (localStream instanceof MediaStream || remoteStream instanceof MediaStream) {\n        this.videoDisplay.setStreams(sender, { localStream, remoteStream });\n        // Show video container\n        if (this.chatVideo) {\n          this.chatVideo.classList.add('visible');\n          console.log('Video container displayed');\n        }\n      } else {\n        console.warn(`Invalid streams for video call:`, { localStream, remoteStream });\n      }\n    }\n    \n    // Show call controls\n    this._updateCallControlsVisibility();\n    \n    // Update button states\n    this._updateCallButtonStates(true, type);\n  }\n  \n  /**\n   * @deprecated Use _handleCallConnected via CallManager events. Kept for backward compatibility.\n   */\n  onCallConnected(sender, localStream, remoteStream, type) {\n    // This is now handled by CallManager events\n    this._handleCallConnected(sender, localStream, remoteStream, type);\n  }\n  \n  /**\n   * Handle call ended from CallManager\n   * @private\n   */\n  _handleCallEnded(peerName) {\n    console.log(\"ChatBox._handleCallEnded: Handling call ended for \" + peerName);\n    \n    // Stop ringing if call ends (including cancelled calls)\n    if (this.ringer && typeof this.ringer.stop === 'function') {\n      this.ringer.stop();\n    }\n    \n    // Cleanup streams\n    this.videoDisplay.removeStreams(peerName);\n    this.audioDisplay.removeStreams(peerName);\n    \n    // Get current state from CallManager (state is already updated when event fires)\n    const activeCalls = this.callManager ? this.callManager.getActiveCalls() : {audio: new Set(), video: new Set()};\n    const pendingCalls = this.callManager ? this.callManager.getPendingCalls() : new Set();\n    const hasActiveCalls = activeCalls.video.size > 0 || activeCalls.audio.size > 0;\n    const hasPendingCalls = pendingCalls.size > 0;\n    \n    console.log(\"ChatBox._handleCallEnded: State after call ended - active:\", activeCalls, \"pending:\", pendingCalls);\n    \n    // Hide video container if no active video calls\n    if (activeCalls.video.size === 0) {\n      if (this.chatVideo) {\n        this.chatVideo.classList.remove('visible');\n      }\n      // Also hide the video display container directly\n      if (this.videoDisplay && this.videoDisplay.container) {\n        this.videoDisplay.hide();\n      }\n    }\n    \n    // Update pinned audio call message\n    this._updatePinnedAudioCallMessage();\n    \n    // Reset call type\n    this.activeCallType = null;\n    \n    // Update call controls visibility (this will hide controls if no active calls)\n    this._updateCallControlsVisibility();\n    \n    // Update button states based on actual call state (will show start buttons if no active calls)\n    this._updateCallButtonStates(hasActiveCalls);\n    \n    // Update button visibility to restore start call buttons if no active calls AND no pending calls\n    this._updateCallButtonVisibility();\n    \n    // CRITICAL: Update CallManagement UI - this should hide controls and info containers\n    // Always update state from CallManager to ensure UI is in correct state\n    if (this.callManagement && typeof this.callManagement._updateFromCallManager === 'function') {\n      console.log(\"ChatBox._handleCallEnded: Updating CallManagement UI\");\n      this.callManagement._updateFromCallManager();\n    }\n    \n    // Ensure call management container is visible so users can start new calls\n    // Even when there are no active calls, the container should be visible for start call buttons\n    if (this.callManagementContainer) {\n      this.callManagementContainer.classList.remove('hidden');\n      this.callManagementContainer.style.display = 'flex';\n    }\n    \n    // Also ensure video container is hidden if no active calls\n    if (!hasActiveCalls && this.chatVideo) {\n      this.chatVideo.classList.remove('visible');\n      if (this.videoDisplay && this.videoDisplay.container) {\n        this.videoDisplay.hide();\n      }\n    }\n  }\n  \n  /**\n   * @deprecated Use _handleCallEnded via CallManager events. Kept for backward compatibility.\n   */\n  onCallEnded(peerName) {\n    // This is now handled by CallManager events\n    this._handleCallEnded(peerName);\n  }\n  \n  /**\n   * Legacy onIncomingCall implementation (kept for reference)\n   * @deprecated\n   */\n  _legacyOnIncomingCall(peerName, callInfo, promises) {\n    // Set up timeout for unanswered incoming call\n    let timeoutId = setTimeout(() => {\n      console.log(`Incoming call from ${peerName} timed out after ${this.config.callTimeout}ms`);\n      // Stop ringing\n      this.ringer.stop();\n      // Show missed call message\n      this._showMissedCallMessage(peerName, 'incoming');\n      // Remove pending call\n      const pendingCall = this.pendingCalls.get(peerName);\n      if (pendingCall) {\n        // Remove prompt if it exists\n        if (pendingCall.promptElement) {\n          try {\n            pendingCall.promptElement.remove();\n          } catch (err) {\n            console.warn('Could not remove prompt element:', err);\n          }\n        }\n        this.pendingCalls.delete(peerName);\n      }\n      // Properly end the call to stop streams on both sides\n      if (this._rtc) {\n        try {\n          this._rtc.endCallWithUser(peerName);\n        } catch (err) {\n          console.warn('Error ending timed out call:', err);\n        }\n      }\n      // Clean up any streams that might have started\n      this.videoDisplay.removeStreams(peerName);\n      this.audioDisplay.removeStreams(peerName);\n      this.activeVideoCalls.delete(peerName);\n      this.activeAudioCalls.delete(peerName);\n      this.localStreams.delete(peerName);\n      \n      // Update call controls visibility (will remove if no active calls)\n      this._updateCallControlsVisibility();\n    }, this.config.callTimeout);\n    \n    // Track pending call with timeout ID\n    this.pendingCalls.set(peerName, { callInfo, promises, timeoutId });\n    \n    // Auto-accept calls (could be made configurable)\n    // The RTC client expects this handler to return a Promise that resolves to true to accept\n    // The actual stream handling will happen in the 'callconnected' event\n    // Also listen to the start promise to stop ringing when call connects\n    promises.start.then(({ localStream, remoteStream }) => {\n      // Clear timeout since call was answered\n      const pendingCall = this.pendingCalls.get(peerName);\n      if (pendingCall && pendingCall.timeoutId) {\n        clearTimeout(pendingCall.timeoutId);\n        pendingCall.timeoutId = null;\n      }\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n        timeoutId = null;\n      }\n      // Stop ringing when call is answered\n      this.ringer.stop();\n      this.pendingCalls.delete(peerName);\n      console.log(`Call start promise resolved for ${peerName}`);\n    }).catch(err => {\n      // Clear timeout from pendingCalls\n      const pendingCall = this.pendingCalls.get(peerName);\n      if (pendingCall && pendingCall.timeoutId) {\n        clearTimeout(pendingCall.timeoutId);\n        pendingCall.timeoutId = null;\n      }\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n        timeoutId = null;\n      }\n      // Stop ringing if call is rejected or fails\n      this.ringer.stop();\n      this.pendingCalls.delete(peerName);\n      console.error(`Call start promise rejected for ${peerName}:`, err);\n    });\n    \n    // Return Promise.resolve(true) to accept the call\n    // The RTC client will then get media and fire 'callconnected' event\n    return Promise.resolve(true);\n  }\n\n  onCallEnded(peerName) {\n    // Stop ringing if call ends (including cancelled calls)\n    this.ringer.stop();\n    \n    // Get pending call info before deleting\n    const pendingCall = this.pendingCalls.get(peerName);\n    \n    // Remove pending call\n    this.pendingCalls.delete(peerName);\n    \n    // Clean up outgoing call if it exists\n    const outgoingCall = this.outgoingCalls.get(peerName);\n    if (outgoingCall) {\n      // Clear timeout if it exists\n      if (outgoingCall.timeoutId) {\n        clearTimeout(outgoingCall.timeoutId);\n      }\n      this.outgoingCalls.delete(peerName);\n    }\n    \n    // If there was a pending call with a prompt element, remove it\n    if (pendingCall && pendingCall.promptElement) {\n      try {\n        pendingCall.promptElement.remove();\n      } catch (err) {\n        console.warn('Could not remove prompt element:', err);\n      }\n    }\n    \n    // Cleanup streams\n    this.videoDisplay.removeStreams(peerName);\n    this.audioDisplay.removeStreams(peerName);\n    this.activeVideoCalls.delete(peerName);\n    this.activeAudioCalls.delete(peerName);\n    this.localStreams.delete(peerName);\n    \n    // Update pinned audio call message\n    this._updatePinnedAudioCallMessage();\n    \n    // Update call controls visibility\n    this._updateCallControlsVisibility();\n    \n    // Reset call type\n    this.activeCallType = null;\n    \n    // Update button states\n    this._updateCallButtonStates(false);\n  }\n\n  /**\n   * Show a missed call notification message\n   * @param {string} peerName - Name of the peer\n   * @param {string} direction - 'incoming' or 'outgoing'\n   * @private\n   * @deprecated Use showMissedCallNotification which delegates to CallManagement\n   */\n  _showMissedCallMessage(peerName, direction) {\n    // Delegate to CallManagement (not messages)\n    this.showMissedCallNotification(peerName, direction);\n  }\n\n  /**\n   * Show a call declined notification message\n   * @param {string} peerName - Name of the peer who declined\n   * @private\n   * @deprecated Use showCallDeclinedNotification which delegates to CallManagement\n   */\n  _showCallDeclinedMessage(peerName) {\n    // Delegate to CallManagement (not messages)\n    this.showCallDeclinedNotification(peerName);\n  }\n\n  /**\n   * Update or remove the pinned audio call message\n   * @private\n   */\n  _updatePinnedAudioCallMessage() {\n    // Get active audio calls from CallManager if available, otherwise use local state\n    const activeCalls = this.callManager ? this.callManager.getActiveCalls() : {audio: new Set(), video: new Set()};\n    const hasAudioCalls = activeCalls.audio.size > 0;\n    \n    if (hasAudioCalls) {\n      // Create or update pinned message\n      if (!this.pinnedAudioCallMessage) {\n        this.pinnedAudioCallMessage = document.createElement('div');\n        this.pinnedAudioCallMessage.id = 'pinned-audio-call-message';\n        this.pinnedAudioCallMessage.className = 'pinned-audio-call';\n        \n        // Insert at the top of messages\n        const messagesEl = this.messagesComponent ? this.messagesComponent.shadowRoot?.querySelector('#messages') || this.messagesComponent : null;\n        if (messagesEl && messagesEl.firstChild) {\n          messagesEl.insertBefore(this.pinnedAudioCallMessage, messagesEl.firstChild);\n        } else if (messagesEl) {\n          messagesEl.appendChild(this.pinnedAudioCallMessage);\n        }\n      }\n      \n      // Update message content with list of active audio calls\n      const callList = Array.from(activeCalls.audio).join(', ');\n      const callCount = activeCalls.audio.size;\n      this.pinnedAudioCallMessage.textContent = `ðŸ”Š Audio call active${callCount > 1 ? 's' : ''} with: ${callList}`;\n      this.pinnedAudioCallMessage.classList.remove('hidden');\n    } else {\n      // Remove pinned message if no audio calls\n      if (this.pinnedAudioCallMessage) {\n        try {\n          this.pinnedAudioCallMessage.remove();\n        } catch (err) {\n          // Element may have already been removed\n        }\n        this.pinnedAudioCallMessage = null;\n      }\n    }\n  }\n\n\n  onCallConnected(sender, {localStream, remoteStream}) {\n    // Stop ringing when call connects\n    this.ringer.stop();\n    \n    // Clear timeout from pending calls\n    const pendingCall = this.pendingCalls.get(sender);\n    if (pendingCall && pendingCall.timeoutId) {\n      clearTimeout(pendingCall.timeoutId);\n    }\n    this.pendingCalls.delete(sender);\n    \n    console.log('Call connected event with', sender, { \n      localStream, \n      remoteStream,\n      localVideoTracks: localStream?.getVideoTracks().length,\n      localAudioTracks: localStream?.getAudioTracks().length,\n      remoteVideoTracks: remoteStream?.getVideoTracks().length,\n      remoteAudioTracks: remoteStream?.getAudioTracks().length\n    });\n    \n    // Determine call type based on stream tracks\n    const hasVideo = localStream?.getVideoTracks().length > 0 || \n                     remoteStream?.getVideoTracks().length > 0;\n    const hasAudio = localStream?.getAudioTracks().length > 0 || \n                     remoteStream?.getAudioTracks().length > 0;\n    \n    console.log('Call type detection:', { hasVideo, hasAudio, sender });\n    \n    // Determine call type for button transformation\n    const callType = hasVideo ? 'video' : (hasAudio ? 'audio' : null);\n    if (callType) {\n      this.activeCallType = callType;\n    }\n    \n    // Update button states to show end call button\n    this._updateCallButtonStates(true, callType);\n    \n    if (hasVideo) {\n      // Video call (includes audio)\n      console.log('Setting up video call for', sender);\n      this.activeVideoCalls.add(sender);\n      this.videoDisplay.setStreams(sender, { localStream, remoteStream });\n      // Store local stream for mute/video control\n      if (localStream instanceof MediaStream) {\n        this.localStreams.set(sender, localStream);\n      }\n      \n      // Ensure video container is visible\n      if (this.chatVideo) {\n        this.chatVideo.classList.add('visible');\n        console.log('Video container displayed');\n      }\n      // Show call controls\n      this._updateCallControlsVisibility();\n    } else if (hasAudio) {\n      // Audio-only call\n      console.log('Setting up audio call for', sender);\n      this.activeAudioCalls.add(sender);\n      this.audioDisplay.setStreams(sender, { localStream, remoteStream });\n      // Store local stream for mute control\n      if (localStream instanceof MediaStream) {\n        this.localStreams.set(sender, localStream);\n      }\n      // Audio call info is handled by CallManagement, not messages\n      // Show call controls\n      this._updateCallControlsVisibility();\n    } else {\n      console.warn('Call connected but no video or audio tracks detected for', sender);\n    }\n  }\n\n\n}\nif (!customElements.get('chat-box')) {\n  customElements.define('chat-box', ChatBox);\n}\n\nexport { ChatBox };","/**\n * RTCVideoChat - Core logic for managing video streams and calls\n * \n * This class manages MediaStream objects and call lifecycle without any UI dependencies.\n * It provides callbacks for UI updates, making it easy to integrate with any UI framework.\n * \n * Note: This is a legacy component. New code should use CallManager instead.\n * \n * Usage:\n *   import { RTCVideoChat } from './rtc-video-chat.js';\n *   \n *   const videoChat = new RTCVideoChat(rtcClient, {\n *     setLocalSrc: (stream) => { // update local video element\n *     },\n *     setRemoteSrc: (stream, peerName) => { // update remote video element\n *     },\n *     hide: () => { // hide video UI\n *     },\n *     show: () => { // show video UI\n *     }\n *   });\n * \n * @module rtc-video-chat\n */\n\nclass RTCVideoChat {\n  /**\n   * Create a new RTCVideoChat instance\n   * @param {Object} rtc - RTC client instance\n   * @param {Function} setLocalSrc - Callback to set local video source\n   * @param {Function} setRemoteSrc - Callback to set remote video source\n   * @param {Function} hide - Callback to hide video UI\n   * @param {Function} show - Callback to show video UI\n   */\n  constructor(rtc, setLocalSrc, setRemoteSrc, hide, show) {\n    this.setLocalSrc = setLocalSrc;\n    this.setRemoteSrc = setRemoteSrc;\n\n    this.accept = this.accept.bind(this);\n    this.close = this.close.bind(this);\n    this.closeCall = this.closeCall.bind(this);\n    this.endCall = this.endCall.bind(this);\n    this.setStreamCount = this.setStreamCount.bind(this);\n\n    this._rtc = null;\n    if (rtc) {\n      this.rtc = rtc;\n    }\n    this.pendingNames = [];\n\n    this.localStream = null;\n    this.remoteStreams = {};\n\n    if (hide) {\n      this.hide = hide;\n    }\n    if (show) {\n      this.show = show;\n    }\n  }\n\n  get rtc() {\n    if (!this._rtc) {\n      throw new Error(\"RTC not set\");\n    }\n    return this._rtc;\n  }\n\n  set rtc(rtc) {\n    this._rtc = rtc;\n    rtc.on('callconnected', this.accept);\n    rtc.on('calldisconnected', this.endCall);\n  }\n\n  get name() {\n    return this.rtc.name;\n  }\n\n  call(peerName, promise = 'end') {\n    this.pendingNames.push(peerName);\n    let { start, end } = this.rtc.callUser(peerName);\n    end = end.then(() => {\n      this.close(peerName);\n    });\n    if (promise === 'end') {\n      return end;\n    }\n    return start;\n  }\n\n  endCall(peerName = 'all') {\n    if (peerName === 'all') {\n      for (let name of Object.keys(this.remoteStreams)) {\n        this.endCall(name);\n      }\n    }\n    if (this.remoteStreams[peerName]) {\n      this.rtc.endCallWithUser(peerName);\n    }\n    this.closeCall(peerName);\n  }\n\n  accept(name, streams) {\n    if (streams instanceof Promise) {\n      streams.then(streams => this.accept(name, streams));\n      return;\n    }\n    if (this.pendingNames.includes(name)) {\n      this.pendingNames = this.pendingNames.filter(n => n !== name);\n    }\n\n    if (!this.localStream) {\n      this.localStream = streams.localStream;\n      this.setLocalSrc(this.localStream);\n    }\n    this.setRemoteSrc(streams.remoteStream, name);\n    this.remoteStreams[name] = streams.remoteStream;\n    this.setStreamCount(Object.keys(this.remoteStreams).length);\n  }\n\n  closeCall(peerName) {\n    this.pendingNames = this.pendingNames.filter(name => name !== peerName);\n    this.setRemoteSrc(null, peerName);\n    let rs = this.remoteStreams[peerName];\n    if (rs) {\n      try {\n        rs.getTracks().forEach(track => track.stop());\n      } catch (e) {\n        // Ignore errors when stopping tracks\n      }\n      delete this.remoteStreams[peerName];\n      this.setStreamCount(Object.keys(this.remoteStreams).length);\n    }\n  }\n\n  setStreamCount(count) {\n    if (!count) {\n      if (this.localStream) {\n        try {\n          this.localStream.getTracks().forEach(track => track.stop());\n        } catch (e) {\n          // Ignore errors when stopping tracks\n        }\n        this.setLocalSrc(null);\n        this.localStream = null;\n      }\n      this.setLocalSrc(null);\n      this.localStream = null;\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  hide() {\n    // Override in subclass or via constructor\n  }\n\n  show() {\n    // Override in subclass or via constructor\n  }\n\n  close() {\n    // End all streams\n    this.endCall();\n  }\n}\n\nexport { RTCVideoChat };\n\n\n","/**\n * VideoChatHTMLElementBase - HTMLElement-based base for video chat component\n * \n * This class extends UIComponentBase (which extends HTMLElement) and implements\n * the VideoChatBase contract. This allows concrete implementations to\n * extend this class and get both HTMLElement functionality and the abstract contract.\n * \n * @extends UIComponentBase\n * @implements VideoChatBase\n */\n\nimport { UIComponentBase } from '../../core/interfaces/ui-component-base.js';\nimport { VideoChatBase } from '../../core/interfaces/video-chat-base.js';\nimport { RTCVideoChat } from '../../core/rtc-video-chat.js';\n\nexport class VideoChatHTMLElementBase extends UIComponentBase {\n  /**\n   * Create a new VideoChatHTMLElementBase instance\n   * @param {Object} rtc - RTC client instance\n   * @param {Object} options - Configuration options\n   */\n  constructor(rtc, options = {}) {\n    super(options);\n    \n    // Initialize abstract base functionality\n    // Initialize properties from VideoChatBase\n    this.rtc = rtc;\n    \n    // Store window reference\n    this._window = this.options.window;\n    this._assignToWindow = this.options.assignToWindow;\n    \n    // Note: RTCVideoChat initialization should be done in subclass\n    // after shadow DOM is set up, so callbacks can access DOM elements\n    // Subclasses should call _initializeRTCVideoChat() after setting up DOM\n  }\n  \n  /**\n   * Initialize RTCVideoChat with callbacks\n   * Should be called by subclasses after DOM is set up\n   * @protected\n   */\n  _initializeRTCVideoChat(rtc) {\n    // Bind methods\n    this.setLocalSrc = this.setLocalSrc.bind(this);\n    this.setRemoteSrc = this.setRemoteSrc.bind(this);\n    this.hide = this.hide.bind(this);\n    this.show = this.show.bind(this);\n    this.resize = this.resize.bind(this);\n    \n    // Initialize RTCVideoChat with callbacks\n    this.rtcVC = new RTCVideoChat(rtc,\n      this.setLocalSrc,\n      this.setRemoteSrc,\n      this.hide,\n      this.show\n    );\n    \n    // Optional window assignment\n    if (this._assignToWindow && this._window) {\n      this._window.vc = this;\n    }\n    \n    // Bind RTCVideoChat methods\n    this.call = this.rtcVC.call.bind(this.rtcVC);\n    this.endCall = this.rtcVC.endCall.bind(this.rtcVC);\n    \n    // Add resize listener if window is available\n    if (this._window) {\n      this._window.addEventListener('resize', this.resize);\n    }\n  }\n\n  /**\n   * Set the local video source (MediaStream)\n   * Must be implemented by subclasses\n   * @param {MediaStream|null} src - MediaStream to display, or null to clear\n   * @abstract\n   */\n  setLocalSrc(src) {\n    throw new Error('setLocalSrc must be implemented by subclass');\n  }\n\n  /**\n   * Set the remote video source (MediaStream)\n   * Must be implemented by subclasses\n   * @param {MediaStream|null} src - MediaStream to display, or null to clear\n   * @abstract\n   */\n  setRemoteSrc(src) {\n    throw new Error('setRemoteSrc must be implemented by subclass');\n  }\n\n  /**\n   * Show the video chat UI\n   * Must be implemented by subclasses\n   * @abstract\n   */\n  show() {\n    throw new Error('show must be implemented by subclass');\n  }\n\n  /**\n   * Hide the video chat UI\n   * Must be implemented by subclasses\n   * @abstract\n   */\n  hide() {\n    throw new Error('hide must be implemented by subclass');\n  }\n\n  /**\n   * Handle window resize\n   * Default implementation - can be overridden\n   * @param {Object} window - Window object (optional, uses this._window if not provided)\n   */\n  resize(window = null) {\n    const win = window || this._window;\n    if (!win) return;\n    \n    // Optionally adjust the size based on the window size or other conditions\n    const width = win.innerWidth;\n    const height = win.innerHeight;\n    \n    // Get container element (must be implemented by subclass)\n    const container = this._getContainer();\n    if (container) {\n      // Example: Adjust max-width/max-height based on conditions\n      container.style.maxWidth = width > 600 ? '50vw' : '80vw';\n      container.style.maxHeight = height > 600 ? '50vh' : '80vh';\n    }\n  }\n\n  /**\n   * Get the container element\n   * Must be implemented by subclasses\n   * @returns {HTMLElement|null} Container element\n   * @protected\n   * @abstract\n   */\n  _getContainer() {\n    throw new Error('_getContainer must be implemented by subclass');\n  }\n\n  /**\n   * Cleanup and destroy the component\n   * Default implementation removes resize listener\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    \n    // Remove resize listener\n    if (this._window && this.resize) {\n      this._window.removeEventListener('resize', this.resize);\n    }\n    \n    // Clean up window assignment\n    if (this._assignToWindow && this._window && this._window.vc === this) {\n      delete this._window.vc;\n    }\n  }\n}\n\n","/**\n * BasicVideoChat - Web Component UI for displaying video\n * \n * HTMLElement-based implementation that extends VideoChatHTMLElementBase,\n * which provides both HTMLElement functionality and VideoChatBase contract.\n * \n * This is a UI component that uses RTCVideoChat (from core) for business logic.\n * It provides a Web Component interface for video calling.\n * \n * Usage:\n *   import { BasicVideoChat } from './video-chat.js';\n *   \n *   const videoChat = new BasicVideoChat(rtcClient, {\n *     window: window,        // Optional: inject window object\n *     assignToWindow: false // Optional: disable window.vc assignment\n *   });\n *   document.body.appendChild(videoChat);\n * \n *   // Start a call\n *   videoChat.call('PeerName').then(() => {\n *     console.log('Call started');\n *   });\n * \n *   // End a call\n *   videoChat.endCall('PeerName');\n * \n * Features:\n * - Local video preview (small overlay)\n * - Remote video display (main view)\n * - Automatic stream management\n * - Multiple peer support\n * - Call state management\n * - Responsive layout\n * \n * @module video-chat\n */\n\nimport { VideoChatHTMLElementBase } from './base-html/video-chat-html-base.js';\n\nclass BasicVideoChat extends VideoChatHTMLElementBase {\n    constructor(rtc, options = {}) {\n        super(rtc, options);\n        this.shadowRoot.innerHTML = `\n            <style>\n                #container {\n                    position: relative;\n                    width: 100%;\n                    height: 100%; /* Full height of the container */\n                    max-width: 50vw;\n                    max-height: 50vh;\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                }\n\n                #remoteVideo, #localVideo {\n                    max-width: 100%;\n                    height: auto; /* Maintain aspect ratio */\n                }\n\n                #remoteVideo {\n                    width: 100%; /* Full width of the container */\n                    max-width: 50vw;\n                    max-height: 50vh;\n                }\n\n                #localVideo {\n                    position: absolute;\n                    width: 20%; /* Smaller size for local video */\n                    top: 10px;\n                    right: 10px;\n                    border: 2px solid white;\n                    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n                    max-height: 100%;\n                }\n\n            </style>\n            <div id=\"container\">\n                <video id=\"remoteVideo\" autoplay playsinline></video>\n                <video id=\"localVideo\" autoplay playsinline muted></video>\n            </div>\n        `;\n        this.localVideo = this.queryRoot('#localVideo');\n        this.remoteVideo = this.queryRoot('#remoteVideo');\n        this.container = this.queryRoot('#container');\n        \n        // Initialize RTCVideoChat after DOM is set up\n        this._initializeRTCVideoChat(rtc);\n    }\n    \n    /**\n     * Initialize the component\n     * @protected\n     */\n    _initialize() {\n        // Component is ready after shadow DOM is set up\n    }\n    \n    /**\n     * Get the container element\n     * Implements VideoChatHTMLElementBase._getContainer\n     * @returns {HTMLElement|null} Container element\n     * @protected\n     */\n    _getContainer() {\n        return this.container;\n    }\n    /**\n     * Set the local video source (MediaStream)\n     * Implements VideoChatBase.setLocalSrc\n     * @param {MediaStream|null} src - MediaStream to display, or null to clear\n     */\n    setLocalSrc(src) {\n        if (this.localVideo) {\n            this.localVideo.srcObject = src;\n        }\n    }\n    \n    /**\n     * Set the remote video source (MediaStream)\n     * Implements VideoChatBase.setRemoteSrc\n     * @param {MediaStream|null} src - MediaStream to display, or null to clear\n     */\n    setRemoteSrc(src) {\n        if (this.remoteVideo) {\n            this.remoteVideo.srcObject = src;\n        }\n    }\n    \n    /**\n     * Hide the video chat UI\n     * Implements VideoChatBase.hide\n     */\n    hide() {\n        if (this.container) {\n            this.container.style.display = \"none\";\n        }\n    }\n    \n    /**\n     * Show the video chat UI\n     * Implements VideoChatBase.show\n     */\n    show() {\n        if (this.container) {\n            this.container.style.display = \"flex\";\n        }\n    }\n    \n    /**\n     * Handle window resize\n     * Overrides VideoChatHTMLElementBase.resize\n     */\n    resize() {\n        super.resize(this._window);\n    }\n    \n    /**\n     * Cleanup when element is disconnected\n     */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n    }\n\n}\n\nif (!customElements.get('video-chat')) {\n  customElements.define('video-chat', BasicVideoChat);\n}\n\nexport { BasicVideoChat };","/**\n * RTChat - Complete chat application with video calling and identity verification\n * \n * This is the main entry point for the RTChat application. It combines:\n * - ChatBox: UI for text messaging\n * - SignedMQTTRTCClient: Secure RTC client with cryptographic identity verification\n * - BasicVideoChat: Video calling interface\n * \n * Usage:\n *   <!-- Auto-add to page -->\n *   <script type=\"module\" src=\"./rtchat.js?add=true\"></script>\n *   \n *   <!-- Or manually create -->\n *   <rtc-hat></rtc-hat>\n *   <script type=\"module\">\n *     import { RTChat } from './rtchat.js';\n *     const chat = document.querySelector('rtc-hat');\n *   </script>\n * \n * Features:\n * - Text chat with room-based messaging\n * - Video/audio calling between peers\n * - Cryptographic identity verification (RSA-PSS)\n * - Trust level management (strict, moderate, lax, etc.)\n * - Connection request prompts\n * - Validation notifications\n * - Persistent room/name settings in localStorage\n * \n * Configuration:\n *   const chat = new RTChat({\n *     showRoom: true,        // Show/hide room name in header (default: true)\n *     allowRoomChange: true, // Allow editing room name (default: true)\n *     showRoomInput: true,   // Show/hide legacy room input field\n *     topic: 'myroom',       // Chat room name\n *     trustMode: 'moderate' // Trust level: 'strict', 'moderate', 'lax', 'unsafe', etc.\n *   });\n * \n * Trust Modes:\n * - strict: Only trust known peers, prompt for others\n * - moderate: Trust known peers and aliases, prompt for suspicious cases\n * - lax: Trust most peers, prompt only for very suspicious cases\n * - unsafe: Trust everyone (not recommended)\n * \n * Events:\n * - 'connectionrequest': Fired when a peer wants to connect (returns Promise<boolean>)\n * - 'validation': Fired when a peer is validated (peerName, trusted)\n * - 'validationfailure': Fired when validation fails (peerName, message)\n * - 'call': Fired when receiving a call (peerName, info, promises)\n * - 'callended': Fired when a call ends\n * \n * @module rtchat\n */\n\nimport { ChatBox } from \"../../ui/chat-box.js\";\nimport { SignedMQTTRTCClient } from \"../../core/signed-client.js\";\nimport { BasicVideoChat } from \"../../ui/video-chat.js\";\n\n\nclass RTChat extends ChatBox {\n    constructor(config, VC = BasicVideoChat) {\n        // Must call super() first before accessing 'this'\n        super(config || {});\n        \n        // Store config for later use (use this.config from parent, or merge with provided config)\n        const providedConfig = config || {};\n        this._config = { ...this.config, ...providedConfig };\n        \n        // Store VC for later use\n        this._VC = VC;\n        \n        // Flag to track if we've applied auto-config\n        this._autoConfigApplied = false;\n        this._VC = VC;\n\n        // Configure room display and editability\n        this.showRoom = this._config.showRoom !== false; // Default: true\n        this.allowRoomChange = this._config.allowRoomChange !== false; // Default: true\n\n        // Note: chatRoomBox no longer exists - room input is now in ChatHeader component\n        // The showRoomInput config is handled by ChatHeader's showRoom config\n        \n        this.prompt = this.prompt.bind(this);\n        this.notify = this.notify.bind(this);\n        this.connectionrequest = this.connectionrequest.bind(this);\n        this._activeConnectionPrompts = new Map(); // Track active prompts by peer name\n        \n        // Use defaultRoom from config if provided, otherwise localStorage, otherwise 'chat'\n        let topic = this._config.topic || localStorage.getItem('topic') || 'chat';\n        // If topic is an object, extract the room\n        if (typeof topic === 'object' && topic.room) {\n            topic = topic.room;\n        }\n        \n        // Set room in ChatHeader component\n        if (this.chatHeaderComponent) {\n            this.chatHeaderComponent.setRoom(topic);\n        }\n        \n        // Listen for room change events from ChatHeader component\n        if (this.chatHeaderComponent) {\n            this.chatHeaderComponent.addEventListener('roomchange', (e) => {\n                const newRoom = e.detail.room;\n                localStorage.setItem('topic', newRoom);\n                this.connectRTC(this._config);\n            });\n        }\n        \n        // Also listen for room change events from ChatBox (backward compatibility)\n        this.addEventListener('roomchange', (e) => {\n            const newRoom = e.detail.room;\n            localStorage.setItem('topic', newRoom);\n            this.connectRTC(this._config);\n        });\n        \n        this.connectRTC = this.connectRTC.bind(this);\n        this.connectRTC(this._config);\n        // Don't add BasicVideoChat if ChatBox is using VideoStreamDisplay\n        // ChatBox now handles video display internally, so we skip the legacy VC component\n        // this.vc = new VC(this.rtc);\n        // this.vc.hide();\n        // this.chatVideo.appendChild(this.vc);\n        this.lastValidated = \"\";\n\n    }\n    \n    /**\n     * Called when the element is connected to the DOM\n     * Use this to apply auto-config that was set before element creation\n     */\n    connectedCallback() {\n        // Check for auto-config from URL parameters (when ?add=true)\n        // Check if there's a pending config in the queue\n        if (autoConfigPending.length > 0 && !this._autoConfigApplied) {\n            const autoConfig = autoConfigPending.shift(); // Get and remove first pending config\n            this._autoConfigApplied = true;\n            \n            // Merge auto-config into existing config\n            Object.assign(this.config, autoConfig);\n            // Also update _config for RTChat-specific properties\n            this._config = { ...this._config, ...autoConfig };\n            \n            // Re-apply config-dependent settings\n            this.showRoom = this._config.showRoom !== false;\n            this.allowRoomChange = this._config.allowRoomChange !== false;\n            \n            // Re-initialize with new config if needed\n            if (this._config.topic) {\n                let topic = this._config.topic;\n                if (typeof topic === 'object' && topic.room) {\n                    topic = topic.room;\n                }\n                // Set room in ChatHeader component\n                if (this.chatHeaderComponent) {\n                    this.chatHeaderComponent.setRoom(topic);\n                }\n                // Reconnect with new config\n                if (this.connectRTC) {\n                    this.connectRTC(this._config);\n                }\n            }\n        }\n        \n        // Call parent's connectedCallback if it exists\n        if (super.connectedCallback) {\n            super.connectedCallback();\n        }\n    }\n    \n    connectRTC(config) {\n        config = config || {};\n        // Use topic from config if provided, otherwise localStorage, otherwise 'chat'\n        let topic = config.topic || localStorage.getItem('topic') || 'chat';\n        // If topic is an object, extract the room\n        if (typeof topic === 'object' && topic.room) {\n            topic = topic.room;\n        }\n        // Use new nested config format\n        if (!config.topic || typeof config.topic === 'string') {\n            config.topic = { room: config.topic || topic };\n        } else if (!config.topic.room) {\n            config.topic.room = topic;\n        }\n        config.trustMode = config.trustMode || 'moderate';\n        this.rtc = new SignedMQTTRTCClient(config);\n        this.rtc.shouldTrust = (peerName) => {return Promise.resolve(true)};\n        this.rtc.on('connectionrequest', this.connectionrequest);\n        // Note: Incoming calls are now handled by CallManager, not here\n        // The 'call' event is handled by CallManager._handleIncomingCall which uses\n        // CallUIInterface.showIncomingCallPrompt (implemented by CallManagement)\n        // DO NOT add a direct 'call' event handler here - it will add prompts to messages!\n        \n        // Note: callended events are now handled by CallManager\n        // DO NOT add cleanup here for pending calls - CallManager handles this\n\n        this.rtc.on('validation', (peerName, trusted) => {\n            if (trusted) {\n                this.notify(`Trusted ${peerName}`);\n            } else {\n                this.notify(`Validated ${peerName}`);\n            }\n            // Update call button visibility if callButton exists (legacy support)\n            if (this.callButton) {\n                this.callButton.style.display = \"block\";\n                this.callButton.title = `Call ${peerName}`;\n            }\n            //set help text to show the last validated peer\n            this.lastValidated = peerName;\n        })\n        this.rtc.on('callended', ()=>{\n            // Update button visibility if buttons exist (legacy support)\n            if (this.callButton) {\n                this.callButton.style.display = \"block\";\n            }\n            if (this.endCallButton) {\n                this.endCallButton.style.display = \"none\";\n            }\n        });\n        // Legacy call button handlers - only if vc exists (disabled since we're using ChatBox video display)\n        // if (this.callButton && this.vc) {\n        //     this.callButton.onclick = () => {\n        //         this.callButton.style.display = \"none\";\n        //         if (this.endCallButton) {\n        //             this.endCallButton.style.display = \"block\";\n        //         }\n        //         this.vc.call(this.lastValidated);\n        //     }\n        // }\n        // if (this.endCallButton && this.vc) {\n        //     this.endCallButton.onclick = () => {\n        //         this.vc.endCall();\n        //     };\n        // }\n        this.rtc.on('validationfailure', (peerName, message) => {\n            this.notify(`Validation failed for ${peerName}`);\n        });\n    }\n    notify(message) {\n        // Use ChatBox's cached messages element (cached as 'messages' -> this.messages)\n        const messagesEl = this.messages || this.shadowRoot?.getElementById('messages');\n        if (messagesEl) {\n            let el = document.createElement('div');\n            el.innerHTML = message;\n            el.style.color = 'gray';\n            el.style.fontSize = '0.8em';\n            messagesEl.appendChild(el);\n        } else {\n            console.warn('Cannot display notification: messages element not found', message);\n        }\n    }\n\n    /**\n     * Show a missed call notification message\n     * @param {string} peerName - Name of the peer\n     * @param {string} direction - 'incoming' or 'outgoing'\n     * @private\n     */\n    _showMissedCallMessage(peerName, direction) {\n        const message = direction === 'incoming' \n            ? `Missed call from ${peerName}`\n            : `${peerName} missed your call`;\n        \n        // Create a notification-style message element\n        const messageEl = document.createElement('div');\n        messageEl.style.color = '#666';\n        messageEl.style.fontSize = '0.85em';\n        messageEl.style.fontStyle = 'italic';\n        messageEl.style.marginBottom = '5px';\n        messageEl.style.padding = '5px';\n        messageEl.style.backgroundColor = '#fff3cd';\n        messageEl.style.borderLeft = '3px solid #ffc107';\n        messageEl.style.borderRadius = '3px';\n        messageEl.textContent = message;\n        \n        // Add to messages\n        const messagesEl = this.messages || this.shadowRoot?.getElementById('messages');\n        if (messagesEl) {\n            messagesEl.appendChild(messageEl);\n            // Auto-scroll to bottom\n            messagesEl.scrollTop = messagesEl.scrollHeight;\n        }\n    }\n\n    connectionrequest(peerName, info) {\n        let {bareName, userInfo, providedPubKey, peerNames, knownPubKey, knownName, otherNamesForPubKey, otherPubKeyForName, completedChallenge,\n        explanation, suspiciousness, category, trustLevel, trustLevelString} = info;\n        console.log(\"connectionrequest\", peerName, trustLevel, trustLevelString, explanation, info);\n\n        // Check localStorage for auto-accept setting\n        const autoAcceptEnabled = localStorage.getItem('rtchat_autoAccept') === 'true';\n        if (autoAcceptEnabled) {\n            console.log(\"Auto-accepting connection request from\", peerName);\n            return Promise.resolve(true);\n        }\n\n        // Remove existing prompt for this peer if it exists\n        if (this._activeConnectionPrompts.has(peerName)) {\n            const existingPrompt = this._activeConnectionPrompts.get(peerName);\n            if (existingPrompt && existingPrompt.element && existingPrompt.element.parentNode) {\n                existingPrompt.element.remove();\n            }\n            // Reject the old promise\n            if (existingPrompt && existingPrompt.reject) {\n                existingPrompt.reject(new Error('Replaced by new connection request'));\n            }\n            this._activeConnectionPrompts.delete(peerName);\n        }\n\n        // Ensure hint is defined (default to empty string if not set)\n        const hint = info.hint || '';\n        const promptText = `Do you want to connect to ${peerName}${hint}?`;\n        \n        // Create a new promise for this prompt\n        let promptResolve, promptReject;\n        const promptPromise = new Promise((resolve, reject) => {\n            promptResolve = resolve;\n            promptReject = reject;\n        });\n        \n        // Show the prompt with three options and get the element\n        const promptResult = this.prompt(promptText, true); // true = show auto-accept option\n        const promptElement = promptResult.element;\n        \n        // Track this prompt\n        this._activeConnectionPrompts.set(peerName, {\n            element: promptElement,\n            resolve: promptResolve,\n            reject: promptReject\n        });\n        \n        // When user responds, clean up\n        promptResult.promise.then((result) => {\n            this._activeConnectionPrompts.delete(peerName);\n            promptResolve(result);\n        }).catch((error) => {\n            this._activeConnectionPrompts.delete(peerName);\n            promptReject(error);\n        });\n        \n        return promptPromise;\n    }\n\n    prompt(question, showAutoAccept = false) {\n        let el = document.createElement('div');\n        el.style.marginBottom = '10px';\n        \n        // Question text\n        let questionEl = document.createElement('div');\n        questionEl.innerHTML = question;\n        questionEl.style.marginBottom = '8px';\n        el.appendChild(questionEl);\n        \n        // Button container (on separate row)\n        let buttonContainer = document.createElement('div');\n        buttonContainer.style.display = 'flex';\n        buttonContainer.style.gap = '8px';\n        buttonContainer.style.flexWrap = 'wrap';\n        \n        let yes = document.createElement('button');\n        yes.innerHTML = \"Yes\";\n        let no = document.createElement('button');\n        no.innerHTML = \"No\";\n        \n        buttonContainer.appendChild(yes);\n        buttonContainer.appendChild(no);\n        \n        // Create promise first, then attach handlers\n        let resolveFn, rejectFn;\n        const promise = new Promise((resolve, reject) => {\n            resolveFn = resolve;\n            rejectFn = reject;\n        });\n        \n        yes.onclick = () => {\n            el.remove();\n            resolveFn(true);\n        };\n        no.onclick = () => {\n            el.remove();\n            rejectFn();\n        };\n        \n        // Add auto-accept option if requested\n        if (showAutoAccept) {\n            let autoAccept = document.createElement('button');\n            autoAccept.innerHTML = \"Auto-accept everyone\";\n            autoAccept.onclick = () => {\n                // Store preference in localStorage\n                localStorage.setItem('rtchat_autoAccept', 'true');\n                el.remove();\n                resolveFn(true);\n            };\n            buttonContainer.appendChild(autoAccept);\n        }\n        \n        el.appendChild(buttonContainer);\n        const messagesEl = this.messages || this.shadowRoot?.getElementById('messages');\n        if (messagesEl) {\n            messagesEl.appendChild(el);\n        }\n        \n        // Return both the promise and the element for tracking\n        return {\n            promise: promise,\n            element: el\n        };\n    }\n\n    promptWithOptions(question, options) {\n        let el = document.createElement('div');\n        el.style.marginBottom = '10px';\n        \n        // Question text\n        let questionEl = document.createElement('div');\n        questionEl.innerHTML = question;\n        questionEl.style.marginBottom = '8px';\n        el.appendChild(questionEl);\n        \n        // Button container (on separate row)\n        let buttonContainer = document.createElement('div');\n        buttonContainer.style.display = 'flex';\n        buttonContainer.style.gap = '8px';\n        buttonContainer.style.flexWrap = 'wrap';\n        \n        // Create promise first, then attach handlers\n        let resolveFn, rejectFn;\n        const promise = new Promise((resolve, reject) => {\n            resolveFn = resolve;\n            rejectFn = reject;\n        });\n        \n        // Create buttons for each option\n        options.forEach(option => {\n            let btn = document.createElement('button');\n            btn.innerHTML = option.text;\n            btn.onclick = () => {\n                el.remove();\n                resolveFn(option.value);\n            };\n            buttonContainer.appendChild(btn);\n        });\n        \n        el.appendChild(buttonContainer);\n        const messagesEl = this.messages || this.shadowRoot?.getElementById('messages');\n        if (messagesEl) {\n            messagesEl.appendChild(el);\n        }\n        \n        // Return both the promise and the element for tracking\n        return {\n            promise: promise,\n            element: el\n        };\n    }\n}\n\nwindow.RTChat = RTChat;\nwindow.SignedMQTTRTCClient = SignedMQTTRTCClient;\n\n// Global config queue for auto-config (before element creation)\n// Store pending configs in an array - we'll match them to elements in connectedCallback\nconst autoConfigPending = [];\n\nif (!customElements.get('rtc-hat')) {\n  customElements.define('rtc-hat', RTChat);\n}\n\n// Get script URL - works for both ES modules and IIFE bundles\nfunction getScriptUrl() {\n    // For ES modules\n    if (typeof import.meta !== 'undefined' && import.meta.url) {\n        return import.meta.url;\n    }\n    // For IIFE bundles (regular script tags)\n    if (typeof document !== 'undefined') {\n        const script = document.currentScript || \n            Array.from(document.getElementsByTagName('script')).pop();\n        if (script && script.src) {\n            return script.src;\n        }\n    }\n    // Fallback\n    return window.location.href;\n}\n\nif (['t','true','yes','y','1'].includes((new URL(getScriptUrl()).searchParams.get('add') || \"\").toLowerCase())) {\n    window.addEventListener('load', () => {\n        const urlParams = new URL(getScriptUrl()).searchParams;\n        \n        // Parse search parameters\n        const config = {};\n        \n        // showRoom: default true, set to false if 'false', '0', 'no', etc.\n        const showRoomParam = urlParams.get('showRoom');\n        if (showRoomParam !== null) {\n            config.showRoom = !['false', '0', 'no', 'n', 'f'].includes(showRoomParam.toLowerCase());\n        }\n        \n        // editableRoom (allowRoomChange): default true, set to false if 'false', '0', 'no', etc.\n        const editableRoomParam = urlParams.get('editableRoom');\n        if (editableRoomParam !== null) {\n            config.allowRoomChange = !['false', '0', 'no', 'n', 'f'].includes(editableRoomParam.toLowerCase());\n        }\n        \n        // defaultRoom: set the initial room/topic\n        const defaultRoomParam = urlParams.get('defaultRoom');\n        if (defaultRoomParam !== null) {\n            config.topic = defaultRoomParam;\n        }\n        \n        // Store config in pending queue BEFORE creating element\n        if (Object.keys(config).length > 0) {\n            autoConfigPending.push(config);\n        }\n        \n        // Create element - constructor will run immediately\n        // Don't set any properties on the element during or immediately after creation\n        const chatElement = document.createElement('rtc-hat');\n        \n        // Append to DOM - this will trigger connectedCallback which will apply the config\n        document.body.appendChild(chatElement);\n    });\n}\n\nexport { RTChat, SignedMQTTRTCClient, BasicVideoChat };"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACO,SAAS,WAAW,GAAG;AAC9B,EAAE,OAAO;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,IAAI,EAAE,IAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,QAAQ,EAAE,EAAE;AAChB;AACA;AACA;AACA;AACA;AACA,IAAI,IAAI,EAAE;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,MAAM,EAAE,gCAAgC;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,QAAQ,EAAE,IAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,QAAQ,EAAE,IAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,QAAQ,EAAE,IAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,eAAe,EAAE,IAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,cAAc,EAAE;AACtB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAI,MAAM,EAAE;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,UAAU,EAAE;AAClB,QAAQ,EAAE,IAAI,EAAE,8BAA8B,EAAE;AAChD,QAAQ,EAAE,IAAI,EAAE,+BAA+B,EAAE;AACjD,QAAQ,EAAE,IAAI,EAAE,+BAA+B,EAAE;AACjD,QAAQ,EAAE,IAAI,EAAE,+BAA+B,EAAE;AACjD,QAAQ,EAAE,IAAI,EAAE,+BAA+B;AAC/C,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,kBAAkB,EAAE,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,YAAY,EAAE,UAAU;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,aAAa,EAAE,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,oBAAoB,EAAE;AAC5B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAI,KAAK,EAAE;AACX;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAAI,EAAE,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAAI,EAAE,IAAI;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,SAAS,EAAE;AACjB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,OAAO,EAAE,IAAI;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,MAAM,EAAE,IAAI;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAW,EAAE,IAAI;AACrB;AACA;AACA;AACA;AACA;AACA,IAAI,WAAW,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,OAAO,EAAE,IAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,OAAO,EAAE,WAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,SAAS,EAAE;AACjB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAI,UAAU,EAAE;AAChB;AACA;AACA;AACA;AACA;AACA,MAAM,WAAW,EAAE,IAAI;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,aAAa,EAAE,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,oBAAoB,EAAE,QAAQ;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,cAAc,EAAE,IAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,iBAAiB,EAAE,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,qBAAqB,EAAE;AAC7B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAI,OAAO,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,OAAO,EAAE,IAAI;AACnB;AACA;AACA;AACA;AACA;AACA;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,GAAG,IAAI,CAAC,aAAa,CAAC,kCAAkC,CAAC;AAClF,MAAM,IAAI,aAAa,EAAE;AACzB,QAAQ,MAAM,OAAO,GAAG,aAAa,CAAC,YAAY,CAAC,oBAAoB,CAAC;AACxE,QAAQ,IAAI,OAAO,KAAK,GAAG,EAAE;AAC7B,UAAU;AACV,QAAQ;AACR,QAAQ,IAAI,aAAa,CAAC,UAAU,EAAE;AACtC,UAAU,aAAa,CAAC,UAAU,CAAC,WAAW,CAAC,aAAa,CAAC;AAC7D,QAAQ;AACR,MAAM;AACN,IAAI;;AAEJ,IAAI,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC;AACjD,IAAI,KAAK,CAAC,YAAY,CAAC,2BAA2B,EAAE,MAAM,CAAC;AAC3D,IAAI,KAAK,CAAC,YAAY,CAAC,oBAAoB,EAAE,GAAG,CAAC;AACjD,IAAI,KAAK,CAAC,WAAW,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC;AACL;AACA;AACA;AACA,IAAI,IAAI,IAAI,YAAY,UAAU,EAAE;AACpC;AACA,MAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;AAC7B,IAAI,CAAC,MAAM,IAAI,IAAI,KAAK,QAAQ,IAAI,IAA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AC,IAAI,CAAC,4DAA4D,EAAE,KAAK,CAAC;AACvF;AACA,MAAM,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,iBAAiB,CAAC;AACvE,MAAM,IAAI,OAAO,EAAE;AACnB,QAAQ,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,wBAAwB,EAAE;AAC7D,MAAM;AACN,IAAI;AACJ,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE,WAAW,GAAG;AAChB;AACA;AACA,IAAI,OAAO;AACX;AACA,8BAA8B,EAAE,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC;AACL,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE,cAAc,GAAG;AACnB;AACA,IAAI,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,uBAAuB,CAAC;AACtF,IAAI,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,wBAAwB,CAAC;AACxF,IAAI,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,oBAAoB,CAAC;AACjF,IAAI,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,yBAAyB,CAAC;AAC1F;AACA;AACA,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAA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"}